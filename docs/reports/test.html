<html>
<head>
<meta http-equiv='content-type' content='text/html; charset=utf8'>
<style>
<!--
body {width:auto;padding:5;margin:5;}
.error {font-weight:bold;color:#f00;font-style:italic; border: solid 1px red;}
.word,.hword,.oword,.altwd {border-left: 1px solid #CDF; border-bottom: 1px solid #CDF;}
.word {color: #009}
.hword {color: #009; font-weight: 700;}
.oword {color: #009; font-style: italic;}
.altwd {color: #00c; font-style: oblique;}
.cmd {color: #c00;}
.exclcmd {color: #f99;}
.option {color: #cc0;}
.optparm {color: #c90;}
.envir, .document {color: #900; font-weight:bold;}
.math {color: #6c0;}
.mathgroup {color: #090;}
.exclmath {color: #9f6;}
.mathcmd {color: #6c0;}
.ignore {color: #999;}
.exclenv {color:#c66;}
.special {color:#c66; font-weight: bold;}
.specarg {color:#c66; font-weight: bold; font-style: italic;}
.tc {color: #999; font-weight:bold;}
.comment {color: #999; font-style: italic;}
.state {color: #990; font-size: 70%;}
.cumsum {color: #999; font-size: 80%;}
.fileinc {color: #696; font-weight:bold;}
.warning {color: #c00; font-weight: 700;}
.note {color: #c90; font-weight: bold;}

div.filegroup, div.parse, div.stylehelp, div.count, div.sumcount, div.error {
   border: solid 1px #999; margin: 4pt 0pt; padding: 4pt;
}
div.stylehelp {font-size: 80%; background: #fffff0; margin-bottom: 16pt;}
div.filegroup {background: #dfd; margin-bottom: 16pt;}
div.count {background: #ffe;}
div.sumcount {background: #cec;}
div.error {background: #fcc;}
.parse {font-size: 80%; background: #f8fff8; border-bottom:none;}

ul.count {list-style-type: none; margin: 4pt 0pt; padding: 0pt;}
.count li.header {font-weight: bold; font-style: italic;}
.subcount li.header {font-weight: normal; font-style: italic;}
.subcount li {margin-left: 16pt; font-size: 80%;}
.fielddesc {font-style: italic;}
.nb {color: #900;}

table.stat {border:2px solid #339; margin:0 0 8pt 0; background:#666; border-collapse:collapse;}
table.stat tr {border:1px solid #CCC;}
table.stat th, table.stat td {padding:1pt 4pt;}
table.stat col {padding:4pt;}
table.stat thead {background: #CCF;}
table.stat tbody {border:1px solid #333;}
table.stat tbody.sumstat {background:#FFC;}
table.stat tbody.langstat {background:#FEE;}
table.stat tbody.wordstat {background:#EEF;}
table.stat tbody.macrostat {background:#EFE;}
table.stat .sum {font-weight:bold; font-style:italic;}
-->
</style>
</head>

<body>

<h1>LaTeX word count</h1>
<div class="stylehelp"><p><h2>Format/colour codes of verbose output:</h2>

<span class='error'>ERROR</span>&nbsp;&nbsp;....&nbsp;&nbsp;TeXcount error message<br>
<span class='word'>Text which is counted</span>&nbsp;&nbsp;....&nbsp;&nbsp;counted as text words<br>
<span class='hword'>Header and title text</span>&nbsp;&nbsp;....&nbsp;&nbsp;counted as header words<br>
<span class='oword'>Caption text and footnotes</span>&nbsp;&nbsp;....&nbsp;&nbsp;counted as caption words<br>
<span class='altwd'>Words in user specified counters</span>&nbsp;&nbsp;....&nbsp;&nbsp;counted in separate counters<br>
<span class='ignore'>Ignored text or code</span>&nbsp;&nbsp;....&nbsp;&nbsp;excluded or ignored<br>
<span class='document'>\documentclass</span>&nbsp;&nbsp;....&nbsp;&nbsp;document start, beginning of preamble<br>
<span class='special'>Special macros, eg require special handling or have side-effects</span>&nbsp;&nbsp;....&nbsp;&nbsp;<br>
<span class='cmd'>\macro</span>&nbsp;&nbsp;....&nbsp;&nbsp;macro not counted, but parameters may be<br>
<span class='exclcmd'>\macro</span>&nbsp;&nbsp;....&nbsp;&nbsp;macro in excluded region<br>
<span class='option'>[Macro options]</span>&nbsp;&nbsp;....&nbsp;&nbsp;not counted<br>
<span class='optparm'>[Optional parameter]</span>&nbsp;&nbsp;....&nbsp;&nbsp;content parsed and styled as counted<br>
<span class='envir'>\begin{name}&nbsp; \end{name}</span>&nbsp;&nbsp;....&nbsp;&nbsp;environment<br>
<span class='exclenv'>\begin{name}&nbsp; \end{name}</span>&nbsp;&nbsp;....&nbsp;&nbsp;environment in excluded region<br>
<span class='specarg'>Special argument, eg with side-effects</span>&nbsp;&nbsp;....&nbsp;&nbsp;<br>
<span class='mathgroup'>$&nbsp; $</span>&nbsp;&nbsp;....&nbsp;&nbsp;counted as one equation<br>
<span class='exclmath'>$&nbsp; $</span>&nbsp;&nbsp;....&nbsp;&nbsp;equation in excluded region<br>
<span class='math'>2+2=4</span>&nbsp;&nbsp;....&nbsp;&nbsp;maths (inside $...$ etc.)<br>
<span class='mathcmd'>$\macro$</span>&nbsp;&nbsp;....&nbsp;&nbsp;macros inside maths<br>
<span class='comment'>% Comments</span>&nbsp;&nbsp;....&nbsp;&nbsp;not counted<br>
<span class='tc'>%TC:TeXcount instructions</span>&nbsp;&nbsp;....&nbsp;&nbsp;not counted<br>
<span class='fileinc'>File to include</span>&nbsp;&nbsp;....&nbsp;&nbsp;not counted but file may be counted later<br>
</p></div>


<div class='filegroup'>
<h2>File: ELEC5881M_Ben_Lancaster_201280376_Final.tex</h2>
<div class='parse'><p>
<span class='document'>\documentclass</span><span class='option'>[11pt,a4paper]</span><span class='document'>{report}</span><br>
<br>
<span class='comment'>%https://tex.stackexchange.com/questions/134079/font-setup-for-an-academic-thesis-no-computer-modern-wanted</span><br>
<span class='comment'>%\usepackage[libertine,cmintegrals,cmbraces,vvarbb]{newtxmath}</span><br>
<span class='comment'>%\usepackage[scaled=0.95]{inconsolata}</span><br>
<span class='comment'>%\usepackage{classicthesis}</span><br>
<br>
<span class='document'>\usepackage</span><span class='optparm'>[</span><span class='ignore'>sc</span><span class='optparm'>]</span><span class='ignore'>{</span><span class='specarg'>mathpazo</span><span class='document'>}</span><br>
<br>
<span class='comment'>%\usepackage{helvet}</span><br>
<span class='comment'>%\renewcommand{\familydefault}{\sfdefault}</span><br>
<br>
<span class='comment'>%\usepackage{lmodern}</span><br>
<br>
<span class='exclcmd'>\linespread</span><span class='ignore'>{</span><span class='ignore'>1.2</span><span class='ignore'>}</span><br>
<span class='document'>\usepackage</span><span class='optparm'>[</span><span class='ignore'>margin</span><span class='ignore'>=</span><span class='ignore'>1in</span><span class='optparm'>]</span><span class='ignore'>{</span><span class='specarg'>geometry</span><span class='document'>}</span><br>
<br>
<span class='document'>\usepackage</span><span class='ignore'>{</span><span class='specarg'>microtype</span><span class='document'>}</span><br>
<span class='document'>\usepackage</span><span class='ignore'>{</span><span class='specarg'>wrapfig</span><span class='document'>}</span><br>
<span class='document'>\usepackage</span><span class='ignore'>{</span><span class='specarg'>subcaption</span><span class='document'>}</span><br>
<br>
<span class='document'>\usepackage</span><span class='optparm'>[</span><span class='ignore'>sort</span><span class='ignore'>,</span><span class='ignore'>numbers</span><span class='ignore'>,</span><span class='ignore'>sectionbib</span><span class='optparm'>]</span><span class='ignore'>{</span><span class='specarg'>natbib</span><span class='document'>}</span><br>
<span class='comment'>%\usepackage{natbib}</span><br>
<span class='comment'>%\usepackage{biblatex}</span><br>
<span class='exclcmd'>\bibliographystyle</span><span class='ignore'>{</span><span class='ignore'>IEEEtranUrldate</span><span class='ignore'>}</span><br>
<span class='cmd'>\renewcommand</span><span class='ignore'>{</span><span class='ignore'>\bibname</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='ignore'>References</span><span class='ignore'>}</span><br>
<span class='comment'>%\usepackage{urlbst}</span><br>
<br>
<span class='comment'>% http://ctan.org/pkg/lipsum</span><br>
<span class='document'>\usepackage</span><span class='ignore'>{</span><span class='specarg'>lipsum</span><span class='document'>}</span><br>
<br>
<span class='comment'>% https://tex.stackexchange.com/questions/94224/how-to-create-a-list-with-a-fixed-prefix-and-incremental-numbers</span><br>
<span class='document'>\usepackage</span><span class='ignore'>{</span><span class='specarg'>enumitem</span><span class='document'>}</span><br>
<br>
<span class='comment'>% strikethrough st</span><br>
<span class='document'>\usepackage</span><span class='ignore'>{</span><span class='specarg'>soul</span><span class='document'>}</span><br>
<br>
<span class='comment'>% https://tex.stackexchange.com/questions/86120/font-size-of-figure-caption-header</span><br>
<span class='document'>\usepackage</span><span class='optparm'>[</span><span class='ignore'>font</span><span class='ignore'>=</span><span class='ignore'>scriptsize</span><span class='ignore'>,</span><span class='ignore'>labelfont</span><span class='ignore'>=</span><span class='ignore'>bf</span><span class='optparm'>]</span><span class='ignore'>{</span><span class='specarg'>caption</span><span class='document'>}</span><br>
<br>
<span class='comment'>%https://tex.stackexchange.com/questions/3001/list-sections-of-chapter-at-beginning-of-that-chapter</span><br>
<span class='comment'>% !!! NEEDS TO BE ABOVE HYPEREF !!!</span><br>
<span class='document'>\usepackage</span><span class='ignore'>{</span><span class='specarg'>titletoc</span><span class='document'>}</span><br>
<br>
<span class='comment'>% https://www.sharelatex.com/learn/Hyperlinks</span><br>
<span class='document'>\usepackage</span><span class='ignore'>{</span><span class='specarg'>hyperref</span><span class='document'>}</span><br>
<span class='exclcmd'>\hypersetup</span><span class='ignore'>{</span><br>
&nbsp; &nbsp; <span class='ignore'>colorlinks</span><span class='ignore'>,</span><br>
&nbsp; &nbsp; <span class='comment'>%citecolor=gray,</span><br>
&nbsp; &nbsp; <span class='ignore'>citecolor</span><span class='ignore'>=</span><span class='ignore'>blue</span><span class='ignore'>,</span><br>
&nbsp; &nbsp; <span class='ignore'>filecolor</span><span class='ignore'>=</span><span class='ignore'>black</span><span class='ignore'>,</span><br>
&nbsp; &nbsp; <span class='ignore'>linkcolor</span><span class='ignore'>=</span><span class='ignore'>blue</span><span class='ignore'>,</span><br>
&nbsp; &nbsp; <span class='ignore'>urlcolor</span><span class='ignore'>=</span><span class='ignore'>blue</span><span class='ignore'>,</span><br>
&nbsp; &nbsp; <span class='ignore'>linktoc</span><span class='ignore'>=</span><span class='ignore'>all</span><br>
<span class='ignore'>}</span><br>
<br>
<span class='document'>\usepackage</span><span class='optparm'>[</span><span class='ignore'>acronym</span><span class='optparm'>]</span><span class='ignore'>{</span><span class='specarg'>glossaries</span><span class='document'>}</span><br>
<span class='exclcmd'>\newglossaryentry</span><span class='ignore'>{</span><span class='ignore'>utc</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='ignore'>name</span><span class='ignore'>=</span><span class='ignore'>UTC</span><span class='ignore'>,</span> <span class='ignore'>description</span><span class='ignore'>=</span><span class='ignore'>{</span><span class='ignore'>Coordinated</span> <span class='ignore'>Universal</span> <span class='ignore'>Time</span><span class='ignore'>}</span><span class='ignore'>}</span><br>
<span class='exclcmd'>\newglossaryentry</span><span class='ignore'>{</span><span class='ignore'>FPGA</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='ignore'>name</span><span class='ignore'>=</span><span class='ignore'>FPGA</span><span class='ignore'>,</span> <span class='ignore'>description</span><span class='ignore'>=</span><span class='ignore'>{</span><span class='ignore'>Field</span> <span class='ignore'>Programmable</span> <span class='ignore'>Gate</span> <span class='ignore'>Array</span><span class='ignore'>}</span><span class='ignore'>}</span><br>
<span class='exclcmd'>\makeglossaries</span><br>
<br>
<span class='document'>\usepackage</span><span class='optparm'>[</span><span class='ignore'>nameinlink</span><span class='ignore'>,</span><span class='ignore'>capitalise</span><span class='ignore'>,</span><span class='ignore'>noabbrev</span><span class='optparm'>]</span><span class='ignore'>{</span><span class='specarg'>cleveref</span><span class='document'>}</span><br>
<br>
<span class='comment'>% includegraphics</span><br>
<span class='document'>\usepackage</span><span class='optparm'>[</span><span class='optparm'>]</span><span class='ignore'>{</span><span class='specarg'>graphicx</span><span class='document'>}</span><br>
<span class='exclcmd'>\graphicspath</span><span class='ignore'>{</span><span class='ignore'>{</span><span class='ignore'>.</span><span class='ignore'>.</span><span class='ignore'>/</span><span class='ignore'>img</span><span class='ignore'>/</span><span class='ignore'>}</span><span class='ignore'>}</span><br>
<span class='document'>\usepackage</span><span class='ignore'>{</span><span class='specarg'>mwe</span><span class='document'>}</span><br>
<br>
<span class='document'>\usepackage</span><span class='optparm'>[</span><span class='ignore'>outputdir</span><span class='ignore'>=</span><span class='ignore'>build</span><span class='optparm'>]</span><span class='ignore'>{</span><span class='specarg'>minted</span><span class='document'>}</span><br>
<span class='comment'>%https://www.sharelatex.com/learn/Code_Highlighting_with_minted#Reference_guide</span><br>
<span class='comment'>%\usemintedstyle{vs}</span><br>
<span class='comment'>% https://tex.stackexchange.com/questions/161124/how-to-make-a-minted-code-listing-centered-on-a-page</span><br>
<span class='comment'>% WARNING MAKES LONG CODE on 1 page!</span><br>
<span class='comment'>%\RecustomVerbatimEnvironment{Verbatim}{BVerbatim}{}</span><br>
<span class='exclcmd'>\setminted</span><span class='option'>[python]</span><span class='ignore'>{</span><span class='ignore'>linenos</span><span class='ignore'>,</span><span class='ignore'>baselinestretch</span><span class='ignore'>=</span><span class='ignore'>0.5</span><span class='ignore'>,</span><span class='ignore'>frame</span><span class='ignore'>=</span><span class='ignore'>single</span><span class='ignore'>,</span><span class='ignore'>framesep</span><span class='ignore'>=</span><span class='ignore'>10pt</span><span class='ignore'>}</span><br>
<span class='exclcmd'>\setminted</span><span class='option'>[verilog]</span><span class='ignore'>{</span><span class='ignore'>linenos</span><span class='ignore'>,</span><span class='ignore'>baselinestretch</span><span class='ignore'>=</span><span class='ignore'>0.5</span><span class='ignore'>,</span><span class='ignore'>frame</span><span class='ignore'>=</span><span class='ignore'>single</span><span class='ignore'>,</span><span class='ignore'>framesep</span><span class='ignore'>=</span><span class='ignore'>10pt</span><span class='ignore'>}</span><br>
<span class='exclcmd'>\setminted</span><span class='option'>[arm]</span><span class='ignore'>{</span><span class='ignore'>linenos</span><span class='ignore'>,</span><span class='ignore'>baselinestretch</span><span class='ignore'>=</span><span class='ignore'>0.5</span><span class='ignore'>,</span><span class='ignore'>frame</span><span class='ignore'>=</span><span class='ignore'>single</span><span class='ignore'>,</span><span class='ignore'>framesep</span><span class='ignore'>=</span><span class='ignore'>10pt</span><span class='ignore'>}</span><br>
<br>
<span class='comment'>% tables, row colour</span><br>
<span class='document'>\usepackage</span><span class='ignore'>{</span><span class='specarg'>tabularx</span><span class='specarg'>,</span><span class='specarg'>colortbl</span><span class='specarg'>,</span><span class='specarg'>booktabs</span><span class='document'>}</span><br>
<span class='comment'>% For vertical centering text in X column</span><br>
<span class='cmd'>\renewcommand</span><span class='ignore'>\tabularxcolumn</span><span class='option'>[1]</span><span class='ignore'>{</span><span class='ignore'>m</span><span class='ignore'>{</span><span class='ignore'>#</span><span class='ignore'>1</span><span class='ignore'>}</span><span class='ignore'>}</span><br>
<span class='exclcmd'>\def</span><span class='exclcmd'>\arraystretch</span><span class='ignore'>{</span><span class='ignore'>1.3</span><span class='ignore'>}</span><br>
<br>
<span class='document'>\usepackage</span><span class='ignore'>{</span><span class='specarg'>bytefield</span><span class='document'>}</span><br>
<span class='comment'>%\let\bitbox\bitboxt</span><br>
<span class='comment'>%\renewcommand{\bitbox}[2]{\bitboxt{#1}{\texttt{#2}}}</span><br>
<br>
<span class='cmd'>\newcommand</span><span class='ignore'>{</span><span class='ignore'>\descbox</span><span class='ignore'>}</span><span class='option'>[2]</span><span class='ignore'>{</span><span class='ignore'>\parbox</span><span class='ignore'>[</span><span class='ignore'>c</span><span class='ignore'>]</span><span class='ignore'>[</span><span class='ignore'>3.8</span><span class='ignore'>\baselineskip</span><span class='ignore'>]</span><span class='ignore'>{</span><span class='ignore'>0.95</span><span class='ignore'>\width</span><span class='ignore'>}</span><span class='ignore'>}</span><br>
<span class='comment'>% facilitates the creation of memory maps. Start address at the bottom,</span><br>
<span class='comment'>% end address at the top.</span><br>
<span class='comment'>% syntax:</span><br>
<span class='comment'>% \memsection{end address}{start address}{height in lines}{text in box}</span><br>
<br>
<span class='comment'>% facilitates the creation of memory maps. Start address at the bottom, end address at the top.</span><br>
<span class='comment'>% syntax: \memsection{end address}{start address}{height in lines}{text in box}</span><br>
<span class='cmd'>\newcommand</span><span class='ignore'>{</span><span class='ignore'>\memsection</span><span class='ignore'>}</span><span class='option'>[4]</span><span class='ignore'>{</span><br>
<span class='ignore'>\bytefieldsetup</span><span class='ignore'>{</span><span class='ignore'>bitheight</span><span class='ignore'>=</span><span class='ignore'>#</span><span class='ignore'>3</span><span class='ignore'>\baselineskip</span><span class='ignore'>}</span>&nbsp; &nbsp; <span class='comment'>% define the height of the memsection</span><br>
<span class='ignore'>\bitbox</span><span class='ignore'>[</span><span class='ignore'>]</span><span class='ignore'>{</span><span class='ignore'>10</span><span class='ignore'>}</span><span class='ignore'>{</span><br>
<span class='ignore'>\texttt</span><span class='ignore'>{</span><span class='ignore'>#</span><span class='ignore'>1</span><span class='ignore'>}</span>&nbsp; &nbsp;  <span class='comment'>% print end address</span><br>
<span class='ignore'>\\</span> <span class='ignore'>\vspace</span><span class='ignore'>{</span><span class='ignore'>#</span><span class='ignore'>3</span><span class='ignore'>\baselineskip</span><span class='ignore'>}</span> <span class='ignore'>\vspace</span><span class='ignore'>{</span><span class='ignore'>-</span><span class='ignore'>2</span><span class='ignore'>\baselineskip</span><span class='ignore'>}</span> <span class='ignore'>\vspace</span><span class='ignore'>{</span><span class='ignore'>-</span><span class='ignore'>#</span><span class='ignore'>3pt</span><span class='ignore'>}</span> <span class='comment'>% do some spacing</span><br>
<span class='ignore'>\texttt</span><span class='ignore'>{</span><span class='ignore'>#</span><span class='ignore'>2</span><span class='ignore'>}</span> <span class='comment'>% print start address</span><br>
<span class='ignore'>}</span><br>
<span class='ignore'>\bitbox</span><span class='ignore'>{</span><span class='ignore'>16</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='ignore'>#</span><span class='ignore'>4</span><span class='ignore'>}</span> <span class='comment'>% print box with caption</span><br>
<span class='ignore'>}</span><br>
<br>
<span class='comment'>% http://texdoc.net/texmf-dist/doc/latex/bytefield/bytefield.pdf</span><br>
<span class='exclcmd'>\definecolor</span><span class='ignore'>{</span><span class='ignore'>lightgray</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='ignore'>gray</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='ignore'>0.8</span><span class='ignore'>}</span><br>
<br>
<span class='document'>\usepackage</span><span class='ignore'>{</span><span class='specarg'>rotating</span><span class='document'>}</span><br>
<span class='cmd'>\newcommand</span><span class='ignore'>{</span><span class='ignore'>\bitlabel</span><span class='ignore'>}</span><span class='option'>[2]</span><span class='ignore'>{</span><span class='comment'>%</span><br>
<span class='ignore'>\bitbox</span><span class='ignore'>[</span><span class='ignore'>]</span><span class='ignore'>{</span><span class='ignore'>#</span><span class='ignore'>1</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='comment'>%</span><br>
<span class='ignore'>\raisebox</span><span class='ignore'>{</span><span class='ignore'>0pt</span><span class='ignore'>}</span><span class='ignore'>[</span><span class='ignore'>4ex</span><span class='ignore'>]</span><span class='ignore'>[</span><span class='ignore'>0pt</span><span class='ignore'>]</span><span class='ignore'>{</span><span class='comment'>%</span><br>
<span class='ignore'>\turnbox</span><span class='ignore'>{</span><span class='ignore'>45</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='ignore'>\fontsize</span><span class='ignore'>{</span><span class='ignore'>7</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='ignore'>7</span><span class='ignore'>}</span><span class='ignore'>\selectfont</span><span class='ignore'>#</span><span class='ignore'>2</span><span class='ignore'>}</span><span class='comment'>%</span><br>
<span class='ignore'>}</span><span class='comment'>%</span><br>
<span class='ignore'>}</span><span class='comment'>%</span><br>
<span class='ignore'>}</span><br>
<br>
<span class='document'>\usepackage</span><span class='optparm'>[</span><span class='ignore'>toc</span><span class='optparm'>]</span><span class='ignore'>{</span><span class='specarg'>appendix</span><span class='document'>}</span><br>
<span class='comment'>%https://tex.stackexchange.com/questions/2441/how-to-add-a-forced-line-break-inside-a-table-cell</span><br>
<span class='document'>\usepackage</span><span class='ignore'>{</span><span class='specarg'>makecell</span><span class='document'>}</span><br>
<br>
<span class='comment'>%\usepackage{lineno}</span><br>
<span class='comment'>%\linenumbers</span><br>
<br>
<span class='comment'>%\usepackage{titlesec}</span><br>
<span class='comment'>%\titleformat{\chapter}[display]</span><br>
<span class='comment'>%&nbsp; {\normalfont\sffamily\huge\bfseries}</span><br>
<span class='comment'>%&nbsp; {\chaptertitlename\ \thechapter}{20pt}{\Huge}</span><br>
<span class='comment'>%\titleformat{\section}</span><br>
<span class='comment'>%&nbsp; {\normalfont\sffamily\Large\bfseries}</span><br>
<span class='comment'>%&nbsp; {\thesection}{1em}{}</span><br>
<br>
<span class='envir'>\begin</span><span class='envir'>{document}</span><br>
<br>
<span class='cmd'>\include</span><span class='ignore'>{</span><span class='fileinc'>chapter_title</span><span class='ignore'>}</span><br>
<span class='cmd'>\include</span><span class='ignore'>{</span><span class='fileinc'>chapter_info</span><span class='ignore'>}</span><br>
<br>
<span class='tc'>%TC:ignore</span><br>
<span class='ignore'>\newpage</span><br>
<span class='comment'>%\newgeometry{voffset=-4cm,bottom=-4cm}</span><br>
<span class='ignore'>\renewcommand</span><span class='ignore'>*</span><span class='ignore'>\contentsname</span><span class='ignore'>{</span><span class='ignore'>Table</span><span class='ignore'> </span><span class='ignore'>of</span><span class='ignore'> </span><span class='ignore'>Contents</span><span class='ignore'>}</span><br>
<span class='ignore'>\tableofcontents</span><br>
<span class='ignore'>\listoffigures</span><br>
<span class='ignore'>\listoftables</span><br>
<span class='ignore'>\listoflistings</span><br>
<br>
<span class='ignore'>\glsaddall</span><br>
<span class='ignore'>\glsaddall</span><br>
<span class='ignore'>\glsadd</span><span class='ignore'>{</span><span class='ignore'>FPGA</span><span class='ignore'>}</span><br>
<br>
<span class='ignore'>\printglossaries</span><br>
<span class='tc'>%TC:endignore</span><br>
<br>
<span class='cmd'>\include</span><span class='ignore'>{</span><span class='fileinc'>chapter_int_intro</span><span class='ignore'>}</span><br>
<span class='cmd'>\include</span><span class='ignore'>{</span><span class='fileinc'>chapter_proj</span><span class='ignore'>}</span><br>
<span class='cmd'>\include</span><span class='ignore'>{</span><span class='fileinc'>chapter_singlecore</span><span class='ignore'>}</span><br>
<span class='cmd'>\include</span><span class='ignore'>{</span><span class='fileinc'>chapter_design</span><span class='ignore'>}</span><br>
<span class='cmd'>\include</span><span class='ignore'>{</span><span class='fileinc'>chapter_software</span><span class='ignore'>}</span><br>
<span class='cmd'>\include</span><span class='ignore'>{</span><span class='fileinc'>chapter_results</span><span class='ignore'>}</span><br>
<br>
<span class='tc'>%TC:ignore</span><br>
<span class='ignore'>\clearpage</span><br>
<span class='ignore'>\bibliography</span><span class='ignore'>{</span><span class='ignore'>refs</span><span class='ignore'>}</span><br>
<span class='ignore'>\addcontentsline</span><span class='ignore'>{</span><span class='ignore'>toc</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='ignore'>chapter</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='ignore'>References</span><span class='ignore'>}</span><br>
<span class='ignore'>\include</span><span class='ignore'>{</span><span class='ignore'>chapter</span><span class='ignore'>_</span><span class='ignore'>appendix</span><span class='ignore'>}</span><br>
<span class='tc'>%TC:endignore</span><br>
<br>
<br>
<span class='envir'>\end</span><span class='envir'>{document}</span><br>
<br>
<br>
</p></div>
<div class='count'>
<ul class='count'>
<li class='header'>File: ELEC5881M_Ben_Lancaster_201280376_Final.tex</li>
<li>Encoding: ascii</li>
<li>Words in text: 0</li>
<li>Words in headers: 0</li>
<li>Words outside text (captions, etc.): 0</li>
<li>Number of headers: 0</li>
<li>Number of floats/tables/figures: 0</li>
<li>Number of math inlines: 0</li>
<li>Number of math displayed: 0</li>
</ul>
</div>
<h2>File: ./chapter_title.tex</h2>
<div class='parse'><p>
<span class='tc'>%TC:ignore</span><br>
<span class='ignore'>\pagestyle</span><span class='ignore'>{</span><span class='ignore'>headings</span><span class='ignore'>}</span><br>
<br>
<span class='ignore'>\begin</span><span class='ignore'>{</span><span class='ignore'>titlepage</span><span class='ignore'>}</span><br>
<span class='ignore'>\begin</span><span class='ignore'>{</span><span class='ignore'>center</span><span class='ignore'>}</span><br>
<br>
<span class='ignore'>\vspace</span><span class='ignore'>*</span><span class='ignore'>{</span><span class='ignore'>2cm</span><span class='ignore'>}</span><br>
<span class='ignore'>\Large</span><br>
<br>
<span class='ignore'>\textbf</span><span class='ignore'>{</span><br>
<span class='comment'>%%PRCO304 - Project Initiation Document</span><br>
<span class='comment'>%Highlight Reports</span><br>
<span class='ignore'>Multi-core</span><span class='ignore'> </span><span class='ignore'>RISC</span><span class='ignore'> </span><span class='ignore'>Processor</span><span class='ignore'> </span><span class='ignore'>Design</span><span class='ignore'> </span><span class='ignore'>and</span><span class='ignore'> </span><span class='ignore'>Implementation</span><span class='ignore'> </span><span class='ignore'>\\</span><span class='ignore'>(</span><span class='ignore'>Rev</span><span class='ignore'>.</span><span class='ignore'> </span><span class='ignore'>2.02</span><span class='ignore'>)</span><br>
<span class='ignore'>}</span><br>
<br>
<span class='ignore'>\vspace</span><span class='ignore'>{</span><span class='ignore'>0.4cm</span><span class='ignore'>}</span><br>
<span class='ignore'>\large</span><br>
<span class='comment'>%%Space optimised FPGA-based side-microprocessor.</span><br>
<span class='ignore'>ELEC5881M</span><span class='ignore'> </span><span class='ignore'>-</span><span class='ignore'> </span><span class='ignore'>Final</span><span class='ignore'> </span><span class='ignore'>Report</span><br>
<br>
<span class='ignore'>\vspace</span><span class='ignore'>{</span><span class='ignore'>2cm</span><span class='ignore'>}</span><br>
<span class='ignore'>\textbf</span><span class='ignore'>{</span><span class='ignore'>Ben</span><span class='ignore'> </span><span class='ignore'>David</span><span class='ignore'> </span><span class='ignore'>Lancaster</span><span class='ignore'>}</span><span class='ignore'>\\</span><br>
<span class='ignore'>Student</span><span class='ignore'> </span><span class='ignore'>ID</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>201280376</span><br>
<br>
<span class='ignore'>\vspace</span><span class='ignore'>{</span><span class='ignore'>2cm</span><span class='ignore'>}</span><br>
<span class='ignore'>Submitted</span><span class='ignore'> </span><span class='ignore'>in</span><span class='ignore'> </span><span class='ignore'>accordance</span><span class='ignore'> </span><span class='ignore'>with</span><span class='ignore'> </span><span class='ignore'>the</span><span class='ignore'> </span><span class='ignore'>requirements</span><span class='ignore'> </span><span class='ignore'>for</span><span class='ignore'> </span><span class='ignore'>the</span><span class='ignore'> </span><span class='ignore'>degree</span><span class='ignore'> </span><span class='ignore'>of</span><span class='ignore'>\\</span><br>
<span class='ignore'>Master</span><span class='ignore'> </span><span class='ignore'>of</span><span class='ignore'> </span><span class='ignore'>Science</span><span class='ignore'> </span><span class='ignore'>(</span><span class='ignore'>MSc</span><span class='ignore'>)</span><span class='ignore'>\\</span><br>
<span class='ignore'>in</span><span class='ignore'> </span><span class='ignore'>Embedded</span><span class='ignore'> </span><span class='ignore'>Systems</span><span class='ignore'> </span><span class='ignore'>Engineering</span><span class='ignore'>\\</span><br>
<br>
<span class='ignore'>\vspace</span><span class='ignore'>{</span><span class='ignore'>2cm</span><span class='ignore'>}</span><br>
<span class='ignore'>Supervisor</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>Dr</span><span class='ignore'>.</span><span class='ignore'> </span><span class='ignore'>David</span><span class='ignore'> </span><span class='ignore'>Cowell</span><span class='ignore'>\\</span><br>
<span class='ignore'>Assessor</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>Mr</span><span class='ignore'> </span><span class='ignore'>David</span><span class='ignore'> </span><span class='ignore'>Moore</span><br>
<br>
<span class='ignore'>\vspace</span><span class='ignore'>{</span><span class='ignore'>2cm</span><span class='ignore'>}</span><br>
<span class='ignore'>\textbf</span><span class='ignore'>{</span><span class='ignore'>University</span><span class='ignore'> </span><span class='ignore'>of</span><span class='ignore'> </span><span class='ignore'>Leeds</span><span class='ignore'>}</span><span class='ignore'>\\</span><br>
<span class='ignore'>School</span><span class='ignore'> </span><span class='ignore'>of</span><span class='ignore'> </span><span class='ignore'>Electrical</span><span class='ignore'> </span><span class='ignore'>and</span><span class='ignore'> </span><span class='ignore'>Electronic</span><span class='ignore'> </span><span class='ignore'>Engineering</span><br>
<br>
<span class='ignore'>\vspace</span><span class='ignore'>{</span><span class='ignore'>1cm</span><span class='ignore'>}</span><br>
<span class='ignore'>\today</span><br>
<br>
<span class='ignore'>\vspace</span><span class='ignore'>{</span><span class='ignore'>1cm</span><span class='ignore'>}</span><br>
<span class='ignore'>Word</span><span class='ignore'> </span><span class='ignore'>count</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>8963</span><br>
<span class='ignore'>\end</span><span class='ignore'>{</span><span class='ignore'>center</span><span class='ignore'>}</span><br>
<span class='ignore'>\end</span><span class='ignore'>{</span><span class='ignore'>titlepage</span><span class='ignore'>}</span><br>
<span class='tc'>%TC:endignore</span></p></div>
<br>
<div class='count'>
<ul class='count'>
<li class='header'>Included file: ./chapter_title.tex</li>
<li>Encoding: ascii</li>
<li>Words in text: 0</li>
<li>Words in headers: 0</li>
<li>Words outside text (captions, etc.): 0</li>
<li>Number of headers: 0</li>
<li>Number of floats/tables/figures: 0</li>
<li>Number of math inlines: 0</li>
<li>Number of math displayed: 0</li>
</ul>
</div>
<h2>File: ./chapter_info.tex</h2>
<div class='parse'><p>
<span class='tc'>%TC:ignore</span><br>
<br>
<span class='ignore'>\begin</span><span class='ignore'>{</span><span class='ignore'>abstract</span><span class='ignore'>}</span><br>
<span class='ignore'>This</span><span class='ignore'> </span><span class='ignore'>interim</span><span class='ignore'> </span><span class='ignore'>report</span><span class='ignore'> </span><span class='ignore'>details</span><span class='ignore'> </span><span class='ignore'>the</span><span class='ignore'> </span><span class='ignore'>4-month</span><span class='ignore'> </span><span class='ignore'>progress</span><span class='ignore'> </span><span class='ignore'>on</span><span class='ignore'> </span><span class='ignore'>a</span><span class='ignore'> </span><span class='ignore'>project</span><span class='ignore'> </span><span class='ignore'>to</span><span class='ignore'> </span><span class='ignore'>design</span><span class='ignore'>,</span><span class='ignore'> </span><span class='ignore'>implement</span><span class='ignore'>,</span><span class='ignore'> </span><span class='ignore'>and</span><span class='ignore'> </span><span class='ignore'>verify</span><span class='ignore'>,</span><span class='ignore'> </span><span class='ignore'>a</span><span class='ignore'> </span><span class='ignore'>multi-core</span><span class='ignore'> </span><span class='ignore'>FPGA</span><span class='ignore'> </span><span class='ignore'>RISC</span><span class='ignore'> </span><span class='ignore'>processor</span><span class='ignore'>.</span><span class='ignore'> </span><span class='ignore'>The</span><span class='ignore'> </span><span class='ignore'>project</span><span class='ignore'> </span><span class='ignore'>has</span><span class='ignore'> </span><span class='ignore'>been</span><span class='ignore'> </span><span class='ignore'>split</span><span class='ignore'> </span><span class='ignore'>into</span><span class='ignore'> </span><span class='ignore'>two</span><span class='ignore'> </span><span class='ignore'>stages</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>firstly</span><span class='ignore'> </span><span class='ignore'>to</span><span class='ignore'> </span><span class='ignore'>build</span><span class='ignore'> </span><span class='ignore'>a</span><span class='ignore'> </span><span class='ignore'>functional</span><span class='ignore'> </span><span class='ignore'>single-core</span><span class='ignore'> </span><span class='ignore'>RISC</span><span class='ignore'> </span><span class='ignore'>processor</span><span class='ignore'>,</span><span class='ignore'> </span><span class='ignore'>and</span><span class='ignore'> </span><span class='ignore'>then</span><span class='ignore'> </span><span class='ignore'>secondly</span><span class='ignore'> </span><span class='ignore'>to</span><span class='ignore'> </span><span class='ignore'>add</span><span class='ignore'> </span><span class='ignore'>multiprocessor</span><span class='ignore'> </span><span class='ignore'>principles</span><span class='ignore'> </span><span class='ignore'>and</span><span class='ignore'> </span><span class='ignore'>functionality</span><span class='ignore'> </span><span class='ignore'>to</span><span class='ignore'> </span><span class='ignore'>it</span><span class='ignore'>.</span><br>
<br>
<span class='ignore'>Current</span><span class='ignore'> </span><span class='ignore'>multiprocessor</span><span class='ignore'> </span><span class='ignore'>and</span><span class='ignore'> </span><span class='ignore'>network-on-chip</span><span class='ignore'> </span><span class='ignore'>communication</span><span class='ignore'> </span><span class='ignore'>methods</span><span class='ignore'> </span><span class='ignore'>have</span><span class='ignore'> </span><span class='ignore'>been</span><span class='ignore'> </span><span class='ignore'>discussed</span><span class='ignore'> </span><span class='ignore'>and</span><span class='ignore'> </span><span class='ignore'>how</span><span class='ignore'> </span><span class='ignore'>they</span><span class='ignore'> </span><span class='ignore'>could</span><span class='ignore'> </span><span class='ignore'>be</span><span class='ignore'> </span><span class='ignore'>included</span><span class='ignore'> </span><span class='ignore'>in</span><span class='ignore'> </span><span class='ignore'>this</span><span class='ignore'> </span><span class='ignore'>multi-core</span><span class='ignore'> </span><span class='ignore'>RISC</span><span class='ignore'> </span><span class='ignore'>design</span><span class='ignore'>.</span><span class='ignore'> </span><span class='ignore'>To-date</span><span class='ignore'>,</span><span class='ignore'> </span><span class='ignore'>a</span><span class='ignore'> </span><span class='ignore'>16-bit</span><span class='ignore'> </span><span class='ignore'>instruction</span><span class='ignore'> </span><span class='ignore'>set</span><span class='ignore'> </span><span class='ignore'>architecture</span><span class='ignore'> </span><span class='ignore'>has</span><span class='ignore'> </span><span class='ignore'>been</span><span class='ignore'> </span><span class='ignore'>designed</span><span class='ignore'> </span><span class='ignore'>featuring</span><span class='ignore'> </span><span class='ignore'>common</span><span class='ignore'> </span><span class='ignore'>load</span><span class='ignore'>/</span><span class='ignore'>store</span><span class='ignore'> </span><span class='ignore'>instructions</span><span class='ignore'>,</span><span class='ignore'> </span><span class='ignore'>comparison</span><span class='ignore'>,</span><span class='ignore'> </span><span class='ignore'>and</span><span class='ignore'> </span><span class='ignore'>bitwise</span><span class='ignore'> </span><span class='ignore'>operations</span><span class='ignore'>.</span><span class='ignore'> </span><span class='ignore'>A</span><span class='ignore'> </span><span class='ignore'>single-core</span><span class='ignore'> </span><span class='ignore'>processor</span><span class='ignore'> </span><span class='ignore'>has</span><span class='ignore'> </span><span class='ignore'>been</span><span class='ignore'> </span><span class='ignore'>implemented</span><span class='ignore'> </span><span class='ignore'>in</span><span class='ignore'> </span><span class='ignore'>Verilog</span><span class='ignore'> </span><span class='ignore'>and</span><span class='ignore'> </span><span class='ignore'>verified</span><span class='ignore'> </span><span class='ignore'>using</span><span class='ignore'> </span><span class='ignore'>simulations</span><span class='ignore'>/</span><span class='ignore'>test</span><span class='ignore'> </span><span class='ignore'>benches</span><span class='ignore'> </span><span class='ignore'>running</span><span class='ignore'> </span><span class='ignore'>various</span><span class='ignore'> </span><span class='ignore'>simple</span><span class='ignore'> </span><span class='ignore'>software</span><span class='ignore'> </span><span class='ignore'>programs</span><span class='ignore'>.</span><br>
<br>
<span class='ignore'>Future</span><span class='ignore'> </span><span class='ignore'>tasks</span><span class='ignore'> </span><span class='ignore'>have</span><span class='ignore'> </span><span class='ignore'>been</span><span class='ignore'> </span><span class='ignore'>planned</span><span class='ignore'> </span><span class='ignore'>and</span><span class='ignore'> </span><span class='ignore'>will</span><span class='ignore'> </span><span class='ignore'>focus</span><span class='ignore'> </span><span class='ignore'>on</span><span class='ignore'> </span><span class='ignore'>the</span><span class='ignore'> </span><span class='ignore'>second</span><span class='ignore'> </span><span class='ignore'>stage</span><span class='ignore'> </span><span class='ignore'>of</span><span class='ignore'> </span><span class='ignore'>the</span><span class='ignore'> </span><span class='ignore'>project</span><span class='ignore'>.</span><span class='ignore'> </span><span class='ignore'>Work</span><span class='ignore'> </span><span class='ignore'>will</span><span class='ignore'> </span><span class='ignore'>start</span><span class='ignore'> </span><span class='ignore'>on</span><span class='ignore'> </span><span class='ignore'>designing</span><span class='ignore'> </span><span class='ignore'>a</span><span class='ignore'> </span><span class='ignore'>loosely</span><span class='ignore'> </span><span class='ignore'>coupled</span><span class='ignore'> </span><span class='ignore'>multiprocessor</span><span class='ignore'> </span><span class='ignore'>communication</span><span class='ignore'> </span><span class='ignore'>interface</span><span class='ignore'> </span><span class='ignore'>and</span><span class='ignore'> </span><span class='ignore'>bringing</span><span class='ignore'> </span><span class='ignore'>them</span><span class='ignore'> </span><span class='ignore'>to</span><span class='ignore'> </span><span class='ignore'>the</span><span class='ignore'> </span><span class='ignore'>single-core</span><span class='ignore'> </span><span class='ignore'>processor</span><span class='ignore'>.</span><br>
<span class='ignore'>\end</span><span class='ignore'>{</span><span class='ignore'>abstract</span><span class='ignore'>}</span><br>
<br>
<span class='ignore'>\chapter</span><span class='ignore'>*</span><span class='ignore'>{</span><span class='ignore'>Declaration</span><span class='ignore'> </span><span class='ignore'>of</span><span class='ignore'> </span><span class='ignore'>Academic</span><span class='ignore'> </span><span class='ignore'>Integrity</span><span class='ignore'>}</span><br>
<span class='comment'>%\addcontentsline{toc}{chapter}{Declaration of Academic Integrity}</span><br>
<span class='ignore'>The</span><span class='ignore'> </span><span class='ignore'>candidate</span><span class='ignore'> </span><span class='ignore'>confirms</span><span class='ignore'> </span><span class='ignore'>that</span><span class='ignore'> </span><span class='ignore'>the</span><span class='ignore'> </span><span class='ignore'>work</span><span class='ignore'> </span><span class='ignore'>submitted</span><span class='ignore'> </span><span class='ignore'>is</span><span class='ignore'> </span><span class='ignore'>his</span><span class='ignore'>/</span><span class='ignore'>her</span><span class='ignore'> </span><span class='ignore'>own</span><span class='ignore'>,</span><span class='ignore'> </span><span class='ignore'>except</span><span class='ignore'> </span><span class='ignore'>where</span><span class='ignore'> </span><span class='ignore'>work</span><span class='ignore'> </span><span class='ignore'>which</span><span class='ignore'> </span><span class='ignore'>has</span><span class='ignore'> </span><span class='ignore'>formed</span><span class='ignore'> </span><span class='ignore'>part</span><span class='ignore'> </span><span class='ignore'>of</span><span class='ignore'> </span><span class='ignore'>jointly-authored</span><span class='ignore'> </span><span class='ignore'>publications</span><span class='ignore'> </span><span class='ignore'>has</span><span class='ignore'> </span><span class='ignore'>been</span><span class='ignore'> </span><span class='ignore'>included</span><span class='ignore'>.</span><span class='ignore'> </span><span class='ignore'>The</span><span class='ignore'> </span><span class='ignore'>contribution</span><span class='ignore'> </span><span class='ignore'>of</span><span class='ignore'> </span><span class='ignore'>the</span><span class='ignore'> </span><span class='ignore'>candidate</span><span class='ignore'> </span><span class='ignore'>and</span><span class='ignore'> </span><span class='ignore'>the</span><span class='ignore'> </span><span class='ignore'>other</span><span class='ignore'> </span><span class='ignore'>authors</span><span class='ignore'> </span><span class='ignore'>to</span><span class='ignore'> </span><span class='ignore'>this</span><span class='ignore'> </span><span class='ignore'>work</span><span class='ignore'> </span><span class='ignore'>has</span><span class='ignore'> </span><span class='ignore'>been</span><span class='ignore'> </span><span class='ignore'>explicitly</span><span class='ignore'> </span><span class='ignore'>indicated</span><span class='ignore'> </span><span class='ignore'>in</span><span class='ignore'> </span><span class='ignore'>the</span><span class='ignore'> </span><span class='ignore'>report</span><span class='ignore'>.</span><span class='ignore'> </span><span class='ignore'>The</span><span class='ignore'> </span><span class='ignore'>candidate</span><span class='ignore'> </span><span class='ignore'>confirms</span><span class='ignore'> </span><span class='ignore'>that</span><span class='ignore'> </span><span class='ignore'>appropriate</span><span class='ignore'> </span><span class='ignore'>credit</span><span class='ignore'> </span><span class='ignore'>has</span><span class='ignore'> </span><span class='ignore'>been</span><span class='ignore'> </span><span class='ignore'>given</span><span class='ignore'> </span><span class='ignore'>within</span><span class='ignore'> </span><span class='ignore'>the</span><span class='ignore'> </span><span class='ignore'>report</span><span class='ignore'> </span><span class='ignore'>where</span><span class='ignore'> </span><span class='ignore'>reference</span><span class='ignore'> </span><span class='ignore'>has</span><span class='ignore'> </span><span class='ignore'>been</span><span class='ignore'> </span><span class='ignore'>made</span><span class='ignore'> </span><span class='ignore'>to</span><span class='ignore'> </span><span class='ignore'>the</span><span class='ignore'> </span><span class='ignore'>work</span><span class='ignore'> </span><span class='ignore'>of</span><span class='ignore'> </span><span class='ignore'>others</span><span class='ignore'>.</span><br>
<br>
<span class='ignore'>This</span><span class='ignore'> </span><span class='ignore'>copy</span><span class='ignore'> </span><span class='ignore'>has</span><span class='ignore'> </span><span class='ignore'>been</span><span class='ignore'> </span><span class='ignore'>supplied</span><span class='ignore'> </span><span class='ignore'>on</span><span class='ignore'> </span><span class='ignore'>the</span><span class='ignore'> </span><span class='ignore'>understanding</span><span class='ignore'> </span><span class='ignore'>that</span><span class='ignore'> </span><span class='ignore'>no</span><span class='ignore'> </span><span class='ignore'>quotation</span><span class='ignore'> </span><span class='ignore'>from</span><span class='ignore'> </span><span class='ignore'>the</span><span class='ignore'> </span><span class='ignore'>report</span><span class='ignore'> </span><span class='ignore'>may</span><span class='ignore'> </span><span class='ignore'>be</span><span class='ignore'> </span><span class='ignore'>published</span><span class='ignore'> </span><span class='ignore'>without</span><span class='ignore'> </span><span class='ignore'>proper</span><span class='ignore'> </span><span class='ignore'>acknowledgement</span><span class='ignore'>.</span><span class='ignore'> </span><span class='ignore'>The</span><span class='ignore'> </span><span class='ignore'>candidate</span><span class='ignore'>,</span><span class='ignore'> </span><span class='ignore'>however</span><span class='ignore'>,</span><span class='ignore'> </span><span class='ignore'>confirms</span><span class='ignore'> </span><span class='ignore'>his</span><span class='ignore'>/</span><span class='ignore'>her</span><span class='ignore'> </span><span class='ignore'>consent</span><span class='ignore'> </span><span class='ignore'>to</span><span class='ignore'> </span><span class='ignore'>the</span><span class='ignore'> </span><span class='ignore'>University</span><span class='ignore'> </span><span class='ignore'>of</span><span class='ignore'> </span><span class='ignore'>Leeds</span><span class='ignore'> </span><span class='ignore'>copying</span><span class='ignore'> </span><span class='ignore'>and</span><span class='ignore'> </span><span class='ignore'>distributing</span><span class='ignore'> </span><span class='ignore'>all</span><span class='ignore'> </span><span class='ignore'>or</span><span class='ignore'> </span><span class='ignore'>part</span><span class='ignore'> </span><span class='ignore'>of</span><span class='ignore'> </span><span class='ignore'>this</span><span class='ignore'> </span><span class='ignore'>work</span><span class='ignore'> </span><span class='ignore'>in</span><span class='ignore'> </span><span class='ignore'>any</span><span class='ignore'> </span><span class='ignore'>forms</span><span class='ignore'> </span><span class='ignore'>and</span><span class='ignore'> </span><span class='ignore'>using</span><span class='ignore'> </span><span class='ignore'>third</span><span class='ignore'> </span><span class='ignore'>parties</span><span class='ignore'>,</span><span class='ignore'> </span><span class='ignore'>who</span><span class='ignore'> </span><span class='ignore'>might</span><span class='ignore'> </span><span class='ignore'>be</span><span class='ignore'> </span><span class='ignore'>outside</span><span class='ignore'> </span><span class='ignore'>the</span><span class='ignore'> </span><span class='ignore'>University</span><span class='ignore'>,</span><span class='ignore'> </span><span class='ignore'>to</span><span class='ignore'> </span><span class='ignore'>monitor</span><span class='ignore'> </span><span class='ignore'>breaches</span><span class='ignore'> </span><span class='ignore'>of</span><span class='ignore'> </span><span class='ignore'>regulations</span><span class='ignore'>,</span><span class='ignore'> </span><span class='ignore'>to</span><span class='ignore'> </span><span class='ignore'>verify</span><span class='ignore'> </span><span class='ignore'>whether</span><span class='ignore'> </span><span class='ignore'>this</span><span class='ignore'> </span><span class='ignore'>work</span><span class='ignore'> </span><span class='ignore'>contains</span><span class='ignore'> </span><span class='ignore'>plagiarised</span><span class='ignore'> </span><span class='ignore'>material</span><span class='ignore'>,</span><span class='ignore'> </span><span class='ignore'>and</span><span class='ignore'> </span><span class='ignore'>for</span><span class='ignore'> </span><span class='ignore'>quality</span><span class='ignore'> </span><span class='ignore'>assurance</span><span class='ignore'> </span><span class='ignore'>purposes</span><span class='ignore'>.</span><br>
<br>
<span class='ignore'>The</span><span class='ignore'> </span><span class='ignore'>candidate</span><span class='ignore'> </span><span class='ignore'>confirms</span><span class='ignore'> </span><span class='ignore'>that</span><span class='ignore'> </span><span class='ignore'>the</span><span class='ignore'> </span><span class='ignore'>details</span><span class='ignore'> </span><span class='ignore'>of</span><span class='ignore'> </span><span class='ignore'>any</span><span class='ignore'> </span><span class='ignore'>mitigating</span><span class='ignore'> </span><span class='ignore'>circumstances</span><span class='ignore'> </span><span class='ignore'>have</span><span class='ignore'> </span><span class='ignore'>been</span><span class='ignore'> </span><span class='ignore'>submitted</span><span class='ignore'> </span><span class='ignore'>to</span><span class='ignore'> </span><span class='ignore'>the</span><span class='ignore'> </span><span class='ignore'>Student</span><span class='ignore'> </span><span class='ignore'>Support</span><span class='ignore'> </span><span class='ignore'>Office</span><span class='ignore'> </span><span class='ignore'>at</span><span class='ignore'> </span><span class='ignore'>the</span><span class='ignore'> </span><span class='ignore'>School</span><span class='ignore'> </span><span class='ignore'>of</span><span class='ignore'> </span><span class='ignore'>Electronic</span><span class='ignore'> </span><span class='ignore'>and</span><span class='ignore'> </span><span class='ignore'>Electrical</span><span class='ignore'> </span><span class='ignore'>Engineering</span><span class='ignore'>,</span><span class='ignore'> </span><span class='ignore'>at</span><span class='ignore'> </span><span class='ignore'>the</span><span class='ignore'> </span><span class='ignore'>University</span><span class='ignore'> </span><span class='ignore'>of</span><span class='ignore'> </span><span class='ignore'>Leeds</span><span class='ignore'>.</span><br>
<span class='ignore'>\vfill</span><br>
<br>
<span class='ignore'>\noindent</span><span class='ignore'> </span><br>
<span class='ignore'>Name</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>Ben</span><span class='ignore'> </span><span class='ignore'>David</span><span class='ignore'> </span><span class='ignore'>Lancaster</span><span class='ignore'> </span><span class='ignore'>\\</span><br>
<span class='ignore'>Date</span><span class='ignore'>:</span><span class='ignore'> </span><span class='ignore'>\today</span><br>
<span class='ignore'>\newpage</span><br>
<br>
<span class='ignore'>\chapter</span><span class='ignore'>*</span><span class='ignore'>{</span><span class='ignore'>Acknowledgements</span><span class='ignore'>}</span><br>
<span class='ignore'>I</span><span class='ignore'> </span><span class='ignore'>would</span><span class='ignore'> </span><span class='ignore'>like</span><span class='ignore'> </span><span class='ignore'>to</span><span class='ignore'> </span><span class='ignore'>thank</span><span class='ignore'> </span><span class='ignore'>my</span><span class='ignore'> </span><span class='ignore'>supervisor</span><span class='ignore'>,</span><span class='ignore'> </span><span class='ignore'>David</span><span class='ignore'> </span><span class='ignore'>Cowell</span><span class='ignore'>,</span><span class='ignore'> </span><span class='ignore'>and</span><span class='ignore'> </span><span class='ignore'>assessor</span><span class='ignore'>,</span><span class='ignore'> </span><span class='ignore'>David</span><span class='ignore'> </span><span class='ignore'>Moore</span><span class='ignore'>,</span><span class='ignore'> </span><span class='ignore'>for</span><span class='ignore'> </span><span class='ignore'>giving</span><span class='ignore'> </span><span class='ignore'>me</span><span class='ignore'> </span><span class='ignore'>the</span><span class='ignore'> </span><span class='ignore'>opportunity</span><span class='ignore'> </span><span class='ignore'>to</span><span class='ignore'> </span><span class='ignore'>explore</span><span class='ignore'> </span><span class='ignore'>a</span><span class='ignore'> </span><span class='ignore'>project</span><span class='ignore'> </span><span class='ignore'>of</span><span class='ignore'> </span><span class='ignore'>my</span><span class='ignore'> </span><span class='ignore'>choosing</span><span class='ignore'>.</span><br>
<br>
<br>
<span class='ignore'>\clearpage</span><br>
<span class='ignore'>\section</span><span class='ignore'>*</span><span class='ignore'>{</span><span class='ignore'>Revision</span><span class='ignore'> </span><span class='ignore'>History</span><span class='ignore'>}</span><br>
<span class='ignore'>\begin</span><span class='ignore'>{</span><span class='ignore'>table</span><span class='ignore'>}</span><span class='ignore'>[</span><span class='ignore'>h</span><span class='ignore'>]</span><br>
<span class='ignore'>\def</span><span class='ignore'>\arraystretch</span><span class='ignore'>{</span><span class='ignore'>1.3</span><span class='ignore'>}</span><br>
<span class='ignore'>\begin</span><span class='ignore'>{</span><span class='ignore'>tabularx</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='ignore'>\textwidth</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='ignore'>|</span><span class='ignore'>l</span><span class='ignore'>|</span><span class='ignore'>l</span><span class='ignore'>|</span><span class='ignore'>X</span><span class='ignore'>|</span><span class='ignore'>}</span><br>
<span class='ignore'>\hline</span><br>
<span class='ignore'>Date</span><span class='ignore'> </span><span class='ignore'>&amp;</span><span class='ignore'> </span><span class='ignore'>Version</span><span class='ignore'> </span><span class='ignore'>&amp;</span><span class='ignore'> </span><span class='ignore'>Changes</span><span class='ignore'> </span><span class='ignore'>\\</span><br>
<span class='comment'>%\arrayrulecolor{\color{red}}</span><br>
<span class='ignore'>\specialrule</span><span class='ignore'>{</span><span class='ignore'>2pt</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='ignore'>-</span><span class='ignore'>2pt</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='ignore'>0pt</span><span class='ignore'>}</span><br>
<span class='ignore'>10</span><span class='ignore'>/</span><span class='ignore'>04</span><span class='ignore'>/</span><span class='ignore'>2019</span><span class='ignore'> </span><span class='ignore'>&amp;</span><span class='ignore'> </span><span class='ignore'>2.02</span><span class='ignore'> </span><span class='ignore'>&amp;</span><span class='ignore'> </span><span class='ignore'>Update</span><span class='ignore'> </span><span class='ignore'>future</span><span class='ignore'> </span><span class='ignore'>stages</span><span class='ignore'>.</span><span class='ignore'> </span><span class='ignore'>\\</span><span class='ignore'> </span><span class='ignore'>\hline</span><br>
<span class='ignore'>05</span><span class='ignore'>/</span><span class='ignore'>04</span><span class='ignore'>/</span><span class='ignore'>2019</span><span class='ignore'> </span><span class='ignore'>&amp;</span><span class='ignore'> </span><span class='ignore'>2.01</span><span class='ignore'> </span><span class='ignore'>&amp;</span><span class='ignore'> </span><span class='ignore'>Fix</span><span class='ignore'> </span><span class='ignore'>processor</span><span class='ignore'> </span><span class='ignore'>RTL</span><span class='ignore'> </span><span class='ignore'>diagram</span><span class='ignore'>.</span><span class='ignore'> </span><span class='ignore'>\\</span><span class='ignore'> </span><span class='ignore'>\hline</span><br>
<span class='ignore'>04</span><span class='ignore'>/</span><span class='ignore'>04</span><span class='ignore'>/</span><span class='ignore'>2019</span><span class='ignore'> </span><span class='ignore'>&amp;</span><span class='ignore'> </span><span class='ignore'>2.00</span><span class='ignore'> </span><span class='ignore'>&amp;</span><span class='ignore'> </span><span class='ignore'>Initial</span><span class='ignore'> </span><span class='ignore'>processor</span><span class='ignore'> </span><span class='ignore'>RTL</span><span class='ignore'> </span><span class='ignore'>diagram</span><span class='ignore'>.</span><span class='ignore'> </span><span class='ignore'>\\</span><span class='ignore'> </span><span class='ignore'>\hline</span><br>
<span class='ignore'>01</span><span class='ignore'>/</span><span class='ignore'>04</span><span class='ignore'>/</span><span class='ignore'>2019</span><span class='ignore'> </span><span class='ignore'>&amp;</span><span class='ignore'> </span><span class='ignore'>1.00</span><span class='ignore'> </span><span class='ignore'>&amp;</span><span class='ignore'> </span><span class='ignore'>Initial</span><span class='ignore'> </span><span class='ignore'>section</span><span class='ignore'> </span><span class='ignore'>outline</span><span class='ignore'>.</span><span class='ignore'> </span><span class='ignore'>\\</span><span class='ignore'> </span><span class='ignore'>\hline</span><br>
<span class='ignore'>\end</span><span class='ignore'>{</span><span class='ignore'>tabularx</span><span class='ignore'>}</span><br>
<span class='ignore'>\caption</span><span class='ignore'>*</span><span class='ignore'>{</span><span class='ignore'>Document</span><span class='ignore'> </span><span class='ignore'>revisions</span><span class='ignore'>.</span><span class='ignore'>}</span><br>
<span class='ignore'>\end</span><span class='ignore'>{</span><span class='ignore'>table</span><span class='ignore'>}</span><br>
<br>
<br>
<span class='tc'>%TC:endignore</span></p></div>
<br>
<div class='count'>
<ul class='count'>
<li class='header'>Included file: ./chapter_info.tex</li>
<li>Encoding: ascii</li>
<li>Words in text: 0</li>
<li>Words in headers: 0</li>
<li>Words outside text (captions, etc.): 0</li>
<li>Number of headers: 0</li>
<li>Number of floats/tables/figures: 0</li>
<li>Number of math inlines: 0</li>
<li>Number of math displayed: 0</li>
</ul>
</div>
<h2>File: ./chapter_int_intro.tex</h2>
<div class='parse'><p>
<span class='cmd'>\chapter</span><span class='ignore'>{</span><span class='hword'>Introduction</span><span class='ignore'>}</span><br>
<span class='ignore'>{</span><span class='comment'>%\hypersetup{linkcolor=black}</span><br>
<span class='cmd'>\startcontents</span><span class='option'>[chapters]</span><br>
<span class='cmd'>\printcontents</span><span class='option'>[chapters]</span><span class='ignore'>{</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='word'>1</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='ignore'>}</span><br>
<span class='ignore'>}</span><br>
<br>
<span class='cmd'>\noindent</span><span class='cmd'>\\</span><br>
<span class='word'>This</span> <span class='word'>project</span> <span class='word'>will</span> <span class='word'>detail</span> <span class='word'>the</span> <span class='word'>design</span><span class='ignore'>,</span> <span class='word'>implementation</span><span class='ignore'>,</span> <span class='word'>and</span> <span class='word'>verification</span><span class='ignore'>,</span> <span class='word'>of</span> <span class='word'>a</span> <span class='word'>new</span> <span class='word'>multi-core</span> <span class='word'>RISC</span> <span class='word'>processor</span> <span class='word'>aimed</span> <span class='word'>at</span> <span class='word'>FPGA</span> <span class='word'>devices</span><span class='ignore'>.</span> <span class='word'>This</span> <span class='word'>project</span> <span class='word'>was</span> <span class='word'>chosen</span> <span class='word'>due</span> <span class='word'>to</span> <span class='word'>my</span> <span class='word'>interest</span> <span class='word'>in</span> <span class='word'>processor</span> <span class='word'>design</span><span class='ignore'>,</span> <span class='word'>in</span> <span class='word'>which</span> <span class='word'>I</span> <span class='word'>have</span> <span class='word'>only</span> <span class='word'>previously</span> <span class='word'>designed</span> <span class='word'>single-core</span> <span class='word'>RISC</span> <span class='word'>processors</span><span class='ignore'>,</span> <span class='word'>and</span> <span class='word'>wish</span> <span class='word'>to</span> <span class='word'>extend</span> <span class='word'>this</span> <span class='word'>knowledge</span> <span class='word'>to</span> <span class='word'>gain</span> <span class='word'>a</span> <span class='word'>basic</span> <span class='word'>understanding</span> <span class='word'>of</span> <span class='word'>multi-core</span> <span class='word'>communication</span><span class='ignore'>,</span> <span class='word'>design</span> <span class='word'>considerations</span><span class='ignore'>,</span> <span class='word'>and</span> <span class='word'>the</span> <span class='word'>challenges</span> <span class='word'>of</span> <span class='word'>software</span> <span class='word'>and</span> <span class='word'>hardware</span> <span class='word'>parallelism</span> <span class='word'>first</span> <span class='word'>hand</span><span class='ignore'>.</span><br>
<br>
<span class='word'>I</span> <span class='word'>will</span> <span class='word'>use</span> <span class='word'>this</span> <span class='word'>opportunity</span> <span class='word'>to</span> <span class='word'>further</span> <span class='word'>develop</span> <span class='word'>my</span> <span class='word'>knowledge</span> <span class='word'>of</span> <span class='word'>FPGA</span> <span class='word'>and</span> <span class='word'>processor</span> <span class='word'>design</span> <span class='word'>by</span> <span class='word'>implementing</span><span class='ignore'>,</span> <span class='word'>designing</span><span class='ignore'>,</span> <span class='word'>and</span> <span class='word'>verifying</span><span class='ignore'>,</span> <span class='word'>a</span> <span class='word'>multi-core</span> <span class='word'>RISC</span> <span class='word'>processor</span> <span class='word'>from</span> <span class='word'>scratch</span><span class='ignore'>,</span> <span class='word'>including</span> <span class='word'>the</span> <span class='word'>design</span> <span class='word'>of</span> <span class='word'>a</span> <span class='word'>communication</span> <span class='word'>interface</span> <span class='word'>between</span> <span class='word'>multiple</span> <span class='word'>cores</span><span class='ignore'>.</span><br>
<br>
<span class='cmd'>\section</span><span class='ignore'>{</span><span class='hword'>Why</span> <span class='hword'>Multi-core</span><span class='ignore'>?</span><span class='ignore'>}</span><br>
<br>
<span class='word'>Moore's</span> <span class='word'>Law</span> <span class='word'>states</span> <span class='word'>that</span> <span class='word'>the</span> <span class='word'>number</span> <span class='word'>of</span> <span class='word'>transistors</span> <span class='word'>in</span> <span class='word'>a</span> <span class='word'>chip</span> <span class='word'>will</span> <span class='word'>double</span> <span class='word'>every</span> <span class='word'>2</span> <span class='word'>years</span><span class='ignore'>.</span> <span class='word'>CPU</span> <span class='word'>designers</span> <span class='word'>would</span> <span class='word'>utilize</span> <span class='word'>the</span> <span class='word'>additional</span> <span class='word'>transistors</span> <span class='word'>to</span> <span class='word'>add</span> <span class='word'>more</span> <span class='word'>pipeline</span> <span class='word'>stages</span> <span class='word'>in</span> <span class='word'>the</span> <span class='word'>processor</span> <span class='word'>to</span> <span class='word'>reduce</span> <span class='word'>the</span> <span class='word'>propagation</span> <span class='word'>delay</span> <span class='word'>which</span> <span class='word'>would</span> <span class='word'>allow</span> <span class='word'>for</span> <span class='word'>higher</span> <span class='word'>clock</span> <span class='word'>frequencies</span><span class='ignore'>.</span> <br>
<br>
<span class='comment'>%This would allow the processor to be run at higher clock frequencies as the logic between pipeline stages is reduced. The faster clock frequency would result in computational performance because more instructions could be executed in a period of time.</span><br>
<br>
<span class='word'>The</span> <span class='word'>size</span> <span class='word'>of</span> <span class='word'>transistors</span> <span class='word'>have</span> <span class='word'>been</span> <span class='word'>decreasing</span> <span class='word'>and</span> <span class='word'>today</span> <span class='word'>can</span> <span class='word'>be</span> <span class='word'>manufactured</span> <span class='word'>in</span> <span class='word'>sub-10</span> <span class='word'>nanometer</span> <span class='word'>range</span><span class='ignore'>.</span> <span class='word'>However</span><span class='ignore'>,</span> <span class='word'>the</span> <span class='word'>extremely</span> <span class='word'>small</span> <span class='word'>transistor</span> <span class='word'>size</span> <span class='word'>increases</span> <span class='word'>electrical</span> <span class='word'>leakage</span> <span class='word'>and</span> <span class='word'>other</span> <span class='word'>negative</span> <span class='word'>effects</span> <span class='word'>resulting</span> <span class='word'>in</span> <span class='word'>unreliability</span> <span class='word'>and</span> <span class='word'>potential</span> <span class='word'>damage</span> <span class='word'>to</span> <span class='word'>the</span> <span class='word'>transistor</span><span class='ignore'>.</span>&nbsp; <span class='word'>The</span> <span class='word'>high</span> <span class='word'>transistor</span> <span class='word'>count</span> <span class='word'>produces</span> <span class='word'>large</span> <span class='word'>amounts</span> <span class='word'>of</span> <span class='word'>heat</span> <span class='word'>and</span> <span class='word'>requires</span> <span class='word'>increasing</span> <span class='word'>power</span> <span class='word'>to</span> <span class='word'>supply</span> <span class='word'>the</span> <span class='word'>chip</span><span class='ignore'>.</span> <span class='word'>These</span> <span class='word'>trade-offs</span> <span class='word'>are</span> <span class='word'>currently</span> <span class='word'>managed</span> <span class='word'>by</span> <span class='word'>reducing</span> <span class='word'>the</span> <span class='word'>input</span> <span class='word'>voltage</span><span class='ignore'>,</span> <span class='word'>utilising</span> <span class='word'>complex</span> <span class='word'>cooling</span> <span class='word'>techniques</span><span class='ignore'>,</span> <span class='word'>and</span> <span class='word'>reducing</span> <span class='word'>clock</span> <span class='word'>frequency</span><span class='ignore'>.</span> <span class='word'>These</span> <span class='word'>factors</span> <span class='word'>limit</span> <span class='word'>the</span> <span class='word'>performance</span> <span class='word'>of</span> <span class='word'>the</span> <span class='word'>chip</span> <span class='word'>significantly</span><span class='ignore'>.</span><br>
<span class='word'>These</span> <span class='word'>are</span> <span class='word'>contributing</span> <span class='word'>factors</span> <span class='word'>to</span> <span class='word'>Moore's</span> <span class='word'>Law</span> <span class='cmd'>\textit</span><span class='ignore'>{</span><span class='word'>slowing</span><span class='ignore'>}</span> <span class='word'>down</span><span class='ignore'>.</span> <br>
<span class='word'>The</span> <span class='word'>capacity</span> <span class='word'>limit</span> <span class='word'>of</span> <span class='word'>the</span> <span class='word'>current-generation</span> <span class='word'>planar</span> <span class='word'>transistors</span> <span class='word'>is</span> <span class='word'>approaching</span> <span class='word'>and</span> <span class='word'>so</span> <span class='word'>in</span> <span class='word'>order</span> <span class='word'>for</span> <span class='word'>performance</span> <span class='word'>increases</span> <span class='word'>to</span> <span class='word'>continue</span><span class='ignore'>,</span> <span class='word'>other</span> <span class='word'>approaches</span> <span class='word'>such</span> <span class='word'>as</span> <span class='word'>alternate</span> <span class='word'>transistor</span> <span class='word'>technologies</span> <span class='word'>like</span> <span class='word'>Multigate</span> <span class='word'>transistors</span> <span class='cmd'>\cite</span><span class='ignore'>{</span><span class='ignore'>subramanian2010multiple</span><span class='ignore'>}</span><span class='ignore'>,</span> <span class='word'>software</span> <span class='word'>and</span> <span class='word'>hardware</span> <span class='word'>optimisations</span><span class='ignore'>,</span> <span class='word'>and</span> <span class='word'>multi-processor</span> <span class='word'>architectures</span> <span class='word'>are</span> <span class='word'>employed</span><span class='ignore'>.</span><br>
<br>
<span class='word'>This</span> <span class='word'>report</span> <span class='word'>will</span> <span class='word'>focus</span> <span class='word'>on</span> <span class='word'>the</span> <span class='word'>latter</span><span class='ignore'>:</span> <span class='word'>to</span> <span class='word'>produce</span> <span class='word'>a</span> <span class='word'>small</span> <span class='word'>multi-core</span> <span class='word'>processor</span> <span class='word'>that</span> <span class='word'>can</span> <span class='word'>utilise</span> <span class='word'>software-based</span> <span class='word'>parallelism</span> <span class='word'>to</span> <span class='word'>gain</span> <span class='word'>performance</span> <span class='word'>benefits</span><span class='ignore'>,</span> <span class='word'>compared</span> <span class='word'>to</span> <span class='word'>a</span> <span class='word'>larger</span> <span class='word'>single-core</span> <span class='word'>design</span><span class='ignore'>.</span><br>
<br>
<span class='cmd'>\section</span><span class='ignore'>{</span><span class='hword'>Why</span> <span class='hword'>RISC</span><span class='ignore'>?</span><span class='ignore'>}</span><br>
<span class='word'>RISC</span> <span class='word'>architectures</span> <span class='word'>feature</span> <span class='word'>simpler</span> <span class='word'>and</span> <span class='word'>fewer</span> <span class='word'>instructions</span> <span class='word'>compared</span> <span class='word'>to</span> <span class='word'>CISC</span><span class='ignore'>,</span> <span class='word'>which</span> <span class='word'>emphasises</span> <span class='word'>instructions</span> <span class='word'>that</span> <span class='word'>perform</span> <span class='word'>larger</span> <span class='word'>tasks</span><span class='ignore'>.</span> <span class='word'>A</span> <span class='word'>single</span> <span class='word'>CISC</span> <span class='word'>instruction</span> <span class='word'>might</span> <span class='word'>be</span> <span class='word'>performed</span> <span class='word'>with</span> <span class='word'>multiple</span> <span class='word'>RISC</span> <span class='word'>instructions</span><span class='ignore'>.</span> <span class='word'>Because</span> <span class='word'>of</span> <span class='word'>the</span> <span class='word'>fewer</span> <span class='word'>and</span> <span class='word'>simpler</span> <span class='word'>instructions</span><span class='ignore'>,</span> <span class='word'>RISC</span> <span class='word'>machines</span> <span class='word'>rely</span> <span class='word'>heavily</span> <span class='word'>on</span> <span class='word'>software</span> <span class='word'>optimisations</span> <span class='word'>for</span> <span class='word'>performance</span><span class='ignore'>.</span> <br>
<span class='word'>RISC</span> <span class='word'>instruction</span> <span class='word'>sets</span> <span class='word'>are</span> <span class='word'>based</span> <span class='word'>on</span> <span class='word'>load</span><span class='ignore'>/</span><span class='word'>store</span> <span class='word'>architectures</span><span class='ignore'>,</span> <span class='word'>where</span> <span class='word'>most</span> <span class='word'>instructions</span> <span class='word'>are</span> <span class='word'>either</span> <span class='word'>register-to-register</span> <span class='word'>or</span> <span class='word'>memory</span> <span class='word'>reading</span> <span class='word'>and</span> <span class='word'>writing</span> <span class='cmd'>\cite</span><span class='ignore'>{</span><span class='ignore'>flynn1995computer</span><span class='ignore'>}</span><span class='ignore'>.</span> <span class='word'>This</span> <span class='word'>constraint</span> <span class='word'>greatly</span> <span class='word'>reduces</span> <span class='word'>complexity</span><span class='ignore'>.</span><br>
<br>
<span class='word'>RISC</span> <span class='word'>architectures</span> <span class='word'>are</span> <span class='word'>easier</span> <span class='word'>to</span> <span class='word'>design</span> <span class='word'>implement</span><span class='ignore'>,</span> <span class='word'>especially</span> <span class='word'>for</span> <span class='word'>beginners</span><span class='ignore'>,</span> <span class='word'>due</span> <span class='word'>to</span> <span class='word'>their</span> <span class='word'>simpler</span> <span class='word'>instructions</span> <span class='word'>that</span> <span class='word'>share</span> <span class='word'>the</span> <span class='word'>same</span> <span class='word'>pipeline</span><span class='ignore'>,</span> <span class='word'>compared</span> <span class='word'>to</span> <span class='word'>CISC</span> <span class='word'>where</span> <span class='word'>there</span> <span class='word'>may</span> <span class='word'>be</span> <span class='word'>different</span> <span class='word'>pipeline</span> <span class='word'>for</span> <span class='word'>each</span> <span class='word'>instruction</span><span class='ignore'>,</span> <span class='word'>which</span> <span class='word'>would</span> <span class='word'>greatly</span> <span class='word'>consume</span> <span class='word'>FPGA</span> <span class='word'>resources</span><span class='ignore'>.</span><br>
<br>
<span class='cmd'>\section</span><span class='ignore'>{</span><span class='hword'>Why</span> <span class='hword'>FPGA</span><span class='ignore'>?</span><span class='ignore'>}</span><br>
<span class='word'>Field</span> <span class='word'>programmable</span> <span class='word'>gate</span> <span class='word'>arrays</span> <span class='ignore'>(</span><span class='word'>FPGA</span><span class='ignore'>)</span> <span class='word'>are</span> <span class='word'>a</span> <span class='word'>great</span> <span class='word'>choice</span> <span class='word'>for</span> <span class='word'>prototyping</span> <span class='word'>digital</span> <span class='word'>logic</span> <span class='word'>designs</span> <span class='word'>due</span> <span class='word'>to</span> <span class='word'>their</span> <span class='word'>programmable</span> <span class='word'>nature</span> <span class='word'>and</span> <span class='word'>quick</span> <span class='word'>development</span> <span class='word'>times</span><span class='ignore'>.</span> <br>
<br>
<span class='word'>My</span> <span class='word'>previous</span> <span class='word'>experience</span> <span class='word'>with</span> <span class='word'>FPGAs</span> <span class='word'>in</span> <span class='word'>previous</span> <span class='word'>projects</span> <span class='word'>will</span> <span class='word'>reduce</span> <span class='word'>risk</span> <span class='word'>and</span> <span class='word'>learning</span> <span class='word'>times</span> <span class='word'>and</span> <span class='word'>allow</span> <span class='word'>for</span> <span class='word'>more</span> <span class='word'>time</span> <span class='word'>to</span> <span class='word'>be</span> <span class='word'>spent</span> <span class='word'>on</span> <span class='word'>adding</span> <span class='word'>and</span> <span class='word'>extending</span> <span class='word'>features</span> <span class='ignore'>(</span><span class='word'>discusses</span> <span class='word'>further</span> <span class='word'>in</span> <span class='word'>section</span> <span class='cmd'>\ref</span><span class='ignore'>{</span><span class='ignore'>sect</span><span class='ignore'>:</span><span class='ignore'>goals</span><span class='ignore'>}</span><span class='ignore'>)</span><span class='ignore'>.</span><br>
<br>
<span class='word'>FPGAs</span><span class='ignore'>,</span> <span class='word'>however</span><span class='ignore'>,</span> <span class='word'>may</span> <span class='word'>not</span> <span class='word'>be</span> <span class='word'>suitable</span> <span class='word'>for</span> <span class='word'>prototyping</span> <span class='word'>all</span> <span class='word'>register-transistor</span> <span class='word'>logic</span> <span class='ignore'>(</span><span class='word'>RTL</span><span class='ignore'>)</span> <span class='word'>projects</span><span class='ignore'>.</span> <span class='word'>Larger</span> <span class='word'>RTL</span> <span class='word'>projects</span><span class='ignore'>,</span> <span class='word'>such</span> <span class='word'>as</span> <span class='word'>large</span> <span class='word'>commercial</span> <span class='word'>processors</span><span class='ignore'>,</span> <span class='word'>may</span> <span class='word'>greatly</span> <span class='word'>exceed</span> <span class='word'>the</span> <span class='word'>logic</span> <span class='word'>cell</span> <span class='word'>resources</span> <span class='word'>available</span> <span class='word'>in</span> <span class='word'>today's</span> <span class='word'>high-end</span> <span class='word'>FPGA</span> <span class='word'>devices</span> <span class='word'>and</span> <span class='word'>may</span> <span class='word'>only</span> <span class='word'>be</span> <span class='word'>prototyped</span> <span class='word'>through</span> <span class='word'>silicon</span> <span class='word'>fabrication</span><span class='ignore'>,</span> <span class='word'>which</span> <span class='word'>can</span> <span class='word'>be</span> <span class='word'>expensive</span><span class='ignore'>.</span> <span class='word'>This</span> <span class='word'>resource</span> <span class='word'>limitation</span> <span class='word'>will</span> <span class='word'>not</span> <span class='word'>be</span> <span class='word'>problem</span> <span class='word'>as</span> <span class='word'>the</span> <span class='word'>project</span> <span class='word'>aims</span> <span class='word'>to</span> <span class='word'>produce</span> <span class='word'>a</span> <span class='word'>small</span> <span class='word'>and</span> <span class='word'>minimal</span> <span class='word'>design</span> <span class='word'>specifically</span> <span class='word'>for</span> <span class='word'>learning</span> <span class='word'>about</span> <span class='word'>multi-core</span> <span class='word'>architectures</span><span class='ignore'>.</span><br>
<br>
<span class='cmd'>\chapter</span><span class='ignore'>{</span><span class='hword'>Background</span><span class='ignore'>}</span><br>
<span class='ignore'>{</span><span class='comment'>%\hypersetup{linkcolor=black}</span><br>
<span class='cmd'>\startcontents</span><span class='option'>[chapters]</span><br>
<span class='cmd'>\printcontents</span><span class='option'>[chapters]</span><span class='ignore'>{</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='word'>1</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='ignore'>}</span><br>
<span class='ignore'>}</span><br>
<br>
<span class='cmd'>\section</span><span class='ignore'>{</span><span class='hword'>Amdahl's</span> <span class='hword'>Law</span> <span class='hword'>and</span> <span class='hword'>Parallelism</span><span class='ignore'>}</span><br>
<span class='word'>In</span> <span class='word'>many</span> <span class='word'>applications</span><span class='ignore'>,</span> <span class='word'>not</span> <span class='word'>restricted</span> <span class='word'>to</span> <span class='word'>software</span><span class='ignore'>,</span> <span class='word'>there</span> <span class='word'>may</span> <span class='word'>exists</span> <span class='word'>many</span> <span class='word'>opportunities</span> <span class='word'>for</span> <span class='word'>processes</span> <span class='word'>or</span> <span class='word'>algorithms</span> <span class='word'>to</span> <span class='word'>be</span> <span class='word'>performed</span> <span class='word'>in</span> <span class='word'>parallel</span><span class='ignore'>.</span> <span class='word'>These</span> <span class='word'>algorithms</span> <span class='word'>can</span> <span class='word'>be</span> <span class='word'>split</span> <span class='word'>into</span> <span class='word'>two</span> <span class='word'>parts</span><span class='ignore'>:</span> <span class='word'>a</span> <span class='word'>serial</span> <span class='word'>part</span> <span class='word'>that</span> <span class='word'>cannot</span> <span class='word'>be</span> <span class='word'>parallised</span><span class='ignore'>,</span> <span class='word'>and</span> <span class='word'>a</span> <span class='word'>part</span> <span class='word'>that</span> <span class='word'>can</span> <span class='word'>be</span> <span class='word'>parallelised</span><span class='ignore'>.</span> <span class='word'>Amdahl's</span> <span class='word'>Law</span> <span class='word'>defines</span> <span class='word'>a</span> <span class='word'>formula</span> <span class='word'>for</span> <span class='word'>calculating</span> <span class='word'>the</span> <span class='word'>maximum</span> <span class='cmd'>\textit</span><span class='ignore'>{</span><span class='word'>speedup</span><span class='ignore'>}</span> <span class='word'>of</span> <span class='word'>a</span> <span class='word'>process</span> <span class='word'>with</span> <span class='word'>potential</span> <span class='word'>parallelism</span> <span class='word'>opportunities</span> <span class='word'>when</span> <span class='word'>ran</span> <span class='word'>in</span> <span class='word'>parallel</span> <span class='word'>with</span> <span class='mathgroup'>$</span><span class='math'>n</span><span class='mathgroup'>$</span> <span class='word'>many</span> <span class='word'>processors</span><span class='ignore'>.</span> <span class='word'>Speedup</span> <span class='word'>is</span> <span class='word'>a</span> <span class='word'>term</span> <span class='word'>used</span> <span class='word'>to</span> <span class='word'>describe</span> <span class='word'>the</span> <span class='word'>potential</span> <span class='word'>performance</span> <span class='word'>improvements</span> <span class='word'>of</span> <span class='word'>an</span> <span class='word'>algorithm</span> <span class='word'>using</span> <span class='word'>an</span> <span class='word'>enhanced</span> <span class='word'>resource</span> <span class='ignore'>(</span><span class='word'>in</span> <span class='word'>this</span> <span class='word'>case</span><span class='ignore'>,</span> <span class='word'>adding</span> <span class='word'>parallel</span> <span class='word'>processors</span><span class='ignore'>)</span> <span class='word'>compared</span> <span class='word'>to</span> <span class='word'>the</span> <span class='word'>original</span> <span class='word'>algorithm</span><span class='ignore'>.</span> <span class='word'>Amdalh's</span> <span class='word'>Law</span> <span class='word'>is</span> <span class='word'>defined</span> <span class='word'>below</span><span class='ignore'>,</span> <span class='word'>where</span> <span class='word'>the</span> <span class='word'>potential</span> <span class='word'>speedup</span> <span class='mathgroup'>$</span><span class='math'>S</span><span class='math'>_</span><span class='math'>p</span><span class='mathgroup'>$</span> <span class='word'>is</span> <span class='word'>dependant</span> <span class='word'>on</span> <span class='word'>the</span> <span class='word'>portion</span> <span class='word'>of</span> <span class='word'>program</span> <span class='word'>that</span> <span class='word'>can</span> <span class='word'>be</span> <span class='word'>parallelised</span> <span class='mathgroup'>$</span><span class='math'>p</span><span class='mathgroup'>$</span> <span class='word'>and</span> <span class='word'>the</span> <span class='word'>number</span> <span class='word'>of</span> <span class='word'>processing</span> <span class='word'>cores</span> <span class='mathgroup'>$</span><span class='math'>n</span><span class='mathgroup'>$</span><span class='ignore'>:</span><br>
<br>
<span class='envir'>\begin</span><span class='envir'>{equation}</span><br>
<span class='math'>S</span><span class='math'>_</span><span class='ignore'>{</span><span class='math'>p</span><span class='ignore'>}</span> <span class='math'>=</span> <span class='mathcmd'>\frac</span><span class='ignore'>{</span><span class='math'>1</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='math'>(</span><span class='math'>1-p</span><span class='math'>)</span><span class='math'>+</span><span class='mathcmd'>\frac</span><span class='ignore'>{</span><span class='math'>p</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='math'>n</span><span class='ignore'>}</span><span class='ignore'>}</span><br>
<span class='mathcmd'>\label</span><span class='ignore'>{</span><span class='math'>eq</span><span class='math'>:</span><span class='math'>amdahl</span><span class='ignore'>}</span><br>
<span class='envir'>\end</span><span class='envir'>{equation}</span><br>
<br>
<span class='word'>This</span> <span class='word'>formula</span> <span class='word'>will</span> <span class='word'>be</span> <span class='word'>used</span> <span class='word'>throughout</span> <span class='word'>the</span> <span class='word'>project</span> <span class='word'>to</span> <span class='word'>gauge</span> <span class='word'>the</span> <span class='word'>the</span> <span class='word'>performance</span> <span class='word'>of</span> <span class='word'>the</span> <span class='word'>multi-core</span> <span class='word'>design</span> <span class='word'>running</span> <span class='word'>various</span> <span class='word'>software</span> <span class='word'>algorithms</span><span class='ignore'>.</span><br>
<br>
<span class='cmd'>\section</span><span class='ignore'>{</span><span class='hword'>Loosely</span> <span class='hword'>and</span> <span class='hword'>Tightly</span> <span class='hword'>Coupled</span> <span class='hword'>Processors</span><span class='ignore'>}</span><br>
<span class='word'>Multiprocessor</span> <span class='word'>systems</span> <span class='word'>can</span> <span class='word'>be</span> <span class='word'>generalised</span> <span class='word'>into</span> <span class='word'>two</span> <span class='word'>architectures</span><span class='ignore'>:</span> <span class='word'>loosely</span> <span class='word'>and</span> <span class='word'>tightly</span> <span class='word'>coupled</span><span class='ignore'>,</span> <span class='word'>and</span> <span class='word'>each</span> <span class='word'>architecture</span> <span class='word'>has</span> <span class='word'>advantages</span> <span class='word'>and</span> <span class='word'>disadvantages</span><span class='ignore'>.</span> <br>
<span class='word'>In</span> <span class='word'>loosely</span> <span class='word'>coupled</span> <span class='word'>systems</span><span class='ignore'>,</span> <span class='word'>each</span> <span class='word'>processing</span> <span class='word'>node</span> <span class='word'>is</span> <span class='word'>self-contained</span> <span class='ignore'>-</span><span class='ignore'>-</span> <span class='word'>each</span> <span class='word'>node</span> <span class='word'>has</span> <span class='word'>it's</span> <span class='word'>own</span> <span class='word'>dedicated</span> <span class='word'>memory</span> <span class='word'>and</span> <span class='word'>IO</span> <span class='word'>modules</span><span class='ignore'>.</span> <span class='word'>Communication</span> <span class='word'>between</span> <span class='word'>nodes</span> <span class='word'>is</span> <span class='word'>performed</span> <span class='word'>over</span> <span class='word'>a</span> <span class='cmd'>\textit</span><span class='ignore'>{</span><span class='word'>Message</span> <span class='word'>Transfer</span> <span class='word'>System</span> <span class='ignore'>(</span><span class='word'>MTS</span><span class='ignore'>)</span><span class='ignore'>}</span> <span class='cmd'>\cite</span><span class='ignore'>{</span><span class='ignore'>preeti</span><span class='ignore'>_</span><span class='ignore'>aritra</span><span class='ignore'>_</span><span class='ignore'>2017</span><span class='ignore'>}</span>  <span class='word'>in</span> <span class='word'>a</span> <span class='word'>master-slave</span> <span class='word'>control</span> <span class='word'>architecture</span><span class='ignore'>.</span><br>
<br>
<span class='word'>Scalability</span> <span class='word'>in</span> <span class='word'>loosely</span> <span class='word'>coupled</span> <span class='word'>systems</span> <span class='word'>is</span> <span class='word'>generally</span> <span class='word'>easier</span> <span class='word'>to</span> <span class='word'>implement</span> <span class='word'>as</span> <span class='word'>each</span> <span class='word'>node</span> <span class='word'>can</span> <span class='word'>simply</span> <span class='word'>be</span> <span class='word'>appended</span> <span class='word'>to</span> <span class='word'>the</span> <span class='word'>shared</span> <span class='word'>MTS</span> <span class='word'>interface</span> <span class='word'>without</span> <span class='word'>large</span> <span class='word'>modifications</span> <span class='word'>to</span> <span class='word'>the</span> <span class='word'>rest</span> <span class='word'>of</span> <span class='word'>the</span> <span class='word'>system</span><span class='ignore'>.</span> <span class='word'>Scalability</span> <span class='word'>is</span> <span class='word'>an</span> <span class='word'>important</span> <span class='word'>concern</span> <span class='word'>in</span> <span class='word'>this</span> <span class='word'>project</span> <span class='word'>as</span> <span class='word'>I</span> <span class='word'>wish</span> <span class='word'>to</span> <span class='word'>test</span> <span class='word'>the</span> <span class='word'>developed</span> <span class='word'>solution</span> <span class='word'>with</span> <span class='word'>a</span> <span class='word'>range</span> <span class='word'>of</span> <span class='word'>processing</span> <span class='word'>nodes</span><span class='ignore'>.</span><br>
<br>
<span class='word'>As</span> <span class='word'>loosely</span> <span class='word'>coupled</span> <span class='word'>system's</span> <span class='word'>nodes</span> <span class='word'>feature</span> <span class='word'>there</span> <span class='word'>own</span> <span class='word'>memory</span> <span class='word'>and</span> <span class='word'>IO</span> <span class='word'>modules</span><span class='ignore'>,</span> <span class='word'>they</span> <span class='word'>generally</span> <span class='word'>perform</span> <span class='word'>better</span> <span class='word'>in</span> <span class='word'>cases</span> <span class='word'>where</span> <span class='word'>interaction</span> <span class='word'>between</span> <span class='word'>nodes</span> <span class='word'>is</span> <span class='word'>not</span> <span class='word'>prominent</span> <span class='ignore'>-</span><span class='ignore'>-</span> <span class='word'>each</span> <span class='word'>node</span> <span class='word'>can</span> <span class='word'>store</span> <span class='word'>a</span> <span class='word'>separate</span> <span class='word'>part</span> <span class='word'>of</span> <span class='word'>the</span> <span class='word'>software</span> <span class='word'>program</span> <span class='word'>in</span> <span class='word'>it's</span> <span class='word'>memory</span> <span class='word'>module</span> <span class='word'>allowing</span> <span class='word'>simultaneous</span> <span class='word'>executing</span> <span class='word'>of</span> <span class='word'>the</span> <span class='word'>program</span><span class='ignore'>.</span><br>
<br>
<span class='word'>In</span> <span class='word'>scenarios</span> <span class='word'>where</span> <span class='word'>inter-node</span> <span class='word'>communication</span> <span class='word'>is</span> <span class='word'>prominent</span> <span class='word'>however</span><span class='ignore'>,</span> <span class='word'>access</span> <span class='word'>to</span> <span class='word'>the</span> <span class='word'>MTS</span> <span class='word'>interface</span> <span class='word'>must</span> <span class='word'>be</span> <span class='word'>scheduled</span> <span class='word'>to</span> <span class='word'>avoid</span> <span class='word'>access</span> <span class='word'>conflicts</span> <span class='word'>which</span> <span class='word'>introduces</span> <span class='word'>delays</span> <span class='word'>and</span> <span class='word'>idle</span> <span class='word'>times</span> <span class='word'>in</span> <span class='word'>the</span> <span class='word'>software</span> <span class='word'>programs</span> <span class='word'>execution</span><span class='ignore'>,</span> <span class='word'>resulting</span> <span class='word'>in</span> <span class='word'>lower</span> <span class='word'>throughput</span><span class='ignore'>.</span> <span class='cmd'>\cref</span><span class='ignore'>{</span><span class='word'>fig</span><span class='ignore'>:</span><span class='word'>loose</span><span class='ignore'>}</span> <span class='word'>shows</span> <span class='word'>a</span> <span class='word'>general</span> <span class='word'>layout</span> <span class='word'>of</span> <span class='word'>a</span> <span class='word'>loosely</span> <span class='word'>coupled</span> <span class='word'>multiprocessor</span> <span class='word'>system</span><span class='ignore'>.</span><br>
<br>
<span class='word'>Tightly</span> <span class='word'>coupled</span> <span class='word'>systems</span> <span class='word'>feature</span> <span class='word'>processing</span> <span class='word'>nodes</span> <span class='word'>that</span> <span class='word'>do</span> <span class='word'>not</span> <span class='word'>have</span> <span class='word'>their</span> <span class='word'>own</span> <span class='word'>dedicated</span> <span class='word'>memory</span> <span class='word'>or</span> <span class='word'>IO</span> <span class='word'>modules</span> <span class='ignore'>-</span><span class='ignore'>-</span> <span class='word'>each</span> <span class='word'>node</span> <span class='word'>is</span> <span class='word'>directly</span> <span class='word'>connected</span> <span class='word'>to</span> <span class='word'>a</span> <span class='word'>shared</span> <span class='word'>memory</span> <span class='word'>module</span> <span class='word'>using</span> <span class='word'>a</span> <span class='word'>dedicated</span>&nbsp; <span class='word'>port</span><span class='ignore'>.</span> <span class='word'>In</span> <span class='word'>scenarios</span> <span class='word'>where</span> <span class='word'>inter-node</span> <span class='word'>communication</span> <span class='word'>is</span> <span class='word'>prominent</span><span class='ignore'>,</span> <span class='word'>tightly</span> <span class='word'>coupled</span> <span class='word'>systems</span> <span class='word'>are</span> <span class='word'>generally</span> <span class='word'>better</span> <span class='word'>suited</span> <span class='word'>as</span> <span class='word'>nodes</span> <span class='word'>are</span> <span class='word'>directly</span> <span class='word'>connected</span> <span class='word'>to</span> <span class='word'>a</span> <span class='word'>shared</span> <span class='word'>memory</span> <span class='word'>and</span> <span class='word'>do</span> <span class='word'>not</span> <span class='word'>need</span> <span class='word'>to</span> <span class='word'>wait</span> <span class='word'>to</span> <span class='word'>use</span> <span class='word'>a</span> <span class='word'>shared</span> <span class='word'>bus</span><span class='ignore'>.</span><br>
<br>
<span class='envir'>\begin</span><span class='envir'>{minipage}</span><span class='ignore'>{</span><span class='ignore'>0.45</span><span class='exclcmd'>\textwidth</span><span class='ignore'>}</span><br>
<span class='envir'>\begin</span><span class='envir'>{figure}</span><span class='option'>[H]</span><br>
<span class='exclcmd'>\centering</span><br>
<span class='exclcmd'>\includegraphics</span><span class='option'>[width=8cm]</span><span class='ignore'>{</span><span class='ignore'>.</span><span class='ignore'>.</span><span class='ignore'>/</span><span class='ignore'>img</span><span class='ignore'>/</span><span class='ignore'>loose</span><span class='ignore'>}</span><br>
<span class='cmd'>\caption</span><span class='ignore'>{</span><span class='oword'>A</span> <span class='oword'>loosely</span> <span class='oword'>coupled</span> <span class='oword'>multiprocessor</span> <span class='oword'>system</span><span class='ignore'>.</span> <span class='oword'>Each</span> <span class='oword'>node</span> <span class='oword'>features</span> <span class='oword'>it's</span> <span class='oword'>own</span> <span class='oword'>memory</span> <span class='oword'>and</span> <span class='oword'>IO</span> <span class='oword'>modules</span> <span class='oword'>and</span> <span class='oword'>uses</span> <span class='oword'>a</span> <span class='oword'>Message</span> <span class='oword'>Transfer</span> <span class='oword'>System</span> <span class='oword'>to</span> <span class='oword'>perform</span> <span class='oword'>inter-node</span> <span class='oword'>communication</span><span class='ignore'>.</span> <span class='oword'>Image</span> <span class='oword'>source</span><span class='ignore'>:</span> <span class='cmd'>\cite</span><span class='ignore'>{</span><span class='ignore'>preeti</span><span class='ignore'>_</span><span class='ignore'>aritra</span><span class='ignore'>_</span><span class='ignore'>2017</span><span class='ignore'>}</span><span class='ignore'>.</span><span class='ignore'>}</span><br>
<span class='exclcmd'>\label</span><span class='ignore'>{</span><span class='ignore'>fig</span><span class='ignore'>:</span><span class='ignore'>loose</span><span class='ignore'>}</span><br>
<span class='envir'>\end</span><span class='envir'>{figure}</span><br>
<span class='envir'>\end</span><span class='envir'>{minipage}</span><br>
<span class='envir'>\begin</span><span class='envir'>{minipage}</span><span class='ignore'>{</span><span class='ignore'>0.05</span><span class='exclcmd'>\textwidth</span><span class='ignore'>}</span><span class='cmd'>\hfill</span><span class='envir'>\end</span><span class='envir'>{minipage}</span><br>
<span class='envir'>\begin</span><span class='envir'>{minipage}</span><span class='ignore'>{</span><span class='ignore'>0.45</span><span class='exclcmd'>\textwidth</span><span class='ignore'>}</span><br>
<span class='envir'>\begin</span><span class='envir'>{figure}</span><span class='option'>[H]</span><br>
<span class='exclcmd'>\centering</span><br>
<span class='exclcmd'>\includegraphics</span><span class='option'>[width=8cm]</span><span class='ignore'>{</span><span class='ignore'>.</span><span class='ignore'>.</span><span class='ignore'>/</span><span class='ignore'>img</span><span class='ignore'>/</span><span class='ignore'>tight</span><span class='ignore'>}</span><br>
<span class='cmd'>\caption</span><span class='ignore'>{</span><span class='oword'>A</span> <span class='oword'>tightly</span> <span class='oword'>coupled</span> <span class='oword'>multiprocessor</span> <span class='oword'>system</span><span class='ignore'>.</span> <span class='oword'>Nodes</span> <span class='oword'>are</span> <span class='oword'>directly</span> <span class='oword'>connected</span> <span class='oword'>to</span> <span class='oword'>memory</span> <span class='oword'>and</span> <span class='oword'>IO</span> <span class='oword'>modules</span><span class='ignore'>.</span> <span class='oword'>Image</span> <span class='oword'>source</span><span class='ignore'>:</span> <span class='cmd'>\cite</span><span class='ignore'>{</span><span class='ignore'>preeti</span><span class='ignore'>_</span><span class='ignore'>aritra</span><span class='ignore'>_</span><span class='ignore'>2017</span><span class='ignore'>}</span><span class='ignore'>.</span><span class='ignore'>}</span><br>
<span class='exclcmd'>\label</span><span class='ignore'>{</span><span class='ignore'>fig</span><span class='ignore'>:</span><span class='ignore'>tight</span><span class='ignore'>}</span><br>
<span class='envir'>\end</span><span class='envir'>{figure}</span><br>
<span class='envir'>\end</span><span class='envir'>{minipage}</span><br>
<span class='cmd'>\vspace</span><span class='ignore'>{</span><span class='ignore'>0.3cm</span><span class='ignore'>}</span><br>
<br>
<span class='word'>This</span> <span class='word'>project</span> <span class='word'>will</span> <span class='word'>utilise</span> <span class='word'>a</span> <span class='word'>loosely</span> <span class='word'>coupled</span> <span class='word'>architecture</span> <span class='word'>due</span> <span class='word'>to</span> <span class='word'>it's</span> <span class='word'>easier</span> <span class='word'>scalability</span> <span class='word'>implementation</span> <span class='word'>and</span> <span class='word'>my</span> <span class='word'>previous</span> <span class='word'>experience</span> <span class='word'>with</span> <span class='word'>the</span> <span class='word'>design</span> <span class='word'>of</span> <span class='word'>single-core</span> <span class='word'>processors</span><span class='ignore'>.</span> <span class='word'>Although</span> <span class='word'>it</span> <span class='word'>will</span> <span class='word'>require</span> <span class='word'>a</span> <span class='word'>scheduler</span> <span class='word'>to</span> <span class='word'>access</span> <span class='word'>the</span> <span class='word'>MTS</span><span class='ignore'>,</span> <span class='word'>the</span> <span class='word'>experience</span> <span class='word'>and</span> <span class='word'>knowledge</span> <span class='word'>gained</span> <span class='word'>from</span> <span class='word'>this</span> <span class='word'>task</span> <span class='word'>will</span> <span class='word'>be</span> <span class='word'>greatly</span> <span class='word'>beneficial</span> <span class='word'>for</span> <span class='word'>future</span> <span class='word'>projects</span><span class='ignore'>.</span><br>
<br>
<span class='cmd'>\section</span><span class='ignore'>{</span><span class='hword'>Network-on-chip</span> <span class='hword'>Architectures</span><span class='ignore'>}</span><br>
<span class='word'>Network-on-chip</span> <span class='ignore'>(</span><span class='word'>NoC</span><span class='ignore'>)</span> <span class='word'>architectures</span> <span class='word'>implement</span> <span class='word'>on-chip</span> <span class='word'>communication</span> <span class='word'>mechanisms</span> <span class='word'>that</span> <span class='word'>are</span> <span class='word'>based</span> <span class='word'>on</span> <span class='word'>network</span> <span class='word'>communication</span>&nbsp; <span class='word'>principles</span><span class='ignore'>,</span> <span class='word'>such</span> <span class='word'>as</span> <span class='word'>routing</span><span class='ignore'>,</span> <span class='word'>switching</span><span class='ignore'>,</span> <span class='word'>and</span> <span class='word'>massive</span> <span class='word'>scalability</span> <span class='cmd'>\cite</span><span class='ignore'>{</span><span class='ignore'>newnoc</span><span class='ignore'>}</span><span class='ignore'>.</span> <span class='word'>NoC's</span> <span class='word'>can</span> <span class='word'>generally</span> <span class='word'>support</span> <span class='word'>hundreds</span> <span class='word'>to</span> <span class='word'>millions</span> <span class='word'>of</span> <span class='word'>processing</span> <span class='word'>cores</span><span class='ignore'>.</span><br>
<span class='cmd'>\cref</span><span class='ignore'>{</span><span class='word'>fig</span><span class='ignore'>:</span><span class='word'>noc</span><span class='ignore'>}</span> <span class='word'>shows</span> <span class='word'>an</span> <span class='word'>example</span> <span class='word'>16-core</span> <span class='word'>network-on-chip</span> <span class='word'>architecture</span><span class='ignore'>.</span> <br>
<span class='word'>NoC's</span> <span class='word'>can</span> <span class='word'>scale</span> <span class='word'>to</span> <span class='word'>very</span> <span class='word'>large</span> <span class='word'>sizes</span> <span class='word'>while</span> <span class='word'>not</span> <span class='word'>sacrificing</span> <span class='word'>performance</span> <span class='word'>because</span> <span class='word'>each</span> <span class='word'>processor</span> <span class='word'>core</span> <span class='word'>is</span> <span class='word'>able</span> <span class='word'>to</span> <span class='word'>drive</span> <span class='word'>the</span> <span class='word'>network</span> <span class='word'>rather</span> <span class='word'>than</span> <span class='word'>needing</span> <span class='word'>to</span> <span class='word'>wait</span> <span class='word'>for</span> <span class='word'>a</span> <span class='word'>shared</span> <span class='word'>bus</span> <span class='word'>to</span> <span class='word'>become</span> <span class='word'>free</span> <span class='word'>before</span> <span class='word'>doing</span> <span class='word'>so</span><span class='ignore'>.</span><br>
<br>
<span class='word'>The</span> <span class='word'>greater</span> <span class='word'>the</span> <span class='word'>number</span> <span class='word'>of</span> <span class='word'>cores</span> <span class='word'>in</span> <span class='word'>a</span> <span class='word'>network-on-chip</span> <span class='word'>design</span><span class='ignore'>,</span> <span class='word'>the</span> <span class='word'>greater</span> <span class='word'>quality</span> <span class='word'>of</span> <span class='word'>service</span> <span class='ignore'>(</span><span class='word'>QoS</span><span class='ignore'>)</span> <span class='word'>problems</span> <span class='word'>arise</span><span class='ignore'>.</span> <span class='word'>As</span> <span class='word'>such</span><span class='ignore'>,</span> <span class='word'>network-on-chip</span> <span class='word'>architectures</span> <span class='word'>suffer</span> <span class='word'>the</span> <span class='word'>same</span> <span class='word'>problems</span> <span class='word'>as</span> <span class='word'>networks</span><span class='ignore'>,</span> <span class='word'>such</span> <span class='word'>as</span> <span class='word'>fairness</span> <span class='word'>and</span> <span class='word'>throughput</span> <span class='cmd'>\cite</span><span class='ignore'>{</span><span class='ignore'>nocfairness</span><span class='ignore'>}</span><span class='ignore'>.</span><br>
<br>
<br>
<span class='envir'>\begin</span><span class='envir'>{figure}</span><span class='option'>[h]</span><br>
<span class='exclcmd'>\centering</span><br>
<span class='exclcmd'>\includegraphics</span><span class='option'>[width=6cm]</span><span class='ignore'>{</span><span class='ignore'>.</span><span class='ignore'>.</span><span class='ignore'>/</span><span class='ignore'>img</span><span class='ignore'>/</span><span class='ignore'>noc</span><span class='ignore'>}</span><br>
<span class='cmd'>\caption</span><span class='ignore'>{</span><span class='oword'>A</span> <span class='oword'>multiprocessor</span> <span class='oword'>network-on-chip</span> <span class='oword'>architecture</span> <span class='oword'>with</span> <span class='oword'>16</span> <span class='oword'>processing</span> <span class='oword'>nodes</span><span class='ignore'>.</span> <span class='oword'>Nodes</span> <span class='oword'>are</span> <span class='oword'>connected</span> <span class='oword'>in</span> <span class='oword'>a</span> <span class='oword'>grid</span> <span class='oword'>formation</span> <span class='oword'>with</span> <span class='oword'>routers</span> <span class='oword'>and</span> <span class='oword'>links</span><span class='ignore'>.</span> <span class='oword'>Image</span> <span class='oword'>source</span><span class='ignore'>:</span> <span class='cmd'>\cite</span><span class='ignore'>{</span><span class='ignore'>noc</span><span class='ignore'>}</span><span class='ignore'>.</span><span class='ignore'>}</span><br>
<span class='exclcmd'>\label</span><span class='ignore'>{</span><span class='ignore'>fig</span><span class='ignore'>:</span><span class='ignore'>noc</span><span class='ignore'>}</span><br>
<span class='envir'>\end</span><span class='envir'>{figure}</span><br>
</p></div>
<div class='count'>
<ul class='count'>
<li class='header'>Included file: ./chapter_int_intro.tex</li>
<li>Encoding: ascii</li>
<li>Words in text: 1100</li>
<li>Words in headers: 19</li>
<li>Words outside text (captions, etc.): 63</li>
<li>Number of headers: 8</li>
<li>Number of floats/tables/figures: 3</li>
<li>Number of math inlines: 4</li>
<li>Number of math displayed: 1</li>
<li>Subcounts:</li>
<span class='subcount'>
<li class='fielddesc'>&nbsp; text+headers+captions (#headers/#floats/#inlines/#displayed)</li>
  <li>103+1+0 (1/0/0/0) Chapter: Introduction</li>
  <li>200+2+0 (1/0/0/0) Section: Why Multi-core?</li>
  <li>107+2+0 (1/0/0/0) Section: Why RISC?</li>
  <li>124+2+0 (1/0/0/0) Section: Why FPGA?</li>
  <li>1+1+0 (1/0/0/0) Chapter: Background</li>
  <li>143+4+0 (1/0/4/1) Section: Amdahl's Law and Parallelism</li>
  <li>314+5+42 (1/2/0/0) Section: Loosely and Tightly Coupled Processors</li>
  <li>108+2+21 (1/1/0/0) Section: Network-on-chip Architectures</li>
</span>
</ul>
</div>
<h2>File: ./chapter_proj.tex</h2>
<div class='parse'><p>
<br>
<span class='cmd'>\chapter</span><span class='ignore'>{</span><span class='hword'>Project</span> <span class='hword'>Overview</span><span class='ignore'>}</span><br>
<span class='cmd'>\label</span><span class='ignore'>{</span><span class='ignore'>sect</span><span class='ignore'>:</span><span class='ignore'>goals</span><span class='ignore'>}</span><br>
<span class='ignore'>{</span><span class='comment'>%\hypersetup{linkcolor=black}</span><br>
<span class='cmd'>\startcontents</span><span class='option'>[chapters]</span><br>
<span class='cmd'>\printcontents</span><span class='option'>[chapters]</span><span class='ignore'>{</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='word'>1</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='ignore'>}</span><br>
<span class='ignore'>}</span><br>
<span class='cmd'>\noindent</span><span class='cmd'>\\</span><br>
<span class='word'>This</span> <span class='word'>chapter</span> <span class='word'>discusses</span> <span class='word'>the</span> <span class='word'>the</span> <span class='word'>project's</span> <span class='word'>requirements</span><span class='ignore'>,</span> <span class='word'>goals</span><span class='ignore'>,</span> <span class='word'>and</span> <span class='word'>structure</span><span class='ignore'>.</span><br>
<br>
<span class='cmd'>\section</span><span class='ignore'>{</span><span class='hword'>Project</span> <span class='hword'>Deliverables</span><span class='ignore'>}</span><br>
<span class='word'>The</span> <span class='word'>project's</span> <span class='word'>deliverables</span> <span class='word'>are</span> <span class='word'>split</span> <span class='word'>into</span> <span class='word'>two</span> <span class='word'>sections</span><span class='ignore'>:</span> <span class='word'>core</span> <span class='word'>deliverables</span> <span class='ignore'>(</span><span class='word'>CD</span><span class='ignore'>)</span> <span class='ignore'>-</span><span class='ignore'>-</span> <span class='word'>each</span> <span class='word'>deliverable</span> <span class='word'>must</span> <span class='word'>be</span> <span class='word'>satisfied</span> <span class='word'>for</span> <span class='word'>the</span> <span class='word'>project</span> <span class='word'>to</span> <span class='word'>be</span> <span class='word'>a</span> <span class='word'>minimum</span> <span class='word'>viable</span> <span class='word'>product</span> <span class='ignore'>(</span><span class='word'>MVP</span><span class='ignore'>)</span><span class='ignore'>,</span> <span class='word'>and</span> <span class='word'>extended</span> <span class='word'>deliverables</span> <span class='ignore'>(</span><span class='word'>ED</span><span class='ignore'>)</span> <span class='ignore'>-</span><span class='ignore'>-</span> <span class='word'>deliverables</span> <span class='word'>that</span> <span class='word'>are</span> <span class='word'>not</span> <span class='word'>required</span> <span class='word'>for</span> <span class='word'>a</span> <span class='word'>MVP</span> <span class='ignore'>-</span><span class='ignore'>-</span> <span class='word'>features</span> <span class='word'>that</span> <span class='word'>only</span> <span class='word'>improve</span> <span class='word'>upon</span> <span class='word'>an</span> <span class='word'>existing</span> <span class='word'>feature</span><span class='ignore'>.</span><br>
<br>
<span class='cmd'>\subsection</span><span class='ignore'>{</span><span class='hword'>Core</span> <span class='hword'>Deliverables</span> <span class='ignore'>(</span><span class='hword'>CD</span><span class='ignore'>)</span><span class='ignore'>}</span><br>
<span class='word'>The</span> <span class='word'>project's</span> <span class='word'>core</span> <span class='word'>deliverables</span> <span class='word'>are</span> <span class='word'>described</span> <span class='word'>below</span><span class='ignore'>.</span><br>
<span class='envir'>\begin</span><span class='envir'>{enumerate}</span><span class='option'>[leftmargin=2\parindent, label=\bfseries CD\arabic*]</span><br>
<span class='cmd'>\item</span><span class='ignore'>{</span><span class='cmd'>\textbf</span><span class='ignore'>{</span><span class='word'>Design</span> <span class='word'>a</span> <span class='word'>compact</span> <span class='word'>16-bit</span> <span class='word'>RISC</span> <span class='word'>instruction</span> <span class='word'>set</span> <span class='word'>architecture</span><span class='ignore'>.</span><span class='ignore'>}</span><span class='cmd'>\\</span><br>
<span class='word'>The</span> <span class='word'>instruction</span> <span class='word'>set</span> <span class='word'>will</span> <span class='word'>be</span> <span class='word'>the</span> <span class='word'>primary</span> <span class='word'>interface</span> <span class='word'>to</span> <span class='word'>control</span> <span class='word'>the</span> <span class='word'>processor</span> <span class='word'>from</span> <span class='word'>software</span><span class='ignore'>.</span> <span class='word'>An</span> <span class='word'>instruction</span> <span class='word'>set</span> <span class='word'>will</span> <span class='word'>be</span> <span class='word'>required</span> <span class='word'>to</span> <span class='word'>implement</span> <span class='word'>the</span> <span class='word'>custom</span> <span class='word'>multi-core</span> <span class='word'>communication</span> <span class='word'>interface</span><span class='ignore'>.</span><br>
<br>
<span class='word'>It</span> <span class='word'>was</span> <span class='word'>decided</span> <span class='word'>to</span> <span class='word'>design</span> <span class='word'>a</span> <span class='word'>new</span> <span class='word'>instruction</span> <span class='word'>set</span> <span class='word'>rather</span> <span class='word'>than</span> <span class='word'>to</span> <span class='word'>extend</span> <span class='word'>an</span> <span class='word'>existing</span> <span class='word'>architecture</span> <span class='word'>as</span> <span class='word'>this</span> <span class='word'>will</span> <span class='word'>increase</span> <span class='word'>my</span> <span class='word'>knowledge</span> <span class='word'>of</span> <span class='word'>the</span> <span class='word'>constraints</span> <span class='word'>to</span> <span class='word'>consider</span> <span class='word'>when</span> <span class='word'>designing</span> <span class='word'>instruction</span> <span class='word'>sets</span> <span class='word'>and</span> <span class='word'>processors</span><span class='ignore'>.</span><br>
<span class='ignore'>}</span><br>
<span class='cmd'>\label</span><span class='ignore'>{</span><span class='ignore'>cd</span><span class='ignore'>:</span><span class='ignore'>isa</span><span class='ignore'>}</span><br>
<br>
<span class='cmd'>\item</span><span class='ignore'>{</span><span class='cmd'>\textbf</span><span class='ignore'>{</span><span class='word'>Design</span> <span class='word'>and</span> <span class='word'>implement</span> <span class='word'>a</span> <span class='word'>Verilog</span> <span class='word'>RISC</span> <span class='word'>core</span> <span class='word'>that</span> <span class='word'>implements</span> <span class='word'>the</span> <span class='word'>ISA</span> <span class='word'>in</span> <span class='cmd'>\ref</span><span class='ignore'>{</span><span class='ignore'>cd</span><span class='ignore'>:</span><span class='ignore'>isa</span><span class='ignore'>}</span><span class='ignore'>.</span><span class='ignore'>}</span><span class='cmd'>\\</span><br>
<span class='word'>The</span> <span class='word'>Verilog</span> <span class='word'>RISC</span> <span class='word'>core</span> <span class='word'>will</span> <span class='word'>be</span> <span class='word'>able</span> <span class='word'>to</span> <span class='word'>run</span> <span class='word'>software</span> <span class='word'>program</span> <span class='word'>written</span> <span class='word'>for</span> <span class='word'>the</span> <span class='word'>instruction</span> <span class='word'>set</span> <span class='word'>architecture</span><span class='ignore'>.</span><br>
<span class='ignore'>}</span><span class='cmd'>\label</span><span class='ignore'>{</span><span class='ignore'>cd</span><span class='ignore'>:</span><span class='ignore'>core</span><span class='ignore'>}</span><br>
<br>
<span class='cmd'>\item</span><span class='ignore'>{</span><span class='cmd'>\textbf</span><span class='ignore'>{</span><span class='word'>Design</span> <span class='word'>and</span> <span class='word'>implement</span> <span class='word'>an</span> <span class='word'>on-chip</span> <span class='word'>interconnect</span> <span class='word'>for</span> <span class='word'>multi-core</span> <span class='word'>processing</span> <span class='ignore'>(</span><span class='word'>2</span> <span class='word'>to</span> <span class='word'>32</span> <span class='word'>cores</span><span class='ignore'>)</span> <span class='word'>using</span> <span class='word'>the</span> <span class='word'>RISC</span> <span class='word'>core</span> <span class='word'>from</span> <span class='cmd'>\ref</span><span class='ignore'>{</span><span class='ignore'>cd</span><span class='ignore'>:</span><span class='ignore'>core</span><span class='ignore'>}</span><span class='ignore'>.</span><span class='ignore'>}</span><span class='cmd'>\\</span><br>
<span class='word'>The</span> <span class='word'>interconnect</span> <span class='word'>will</span> <span class='word'>be</span> <span class='word'>a</span> <span class='word'>chief</span> <span class='word'>requirement</span> <span class='word'>to</span> <span class='word'>enable</span> <span class='word'>multi-core</span> <span class='word'>communication</span><span class='ignore'>.</span> <span class='word'>The</span> <span class='word'>interconnect</span> <span class='word'>should</span> <span class='word'>support</span> <span class='word'>up</span> <span class='word'>to</span> <span class='word'>32</span> <span class='word'>cores</span><span class='ignore'>,</span> <span class='word'>however</span> <span class='word'>FPGA</span> <span class='word'>implementation</span> <span class='word'>constraints</span> <span class='word'>may</span> <span class='word'>limit</span> <span class='word'>this</span> <span class='word'>due</span> <span class='word'>to</span> <span class='word'>limited</span> <span class='word'>resources</span><span class='ignore'>.</span><br>
<br>
<span class='word'>The</span> <span class='word'>interconnect</span> <span class='word'>will</span> <span class='word'>control</span> <span class='word'>communication</span> <span class='word'>between</span> <span class='word'>the</span> <span class='word'>cores</span> <span class='word'>to</span> <span class='word'>enable</span> <span class='word'>software</span> <span class='word'>parallelism</span><span class='ignore'>.</span><br>
<span class='ignore'>}</span><span class='cmd'>\label</span><span class='ignore'>{</span><span class='ignore'>cd</span><span class='ignore'>:</span><span class='ignore'>interconnect</span><span class='ignore'>}</span><br>
<br>
<span class='cmd'>\item</span><span class='ignore'>{</span><span class='cmd'>\textbf</span><span class='ignore'>{</span><span class='word'>Analyse</span> <span class='word'>performance</span> <span class='word'>of</span> <span class='word'>serial</span> <span class='word'>and</span> <span class='word'>parallel</span> <span class='word'>software</span> <span class='word'>algorithms</span><span class='ignore'>,</span> <span class='word'>such</span> <span class='word'>as</span> <span class='word'>parallel</span> <span class='word'>DFT</span><span class='ignore'>,</span> <span class='word'>on</span> <span class='word'>the</span> <span class='word'>processor</span><span class='ignore'>.</span><span class='ignore'>}</span><span class='cmd'>\\</span><br>
<span class='word'>To</span> <span class='word'>evaluate</span> <span class='word'>the</span> <span class='word'>effectiveness</span> <span class='word'>of</span> <span class='word'>the</span> <span class='word'>developed</span> <span class='word'>solution</span><span class='ignore'>,</span> <span class='word'>a</span> <span class='word'>serial</span> <span class='word'>and</span> <span class='word'>parallel</span> <span class='word'>implementation</span> <span class='word'>of</span> <span class='word'>a</span> <span class='word'>simple</span> <span class='word'>computing</span> <span class='word'>algorithm</span> <span class='ignore'>(</span><span class='word'>parallel</span> <span class='word'>reduction</span><span class='ignore'>,</span> <span class='word'>sorting</span><span class='ignore'>)</span> <span class='word'>will</span> <span class='word'>be</span> <span class='word'>ran</span> <span class='word'>on</span> <span class='word'>the</span> <span class='word'>processor</span> <span class='word'>and</span> <span class='word'>it's</span> <span class='word'>performance</span> <span class='word'>analysed</span><span class='ignore'>.</span> <span class='word'>Effectiveness</span> <span class='word'>will</span> <span class='word'>be</span> <span class='word'>rated</span> <span class='word'>on</span> <span class='word'>total</span> <span class='word'>algorithm</span> <span class='word'>run-time</span> <span class='word'>and</span> <span class='word'>the</span> <span class='word'>speed-up</span> <span class='word'>gained</span> <span class='word'>by</span> <span class='word'>adding</span> <span class='word'>more</span> <span class='word'>cores</span><span class='ignore'>.</span><br>
<span class='ignore'>}</span><span class='cmd'>\label</span><span class='ignore'>{</span><span class='ignore'>cd</span><span class='ignore'>:</span><span class='ignore'>software</span><span class='ignore'>}</span><br>
<br>
<span class='cmd'>\item</span><span class='ignore'>{</span><span class='cmd'>\textbf</span><span class='ignore'>{</span><span class='word'>Allow</span> <span class='word'>the</span> <span class='word'>RISC</span> <span class='word'>core</span> <span class='word'>to</span> <span class='word'>be</span> <span class='word'>easily</span> <span class='word'>compiled</span> <span class='word'>to</span> <span class='word'>multiple</span> <span class='word'>FPGA</span> <span class='word'>vendors</span> <span class='ignore'>(</span><span class='word'>Xilinx</span><span class='ignore'>,</span> <span class='word'>Altera</span><span class='ignore'>)</span><span class='ignore'>.</span><span class='ignore'>}</span><span class='cmd'>\\</span><br>
<span class='word'>The</span> <span class='word'>developed</span> <span class='word'>solution</span> <span class='word'>should</span> <span class='word'>be</span> <span class='word'>generic</span> <span class='word'>and</span> <span class='word'>portable</span> <span class='word'>to</span> <span class='word'>allow</span> <span class='word'>it</span> <span class='word'>to</span> <span class='word'>be</span> <span class='word'>used</span> <span class='word'>across</span> <span class='word'>a</span> <span class='word'>wide-range</span> <span class='word'>of</span> <span class='word'>FPGA</span> <span class='word'>vendors</span> <span class='word'>and</span> <span class='word'>devices</span><span class='ignore'>.</span><br>
<br>
<span class='word'>Verilog</span> <span class='word'>is</span> <span class='word'>a</span> <span class='word'>generic</span> <span class='word'>implementation-independent</span> <span class='word'>hardware-description</span> <span class='word'>language</span> <span class='word'>and</span> <span class='word'>so</span> <span class='word'>designing</span> <span class='word'>implementation</span> <span class='word'>specific</span> <span class='word'>modules</span> <span class='word'>is</span> <span class='word'>recommended</span><span class='ignore'>.</span><br>
<br>
<span class='word'>A</span> <span class='word'>key</span> <span class='word'>consideration</span> <span class='word'>for</span> <span class='word'>this</span> <span class='word'>requirement</span> <span class='word'>is</span> <span class='word'>to</span> <span class='word'>consider</span> <span class='word'>the</span> <span class='word'>varying</span> <span class='word'>hard</span> <span class='word'>IP</span> <span class='word'>provided</span> <span class='word'>by</span> <span class='word'>the</span> <span class='word'>FPGA</span> <span class='word'>vendors</span> <span class='ignore'>(</span><span class='word'>such</span> <span class='word'>as</span> <span class='word'>BRAM</span><span class='ignore'>,</span> <span class='word'>ethernet</span><span class='ignore'>,</span> <span class='word'>and</span> <span class='word'>PCIe</span> <span class='cmd'>\cite</span><span class='ignore'>{</span><span class='ignore'>xilinxbram</span><span class='ignore'>,</span><span class='ignore'>alterabram</span><span class='ignore'>}</span><span class='ignore'>)</span><span class='ignore'>.</span> <span class='word'>To</span> <span class='word'>overcome</span> <span class='word'>this</span> <span class='word'>problem</span><span class='ignore'>,</span> <span class='word'>the</span> <span class='word'>developed</span> <span class='word'>Verilog</span> <span class='word'>code</span> <span class='word'>will</span> <span class='word'>conditionally</span> <span class='word'>compile</span> <span class='word'>where</span> <span class='word'>vendor</span> <span class='word'>specific</span> <span class='word'>requirements</span> <span class='word'>are</span> <span class='word'>present</span><span class='ignore'>.</span><br>
<span class='ignore'>}</span><span class='cmd'>\label</span><span class='ignore'>{</span><span class='ignore'>cd</span><span class='ignore'>:</span><span class='ignore'>vendor</span><span class='ignore'>}</span><br>
<span class='envir'>\end</span><span class='envir'>{enumerate}</span><br>
<br>
<span class='cmd'>\subsection</span><span class='ignore'>{</span><span class='hword'>Extended</span> <span class='hword'>Deliverables</span> <span class='ignore'>(</span><span class='hword'>ED</span><span class='ignore'>)</span><span class='ignore'>}</span><br>
<span class='word'>The</span> <span class='word'>project's</span> <span class='word'>extended</span> <span class='word'>deliverables</span> <span class='word'>are</span> <span class='word'>described</span> <span class='word'>below</span><span class='ignore'>.</span><br>
<span class='envir'>\begin</span><span class='envir'>{enumerate}</span><span class='option'>[leftmargin=2\parindent, label=\bfseries ED\arabic*]</span><br>
&nbsp;&nbsp;<span class='cmd'>\item</span><span class='ignore'>{</span><span class='word'>Design</span> <span class='word'>a</span> <span class='word'>RISC</span> <span class='word'>core</span> <span class='word'>with</span> <span class='word'>an</span> <span class='word'>instructions-per-clock</span> <span class='ignore'>(</span><span class='word'>IPC</span><span class='ignore'>)</span> <span class='word'>rating</span> <span class='word'>of</span> <span class='word'>at</span> <span class='word'>least</span> <span class='word'>1.0</span> <span class='ignore'>(</span><span class='word'>a</span> <span class='word'>single-cycle</span> <span class='word'>CPU</span><span class='ignore'>)</span><span class='ignore'>.</span><span class='ignore'>}</span><br>
<span class='cmd'>\label</span><span class='ignore'>{</span><span class='ignore'>ed</span><span class='ignore'>:</span><span class='ignore'>ipc</span><span class='ignore'>}</span><br>
&nbsp;&nbsp;<span class='cmd'>\item</span><span class='ignore'>{</span><span class='word'>Design</span> <span class='word'>a</span> <span class='word'>RISC</span> <span class='word'>core</span> <span class='word'>with</span> <span class='word'>a</span> <span class='word'>pipe-lined</span> <span class='word'>data</span> <span class='word'>path</span> <span class='word'>to</span> <span class='word'>increase</span> <span class='word'>the</span> <span class='word'>design's</span> <span class='word'>clock</span> <span class='word'>speed</span><span class='ignore'>.</span><span class='ignore'>}</span><span class='cmd'>\label</span><span class='ignore'>{</span><span class='ignore'>ed</span><span class='ignore'>:</span><span class='ignore'>pipeline</span><span class='ignore'>}</span><br>
&nbsp;&nbsp;<span class='cmd'>\item</span><span class='ignore'>{</span><span class='word'>Design</span> <span class='word'>a</span> <span class='word'>scalable</span> <span class='word'>multi-core</span> <span class='word'>interconnect</span> <span class='word'>supporting</span> <span class='word'>arbitrary</span> <span class='ignore'>(</span><span class='word'>more</span> <span class='word'>than</span> <span class='word'>32</span><span class='ignore'>)</span> <span class='word'>RISC</span> <span class='word'>core</span> <span class='word'>instances</span> <span class='ignore'>(</span><span class='word'>manycore</span><span class='ignore'>)</span> <span class='word'>using</span> <span class='word'>Network-on-Chip</span> <span class='ignore'>(</span><span class='word'>NoC</span><span class='ignore'>)</span> <span class='word'>architecture</span><span class='ignore'>.</span><span class='ignore'>}</span><span class='cmd'>\label</span><span class='ignore'>{</span><span class='ignore'>ed</span><span class='ignore'>:</span><span class='ignore'>scale</span><span class='ignore'>}</span><br>
&nbsp;&nbsp;<span class='cmd'>\item</span><span class='ignore'>{</span><span class='word'>Design</span> <span class='word'>a</span> <span class='word'>compiler-backend</span> <span class='word'>for</span> <span class='word'>the</span> <span class='word'>PRCO304</span> <span class='cmd'>\cite</span><span class='ignore'>{</span><span class='ignore'>prco304</span><span class='ignore'>}</span> <span class='word'>compiler</span> <span class='word'>to</span> <span class='word'>support</span> <span class='word'>the</span> <span class='word'>ISA</span> <span class='word'>from</span> <span class='cmd'>\ref</span><span class='ignore'>{</span><span class='ignore'>cd</span><span class='ignore'>:</span><span class='ignore'>isa</span><span class='ignore'>}</span><span class='ignore'>.</span> <span class='word'>This</span> <span class='word'>will</span> <span class='word'>make</span> <span class='word'>it</span> <span class='word'>easier</span> <span class='word'>to</span> <span class='word'>build</span> <span class='word'>complex</span> <span class='word'>multi-core</span> <span class='word'>software</span> <span class='word'>for</span> <span class='word'>the</span> <span class='word'>processor</span><span class='ignore'>.</span><span class='ignore'>}</span><span class='cmd'>\label</span><span class='ignore'>{</span><span class='ignore'>ed</span><span class='ignore'>:</span><span class='ignore'>compiler</span><span class='ignore'>}</span><br>
&nbsp;&nbsp;<span class='cmd'>\item</span><span class='ignore'>{</span><span class='word'>The</span> <span class='word'>RISC</span> <span class='word'>core</span> <span class='word'>can</span> <span class='word'>communicate</span> <span class='word'>to</span> <span class='word'>peripherals</span> <span class='word'>via</span> <span class='word'>a</span> <span class='word'>memory-mapped</span> <span class='word'>addresses</span> <span class='word'>using</span> <span class='word'>the</span> <span class='word'>Wishbone</span> <span class='word'>bus</span><span class='ignore'>.</span><span class='ignore'>}</span><span class='cmd'>\label</span><span class='ignore'>{</span><span class='ignore'>ed</span><span class='ignore'>:</span><span class='ignore'>mmu</span><span class='ignore'>}</span><br>
&nbsp;&nbsp;<span class='cmd'>\item</span><span class='ignore'>{</span><span class='word'>Implement</span> <span class='word'>various</span> <span class='word'>memory-mapped</span> <span class='word'>peripherals</span> <span class='word'>such</span> <span class='word'>as</span> <span class='word'>UART</span><span class='ignore'>,</span> <span class='word'>GPIO</span><span class='ignore'>,</span> <span class='word'>LCD</span><span class='ignore'>,</span> <span class='word'>to</span> <span class='word'>aid</span> <span class='word'>visual</span> <span class='word'>representation</span> <span class='word'>of</span> <span class='word'>the</span> <span class='word'>processor</span> <span class='word'>during</span> <span class='word'>the</span> <span class='word'>demonstration</span> <span class='word'>viva</span><span class='ignore'>.</span><span class='ignore'>}</span><span class='cmd'>\label</span><span class='ignore'>{</span><span class='ignore'>ed</span><span class='ignore'>:</span><span class='ignore'>peripherals</span><span class='ignore'>}</span> <br>
&nbsp;&nbsp;<span class='cmd'>\item</span><span class='ignore'>{</span><span class='word'>Store</span> <span class='word'>instruction</span> <span class='word'>memory</span> <span class='word'>in</span> <span class='word'>SPI</span> <span class='word'>flash</span><span class='ignore'>.</span><span class='ignore'>}</span><span class='cmd'>\label</span><span class='ignore'>{</span><span class='ignore'>ed</span><span class='ignore'>:</span><span class='ignore'>flash</span><span class='ignore'>}</span><br>
&nbsp;&nbsp;<span class='cmd'>\item</span><span class='ignore'>{</span><span class='word'>Reprogram</span> <span class='word'>instruction</span> <span class='word'>memory</span> <span class='word'>at</span> <span class='word'>runtime</span> <span class='word'>from</span> <span class='word'>host</span> <span class='word'>computer</span><span class='ignore'>.</span><span class='ignore'>}</span><span class='cmd'>\label</span><span class='ignore'>{</span><span class='ignore'>ed</span><span class='ignore'>:</span><span class='ignore'>program</span><span class='ignore'>}</span><br>
&nbsp;&nbsp;<span class='cmd'>\item</span><span class='ignore'>{</span><span class='word'>Processor</span> <span class='word'>external</span> <span class='word'>debugger</span> <span class='word'>using</span> <span class='word'>host-processor</span> <span class='word'>link</span><span class='ignore'>.</span><span class='ignore'>}</span><span class='cmd'>\label</span><span class='ignore'>{</span><span class='ignore'>ed</span><span class='ignore'>:</span><span class='ignore'>debug</span><span class='ignore'>}</span><br>
<span class='envir'>\end</span><span class='envir'>{enumerate}</span><br>
<br>
<span class='cmd'>\section</span><span class='ignore'>{</span><span class='hword'>Project</span> <span class='hword'>Timeline</span><span class='ignore'>}</span><br>
<span class='cmd'>\label</span><span class='ignore'>{</span><span class='ignore'>sect</span><span class='ignore'>:</span><span class='ignore'>timeline</span><span class='ignore'>}</span><br>
<span class='cmd'>\subsection</span><span class='ignore'>{</span><span class='hword'>Project</span> <span class='hword'>Stages</span><span class='ignore'>}</span><br>
<span class='word'>The</span> <span class='word'>project</span> <span class='word'>is</span> <span class='word'>split</span> <span class='word'>up</span> <span class='word'>into</span> <span class='word'>many</span> <span class='word'>stages</span> <span class='word'>to</span> <span class='word'>aid</span> <span class='word'>planning</span> <span class='word'>and</span> <span class='word'>management</span> <span class='word'>of</span> <span class='word'>the</span> <span class='word'>project</span><span class='ignore'>.</span> <span class='word'>There</span> <span class='word'>are</span> <span class='word'>8</span> <span class='word'>unique</span> <span class='word'>stage</span> <span class='word'>areas</span><span class='ignore'>:</span> <span class='word'>1</span><span class='ignore'>.</span> <span class='word'>Inital</span> <span class='word'>project</span> <span class='word'>conception</span><span class='ignore'>;</span> <span class='word'>2</span> <span class='word'>Basic</span> <span class='word'>RISC</span> <span class='word'>core</span> <span class='word'>development</span><span class='ignore'>;</span> <span class='word'>3</span><span class='ignore'>.</span> <span class='word'>Extended</span> <span class='word'>RISC</span> <span class='word'>core</span> <span class='word'>development</span><span class='ignore'>;</span> <span class='word'>4</span><span class='ignore'>.</span> <span class='word'>Multi-core</span> <span class='word'>development</span><span class='ignore'>;</span> <span class='word'>5</span><span class='ignore'>.</span> <span class='word'>Processor</span> <span class='word'>quality-of-life</span> <span class='ignore'>(</span><span class='word'>QoL</span><span class='ignore'>)</span> <span class='word'>improvements</span><span class='ignore'>;</span> <span class='word'>6</span><span class='ignore'>.</span> <span class='word'>Compiler</span> <span class='word'>development</span><span class='ignore'>;</span> <span class='word'>7</span><span class='ignore'>.</span> <span class='word'>Demo</span> <span class='word'>preparation</span><span class='ignore'>,</span> <span class='word'>and</span> <span class='word'>8</span><span class='ignore'>.</span> <span class='word'>Final</span> <span class='word'>report</span><span class='ignore'>.</span><br>
<br>
<span class='word'>The</span> <span class='word'>project</span> <span class='word'>stages</span> <span class='word'>are</span> <span class='word'>shown</span> <span class='word'>in</span> <span class='word'>Table</span> <span class='cmd'>\ref</span><span class='ignore'>{</span><span class='ignore'>tb</span><span class='ignore'>:</span><span class='ignore'>stages</span><span class='ignore'>}</span><span class='ignore'>.</span><br>
<br>
<span class='envir'>\begin</span><span class='envir'>{table}</span><span class='option'>[h]</span><br>
&nbsp;&nbsp;<span class='exclcmd'>\small</span><br>
&nbsp;&nbsp;<span class='exclenv'>\begin</span><span class='exclenv'>{tabularx}</span><span class='ignore'>{</span><span class='exclcmd'>\textwidth</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='ignore'>|</span><span class='ignore'>l</span><span class='ignore'>|</span><span class='ignore'>l</span><span class='ignore'>|</span><span class='ignore'>l</span><span class='ignore'>|</span><span class='ignore'>l</span><span class='ignore'>|</span><span class='ignore'>l</span><span class='ignore'>|</span><span class='ignore'>X</span><span class='ignore'>|</span><span class='ignore'>}</span><br>
&nbsp; &nbsp; <span class='exclcmd'>\hline</span><br>
&nbsp;&nbsp;<span class='ignore'>Stage</span> <span class='ignore'>&amp;</span> <span class='ignore'>Title</span> <span class='ignore'>&amp;</span> <span class='ignore'>Start</span> <span class='ignore'>Date</span> <span class='ignore'>&amp;</span> <span class='ignore'>Days</span> <span class='ignore'>&amp;</span> <span class='ignore'>Core</span> <span class='ignore'>&amp;</span> <span class='ignore'>Applicable</span> <span class='ignore'>Deliverables</span><br>
&nbsp; &nbsp; <span class='exclcmd'>\\</span> <span class='exclcmd'>\specialrule</span><span class='ignore'>{</span><span class='ignore'>2pt</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='ignore'>-</span><span class='ignore'>2pt</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='ignore'>0pt</span><span class='ignore'>}</span><br>
&nbsp; &nbsp; <span class='ignore'>1.0</span> <span class='ignore'>&amp;</span> <span class='ignore'>Research</span> <span class='ignore'>&amp;</span> <span class='ignore'>Feb</span> <span class='ignore'>04</span> <span class='ignore'>&amp;</span> <span class='ignore'>7</span> <span class='ignore'>&amp;</span> <span class='ignore'>x</span> <span class='ignore'>&amp;</span> <br>
&nbsp; &nbsp; <span class='exclcmd'>\\</span> <span class='exclcmd'>\hline</span><br>
&nbsp;&nbsp;<span class='ignore'>1.1</span> <span class='ignore'>&amp;</span> <span class='ignore'>Requirement</span> <span class='ignore'>gathering</span><span class='ignore'>/</span><span class='ignore'>review</span> <span class='ignore'>&amp;</span> <span class='ignore'>Feb</span> <span class='ignore'>11</span> <span class='ignore'>&amp;</span> <span class='ignore'>14</span> <span class='ignore'>&amp;</span> <span class='ignore'>x</span> <span class='ignore'>&amp;</span> <br>
	<span class='exclcmd'>\\</span> <span class='exclcmd'>\hline</span><br>
&nbsp;&nbsp;<span class='ignore'>1.1</span> <span class='ignore'>&amp;</span> <span class='ignore'>Processor</span> <span class='ignore'>specification</span><span class='ignore'>,</span> <span class='ignore'>architecture</span><span class='ignore'>,</span> <span class='ignore'>ISA</span> <span class='ignore'>&amp;</span> <span class='ignore'>Feb</span> <span class='ignore'>18</span> <span class='ignore'>&amp;</span> <span class='ignore'>100</span> <span class='ignore'>&amp;</span> <span class='ignore'>x</span> <span class='ignore'>&amp;</span> <span class='exclcmd'>\ref</span><span class='ignore'>{</span><span class='ignore'>cd</span><span class='ignore'>:</span><span class='ignore'>isa</span><span class='ignore'>}</span><br>
	<span class='exclcmd'>\\</span> <span class='exclcmd'>\hline</span><br>
&nbsp;&nbsp;<span class='ignore'>1.2</span> <span class='ignore'>&amp;</span> <span class='ignore'>Stage</span><span class='ignore'>/</span><span class='ignore'>Time</span> <span class='ignore'>Allocation</span> <span class='ignore'>Planning</span> <span class='ignore'>&amp;</span> <span class='ignore'>Feb</span> <span class='ignore'>25</span> <span class='ignore'>&amp;</span> <span class='ignore'>7</span> <span class='ignore'>&amp;</span> <span class='ignore'>x</span> <span class='ignore'>&amp;</span> <br>
&nbsp; &nbsp; <span class='exclcmd'>\\</span> <span class='exclcmd'>\specialrule</span><span class='ignore'>{</span><span class='ignore'>2pt</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='ignore'>-</span><span class='ignore'>2pt</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='ignore'>0pt</span><span class='ignore'>}</span><br>
&nbsp; &nbsp; <span class='ignore'>2.1</span> <span class='ignore'>&amp;</span> <span class='ignore'>Decoder</span><span class='ignore'>,</span> <span class='ignore'>Register</span> <span class='ignore'>Set</span><span class='ignore'>,</span> <span class='ignore'>impl</span> <span class='exclcmd'>\&amp;</span> <span class='ignore'>integration</span> <span class='ignore'>&amp;</span> <span class='ignore'>Feb</span> <span class='ignore'>25</span> <span class='ignore'>&amp;</span> <span class='ignore'>14</span> <span class='ignore'>&amp;</span> <span class='ignore'>x</span> <span class='ignore'>&amp;</span> <span class='exclcmd'>\ref</span><span class='ignore'>{</span><span class='ignore'>cd</span><span class='ignore'>:</span><span class='ignore'>core</span><span class='ignore'>}</span><br>
	<span class='exclcmd'>\\</span> <span class='exclcmd'>\hline</span><br>
&nbsp;&nbsp;<span class='ignore'>2.2</span> <span class='ignore'>&amp;</span> <span class='ignore'>Register</span> <span class='ignore'>set</span> <span class='ignore'>impl</span> <span class='exclcmd'>\&amp;</span> <span class='ignore'>integration</span> <span class='ignore'>&amp;</span> <span class='ignore'>Mar</span> <span class='ignore'>04</span> <span class='ignore'>&amp;</span> <span class='ignore'>14</span> <span class='ignore'>&amp;</span> <span class='ignore'>x</span> <span class='ignore'>&amp;</span> <span class='exclcmd'>\ref</span><span class='ignore'>{</span><span class='ignore'>cd</span><span class='ignore'>:</span><span class='ignore'>core</span><span class='ignore'>}</span><br>
	<span class='exclcmd'>\\</span> <span class='exclcmd'>\hline</span><br>
&nbsp;&nbsp;<span class='ignore'>2.3</span> <span class='ignore'>&amp;</span> <span class='ignore'>Local</span> <span class='ignore'>memory</span> <span class='ignore'>impl</span> <span class='exclcmd'>\&amp;</span> <span class='ignore'>integration</span> <span class='ignore'>&amp;</span> <span class='ignore'>Mar</span> <span class='ignore'>11</span> <span class='ignore'>&amp;</span> <span class='ignore'>14</span> <span class='ignore'>&amp;</span> <span class='ignore'>x</span> <span class='ignore'>&amp;</span> <span class='exclcmd'>\ref</span><span class='ignore'>{</span><span class='ignore'>cd</span><span class='ignore'>:</span><span class='ignore'>core</span><span class='ignore'>}</span><br>
&nbsp; &nbsp; <span class='exclcmd'>\\</span> <span class='exclcmd'>\specialrule</span><span class='ignore'>{</span><span class='ignore'>2pt</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='ignore'>-</span><span class='ignore'>2pt</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='ignore'>0pt</span><span class='ignore'>}</span><br>
&nbsp; &nbsp; <span class='ignore'>3.1</span> <span class='ignore'>&amp;</span> <span class='ignore'>Memory</span> <span class='ignore'>mapped</span> <span class='ignore'>register</span> <span class='ignore'>layout</span> <span class='exclcmd'>\&amp;</span> <span class='ignore'>impl</span> <span class='ignore'>&amp;</span> <span class='ignore'>Apr</span> <span class='ignore'>01</span> <span class='ignore'>&amp;</span> <span class='ignore'>21</span> <span class='ignore'>&amp;</span>&nbsp; <span class='ignore'>&amp;</span> <span class='exclcmd'>\ref</span><span class='ignore'>{</span><span class='ignore'>ed</span><span class='ignore'>:</span><span class='ignore'>mmu</span><span class='ignore'>}</span><br>
	<span class='exclcmd'>\\</span> <span class='exclcmd'>\hline</span><br>
&nbsp;&nbsp;<span class='ignore'>3.2</span> <span class='ignore'>&amp;</span> <span class='ignore'>Wishbone</span> <span class='ignore'>peripheral</span> <span class='ignore'>bus</span> <span class='ignore'>connected</span> <span class='ignore'>to</span> <span class='ignore'>MMU</span> <span class='ignore'>&amp;</span> <span class='ignore'>Apr</span> <span class='ignore'>08</span> <span class='ignore'>&amp;</span> <span class='ignore'>21</span> <span class='ignore'>&amp;</span>&nbsp; <span class='ignore'>&amp;</span> <span class='exclcmd'>\ref</span><span class='ignore'>{</span><span class='ignore'>ed</span><span class='ignore'>:</span><span class='ignore'>mmu</span><span class='ignore'>}</span><br>
	<span class='exclcmd'>\\</span> <span class='exclcmd'>\hline</span><br>
&nbsp;&nbsp;<span class='ignore'>3.3</span> <span class='ignore'>&amp;</span> <span class='ignore'>Pipelined</span> <span class='ignore'>implementation</span> <span class='ignore'>and</span> <span class='ignore'>verification</span> <span class='ignore'>&amp;</span> <span class='ignore'>Apr</span> <span class='ignore'>15</span> <span class='ignore'>&amp;</span> <span class='ignore'>21</span> <span class='ignore'>&amp;</span>&nbsp; <span class='ignore'>&amp;</span> <span class='exclcmd'>\ref</span><span class='ignore'>{</span><span class='ignore'>ed</span><span class='ignore'>:</span><span class='ignore'>pipeline</span><span class='ignore'>}</span><br>
	<span class='exclcmd'>\\</span> <span class='exclcmd'>\hline</span><br>
&nbsp;&nbsp;<span class='ignore'>3.4</span> <span class='ignore'>&amp;</span> <span class='ignore'>Cache</span> <span class='ignore'>memory</span> <span class='ignore'>design</span> <span class='exclcmd'>\&amp;</span> <span class='ignore'>impl</span> <span class='ignore'>&amp;</span> <span class='ignore'>Apr</span> <span class='ignore'>22</span> <span class='ignore'>&amp;</span> <span class='ignore'>28</span> <span class='ignore'>&amp;</span>&nbsp; <span class='ignore'>&amp;</span> <span class='exclcmd'>\ref</span><span class='ignore'>{</span><span class='ignore'>ed</span><span class='ignore'>:</span><span class='ignore'>pipeline</span><span class='ignore'>}</span><br>
&nbsp; &nbsp; <span class='exclcmd'>\\</span> <span class='exclcmd'>\specialrule</span><span class='ignore'>{</span><span class='ignore'>2pt</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='ignore'>-</span><span class='ignore'>2pt</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='ignore'>0pt</span><span class='ignore'>}</span><br>
&nbsp; &nbsp; <span class='ignore'>4.1</span> <span class='ignore'>&amp;</span> <span class='ignore'>Multi-core</span> <span class='ignore'>communication</span> <span class='ignore'>interface</span> <span class='ignore'>&amp;</span> <span class='ignore'>TBD</span> <span class='ignore'>&amp;</span> <span class='ignore'>TBD</span> <span class='ignore'>&amp;</span> <span class='ignore'>x</span> <span class='ignore'>&amp;</span> <span class='exclcmd'>\ref</span><span class='ignore'>{</span><span class='ignore'>cd</span><span class='ignore'>:</span><span class='ignore'>interconnect</span><span class='ignore'>}</span><br>
	<span class='exclcmd'>\\</span> <span class='exclcmd'>\hline</span><br>
&nbsp;&nbsp;<span class='ignore'>4.2</span> <span class='ignore'>&amp;</span> <span class='ignore'>Shared-memory</span> <span class='ignore'>controller</span> <span class='ignore'>&amp;</span> <span class='ignore'>TBD</span> <span class='ignore'>&amp;</span> <span class='ignore'>TBD</span> <span class='ignore'>&amp;</span> <span class='ignore'>x</span> <span class='ignore'>&amp;</span> <span class='exclcmd'>\ref</span><span class='ignore'>{</span><span class='ignore'>cd</span><span class='ignore'>:</span><span class='ignore'>interconnect</span><span class='ignore'>}</span><br>
	<span class='exclcmd'>\\</span> <span class='exclcmd'>\hline</span><br>
&nbsp;&nbsp;<span class='ignore'>4.3</span> <span class='ignore'>&amp;</span> <span class='ignore'>Scalable</span> <span class='ignore'>multi-core</span> <span class='ignore'>interface</span> <span class='ignore'>(</span><span class='ignore'>10s</span> <span class='ignore'>of</span> <span class='ignore'>cores</span><span class='ignore'>)</span> <span class='ignore'>&amp;</span> <span class='ignore'>TBD</span> <span class='ignore'>&amp;</span> <span class='ignore'>TBD</span> <span class='ignore'>&amp;</span> <span class='ignore'>x</span> <span class='ignore'>&amp;</span> <span class='exclcmd'>\ref</span><span class='ignore'>{</span><span class='ignore'>cd</span><span class='ignore'>:</span><span class='ignore'>interconnect</span><span class='ignore'>}</span><br>
	<span class='exclcmd'>\\</span> <span class='exclcmd'>\hline</span><br>
&nbsp;&nbsp;<span class='ignore'>4.4</span> <span class='ignore'>&amp;</span> <span class='ignore'>Multi-core</span> <span class='ignore'>example</span> <span class='ignore'>program</span> <span class='ignore'>(</span><span class='ignore'>reduction</span><span class='ignore'>)</span> <span class='ignore'>&amp;</span> <span class='ignore'>TBD</span> <span class='ignore'>&amp;</span> <span class='ignore'>TBD</span> <span class='ignore'>&amp;</span> <span class='ignore'>x</span> <span class='ignore'>&amp;</span> <span class='exclcmd'>\ref</span><span class='ignore'>{</span><span class='ignore'>cd</span><span class='ignore'>:</span><span class='ignore'>software</span><span class='ignore'>}</span><br>
&nbsp; &nbsp; <span class='exclcmd'>\\</span> <span class='exclcmd'>\specialrule</span><span class='ignore'>{</span><span class='ignore'>2pt</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='ignore'>-</span><span class='ignore'>2pt</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='ignore'>0pt</span><span class='ignore'>}</span><br>
&nbsp; &nbsp; <span class='ignore'>5.1</span> <span class='ignore'>&amp;</span> <span class='ignore'>SPI-FPGA</span> <span class='ignore'>interface</span> <span class='ignore'>for</span> <span class='ignore'>OTG</span> <span class='ignore'>programming</span> <span class='ignore'>&amp;</span> <span class='ignore'>TBD</span> <span class='ignore'>&amp;</span> <span class='ignore'>TBD</span> <span class='ignore'>&amp;</span>&nbsp; <span class='ignore'>&amp;</span> <span class='exclcmd'>\ref</span><span class='ignore'>{</span><span class='ignore'>ed</span><span class='ignore'>:</span><span class='ignore'>flash</span><span class='ignore'>}</span><br>
	<span class='exclcmd'>\\</span> <span class='exclcmd'>\hline</span><br>
&nbsp;&nbsp;<span class='ignore'>5.2</span> <span class='ignore'>&amp;</span> <span class='ignore'>FPGA-PC</span> <span class='ignore'>interfacing</span> <span class='ignore'>&amp;</span> <span class='ignore'>TBD</span> <span class='ignore'>&amp;</span> <span class='ignore'>TBD</span> <span class='ignore'>&amp;</span>&nbsp; <span class='ignore'>&amp;</span> <span class='exclcmd'>\ref</span><span class='ignore'>{</span><span class='ignore'>ed</span><span class='ignore'>:</span><span class='ignore'>debug</span><span class='ignore'>}</span><br>
	<span class='exclcmd'>\\</span> <span class='exclcmd'>\hline</span><br>
&nbsp;&nbsp;<span class='ignore'>5.3</span> <span class='ignore'>&amp;</span> <span class='ignore'>FPGA-PC</span> <span class='ignore'>debugging</span> <span class='ignore'>(</span><span class='ignore'>instruction</span> <span class='ignore'>breakpoints</span><span class='ignore'>)</span> <span class='ignore'>&amp;</span> <span class='ignore'>TBD</span> <span class='ignore'>&amp;</span> <span class='ignore'>TBD</span> <span class='ignore'>&amp;</span>&nbsp; <span class='ignore'>&amp;</span> <span class='exclcmd'>\ref</span><span class='ignore'>{</span><span class='ignore'>ed</span><span class='ignore'>:</span><span class='ignore'>debug</span><span class='ignore'>}</span><br>
&nbsp; &nbsp; <span class='exclcmd'>\\</span> <span class='exclcmd'>\specialrule</span><span class='ignore'>{</span><span class='ignore'>2pt</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='ignore'>-</span><span class='ignore'>2pt</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='ignore'>0pt</span><span class='ignore'>}</span><br>
&nbsp; &nbsp; <span class='ignore'>6.1</span> <span class='ignore'>&amp;</span> <span class='ignore'>Compiler</span> <span class='ignore'>backend</span> <span class='ignore'>for</span> <span class='ignore'>vmicro16</span> <span class='ignore'>&amp;</span> <span class='ignore'>TBD</span> <span class='ignore'>&amp;</span> <span class='ignore'>TBD</span> <span class='ignore'>&amp;</span>&nbsp; <span class='ignore'>&amp;</span> <span class='exclcmd'>\ref</span><span class='ignore'>{</span><span class='ignore'>ed</span><span class='ignore'>:</span><span class='ignore'>compiler</span><span class='ignore'>}</span><br>
	<span class='exclcmd'>\\</span> <span class='exclcmd'>\hline</span><br>
&nbsp;&nbsp;<span class='ignore'>6.2</span> <span class='ignore'>&amp;</span> <span class='ignore'>Compiler</span> <span class='ignore'>support</span> <span class='ignore'>for</span> <span class='ignore'>multi-core</span> <span class='ignore'>codegen</span> <span class='ignore'>&amp;</span> <span class='ignore'>TBD</span> <span class='ignore'>&amp;</span> <span class='ignore'>TBD</span> <span class='ignore'>&amp;</span>&nbsp; <span class='ignore'>&amp;</span> <span class='exclcmd'>\ref</span><span class='ignore'>{</span><span class='ignore'>ed</span><span class='ignore'>:</span><span class='ignore'>compiler</span><span class='ignore'>}</span><br>
&nbsp; &nbsp; <span class='exclcmd'>\\</span> <span class='exclcmd'>\specialrule</span><span class='ignore'>{</span><span class='ignore'>2pt</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='ignore'>-</span><span class='ignore'>2pt</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='ignore'>0pt</span><span class='ignore'>}</span><br>
&nbsp; &nbsp; <span class='ignore'>7.1</span> <span class='ignore'>&amp;</span> <span class='ignore'>Wishbone</span> <span class='ignore'>peripherals</span> <span class='ignore'>for</span> <span class='ignore'>demo</span> <span class='ignore'>&amp;</span> <span class='ignore'>TBD</span> <span class='ignore'>&amp;</span> <span class='ignore'>TBD</span> <span class='ignore'>&amp;</span> <span class='ignore'>x</span> <span class='ignore'>&amp;</span> <span class='exclcmd'>\ref</span><span class='ignore'>{</span><span class='ignore'>cd</span><span class='ignore'>:</span><span class='ignore'>software</span><span class='ignore'>}</span><br>
&nbsp; &nbsp; <span class='exclcmd'>\\</span> <span class='exclcmd'>\specialrule</span><span class='ignore'>{</span><span class='ignore'>2pt</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='ignore'>-</span><span class='ignore'>2pt</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='ignore'>0pt</span><span class='ignore'>}</span><br>
&nbsp; &nbsp; <span class='ignore'>8.1</span> <span class='ignore'>&amp;</span> <span class='ignore'>Final</span> <span class='ignore'>Report</span> <span class='ignore'>&amp;</span> <span class='ignore'>TBD</span> <span class='ignore'>&amp;</span> <span class='ignore'>TBD</span> <span class='ignore'>&amp;</span> <span class='ignore'>x</span> <span class='ignore'>&amp;</span> <br>
	<span class='exclcmd'>\\</span> <span class='exclcmd'>\hline</span><br>
&nbsp;&nbsp;<span class='exclenv'>\end</span><span class='exclenv'>{tabularx}</span><br>
&nbsp; &nbsp; <span class='cmd'>\caption</span><span class='ignore'>{</span><span class='oword'>Project</span> <span class='oword'>stages</span> <span class='oword'>throughout</span> <span class='oword'>the</span> <span class='oword'>life</span> <span class='oword'>cycle</span> <span class='oword'>of</span> <span class='oword'>the</span> <span class='oword'>project</span><span class='ignore'>.</span><span class='ignore'>}</span><br>
&nbsp;&nbsp;<span class='exclcmd'>\label</span><span class='ignore'>{</span><span class='ignore'>tb</span><span class='ignore'>:</span><span class='ignore'>stages</span><span class='ignore'>}</span><br>
<span class='envir'>\end</span><span class='envir'>{table}</span><br>
<br>
<span class='cmd'>\subsection</span><span class='ignore'>{</span><span class='hword'>Project</span> <span class='hword'>Stage</span> <span class='hword'>Detail</span><span class='ignore'>}</span><br>
<span class='cmd'>\subsubsection</span><span class='ignore'>{</span><span class='hword'>Stages</span> <span class='hword'>1.0</span> <span class='hword'>through</span> <span class='hword'>1.2</span> <span class='ignore'>-</span><span class='ignore'>-</span>&nbsp; <span class='hword'>Research</span> <span class='hword'>and</span> <span class='hword'>Project</span> <span class='hword'>Conception</span><span class='ignore'>}</span><br>
<span class='word'>These</span> <span class='word'>stages</span> <span class='word'>cover</span> <span class='word'>initial</span> <span class='word'>research</span> <span class='word'>of</span> <span class='word'>existing</span> <span class='word'>problems</span> <span class='word'>and</span> <span class='word'>solutions</span> <span class='word'>in</span> <span class='word'>the</span> <span class='word'>multiprocessor</span> <span class='word'>area</span><span class='ignore'>.</span> <br>
<span class='word'>The</span> <span class='word'>instruction</span> <span class='word'>set</span> <span class='word'>architecture</span> <span class='word'>is</span> <span class='word'>also</span> <span class='word'>proposed</span> <span class='word'>that</span> <span class='word'>later</span> <span class='word'>stages</span> <span class='word'>will</span> <span class='word'>implement</span><span class='ignore'>.</span><br>
<br>
<span class='cmd'>\subsubsection</span><span class='ignore'>{</span><span class='hword'>Stages</span> <span class='hword'>2.1</span> <span class='hword'>through</span> <span class='hword'>2.3</span> <span class='ignore'>-</span><span class='ignore'>-</span> <span class='hword'>Processor</span> <span class='hword'>module</span> <span class='hword'>Design</span><span class='ignore'>,</span> <span class='hword'>Implementation</span><span class='ignore'>,</span> <span class='hword'>and</span> <span class='hword'>Integration</span><span class='ignore'>}</span><br>
<span class='word'>These</span> <span class='word'>stages</span> <span class='word'>cover</span> <span class='word'>the</span> <span class='word'>design</span><span class='ignore'>,</span> <span class='word'>implementation</span><span class='ignore'>,</span> <span class='word'>and</span> <span class='word'>integration</span> <span class='word'>of</span> <span class='word'>key</span> <span class='word'>processor</span> <span class='word'>core</span> <span class='word'>modules</span> <span class='word'>such</span> <span class='word'>as</span> <span class='word'>the</span> <span class='word'>instruction</span> <span class='word'>decoder</span><span class='ignore'>,</span> <span class='word'>register</span> <span class='word'>sets</span> <span class='word'>and</span> <span class='word'>local</span> <span class='word'>memory</span><span class='ignore'>.</span><br>
<span class='word'>Integration</span> <span class='word'>of</span> <span class='word'>all</span> <span class='word'>the</span> <span class='word'>modules</span> <span class='word'>is</span> <span class='word'>a</span> <span class='word'>challenging</span> <span class='word'>task</span> <span class='word'>because</span> <span class='word'>some</span> <span class='word'>modules</span> <span class='word'>have</span> <span class='word'>both</span> <span class='word'>asynchronous</span> <span class='word'>and</span> <span class='word'>synchronous</span> <span class='word'>signals</span> <span class='word'>that</span> <span class='word'>need</span> <span class='word'>to</span> <span class='word'>be</span> <span class='word'>timed</span> <span class='word'>correctly</span> <span class='word'>in</span> <span class='word'>order</span> <span class='word'>for</span> <span class='word'>other</span> <span class='word'>modules</span> <span class='word'>to</span> <span class='word'>receive</span> <span class='word'>valid</span> <span class='word'>data</span><span class='ignore'>.</span> <span class='word'>An</span> <span class='word'>example</span> <span class='word'>of</span> <span class='word'>this</span> <span class='word'>is</span> <span class='word'>the</span> <span class='word'>register</span> <span class='word'>set</span> <span class='word'>which</span> <span class='word'>has</span> <span class='word'>asynchronous</span> <span class='word'>read</span> <span class='word'>ports</span> <span class='word'>that</span> <span class='word'>are</span> <span class='word'>later</span> <span class='word'>clocked</span> <span class='word'>in</span> <span class='word'>the</span> <span class='word'>instruction</span> <span class='word'>decode</span> <span class='word'>stage</span><span class='ignore'>.</span><br>
<br>
<span class='cmd'>\subsubsection</span><span class='ignore'>{</span><span class='hword'>Stages</span> <span class='hword'>3.1</span> <span class='hword'>through</span> <span class='hword'>3.4</span> <span class='ignore'>-</span><span class='ignore'>-</span> <span class='hword'>Advanced</span> <span class='hword'>Processor</span> <span class='hword'>Implementation</span><span class='ignore'>}</span><br>
<span class='word'>These</span> <span class='word'>stages</span> <span class='word'>add</span> <span class='word'>advanced</span> <span class='word'>features</span> <span class='word'>to</span> <span class='word'>the</span> <span class='word'>processor</span> <span class='word'>to</span> <span class='word'>provide</span> <span class='word'>a</span> <span class='word'>more</span> <span class='word'>functional</span> <span class='word'>product</span><span class='ignore'>.</span> <span class='word'>Although</span> <span class='word'>these</span> <span class='word'>stages</span> <span class='word'>are</span> <span class='word'>classified</span> <span class='word'>as</span> <span class='word'>extended</span><span class='ignore'>,</span> <span class='word'>their</span> <span class='word'>technical</span> <span class='word'>requirement</span> <span class='word'>to</span> <span class='word'>design</span> <span class='word'>and</span> <span class='word'>implement</span> <span class='word'>is</span> <span class='word'>not</span> <span class='word'>great</span> <span class='word'>and</span> <span class='word'>so</span> <span class='word'>are</span> <span class='word'>have</span> <span class='word'>time</span> <span class='word'>allocations</span> <span class='word'>in</span> <span class='word'>the</span> <span class='word'>project</span> <span class='word'>schedule</span><span class='ignore'>.</span> <span class='word'>The</span> <span class='word'>extended</span> <span class='word'>features</span> <span class='word'>that</span> <span class='word'>these</span> <span class='word'>stages</span> <span class='word'>introduce</span> <span class='word'>are</span><span class='ignore'>:</span> <span class='word'>pipelined</span> <span class='word'>processor</span> <span class='word'>stages</span> <span class='ignore'>-</span><span class='ignore'>-</span> <span class='word'>to</span> <span class='word'>drastically</span> <span class='word'>increase</span> <span class='word'>processor</span> <span class='word'>performance</span><span class='ignore'>;</span> <span class='word'>provide</span> <span class='word'>a</span> <span class='word'>memory-mapped</span> <span class='word'>peripheral</span> <span class='word'>interface</span> <span class='word'>through</span> <span class='word'>the</span> <span class='word'>MMU</span><span class='ignore'>;</span> <span class='word'>provide</span> <span class='word'>a</span> <span class='word'>Wishbone</span> <span class='word'>master</span> <span class='word'>interface</span> <span class='word'>to</span> <span class='word'>the</span> <span class='word'>MMU</span> <span class='ignore'>-</span><span class='ignore'>-</span> <span class='word'>allowing</span> <span class='word'>external</span> <span class='word'>peripherals</span> <span class='word'>such</span> <span class='word'>as</span> <span class='word'>GPIO</span> <span class='word'>and</span> <span class='word'>LCD</span> <span class='word'>displays</span> <span class='word'>to</span> <span class='word'>be</span> <span class='word'>utilised</span> <span class='word'>in</span> <span class='word'>a</span> <span class='word'>modular</span> <span class='word'>fashion</span><span class='ignore'>;</span> <span class='word'>and</span> <span class='word'>to</span> <span class='word'>implement</span> <span class='word'>a</span> <span class='word'>cache</span> <span class='word'>memory</span> <span class='word'>for</span> <span class='word'>each</span> <span class='word'>processor</span> <span class='word'>core</span><span class='ignore'>.</span><br>
<br>
<span class='cmd'>\subsubsection</span><span class='ignore'>{</span><span class='hword'>Stages</span> <span class='hword'>4.1</span> <span class='hword'>through</span> <span class='hword'>4.4</span> <span class='ignore'>-</span><span class='ignore'>-</span> <span class='hword'>Multiprocessor</span> <span class='hword'>Functionality</span><span class='ignore'>}</span><br>
<span class='word'>These</span> <span class='word'>stages</span> <span class='word'>are</span> <span class='word'>dedicated</span> <span class='word'>to</span> <span class='word'>adding</span> <span class='word'>multiprocessor</span> <span class='word'>functionality</span> <span class='word'>using</span> <span class='word'>a</span> <span class='word'>loosely</span> <span class='word'>coupled</span> <span class='word'>architecture</span> <span class='word'>to</span> <span class='word'>the</span> <span class='word'>processor</span><span class='ignore'>.</span><br>
<br>
<span class='cmd'>\subsubsection</span><span class='ignore'>{</span><span class='hword'>Stages</span> <span class='hword'>5.1</span> <span class='hword'>through</span> <span class='hword'>5.3</span> <span class='ignore'>-</span><span class='ignore'>-</span> <span class='hword'>Debugging</span> <span class='hword'>Features</span><span class='ignore'>}</span><br>
<span class='word'>These</span> <span class='word'>stages</span> <span class='word'>cover</span> <span class='word'>debugging</span> <span class='word'>features</span> <span class='word'>and</span> <span class='word'>are</span> <span class='word'>classified</span> <span class='word'>as</span> <span class='word'>extended</span> <span class='word'>due</span> <span class='word'>to</span> <span class='word'>the</span> <span class='word'>large</span> <span class='word'>development</span> <span class='word'>time</span> <span class='word'>required</span> <span class='word'>to</span> <span class='word'>implement</span> <span class='word'>them</span> <span class='word'>as</span> <span class='word'>well</span> <span class='word'>as</span> <span class='word'>not</span> <span class='word'>being</span> <span class='word'>related</span> <span class='word'>to</span> <span class='word'>multiprocessor</span> <span class='word'>systems</span><span class='ignore'>.</span><br>
<br>
<span class='cmd'>\subsubsection</span><span class='ignore'>{</span><span class='hword'>Stages</span> <span class='hword'>6.1</span> <span class='hword'>through</span> <span class='hword'>6.2</span> <span class='ignore'>-</span><span class='ignore'>-</span> <span class='hword'>Compiler</span> <span class='hword'>Backends</span><span class='ignore'>}</span><br>
<span class='word'>These</span> <span class='word'>stages</span> <span class='word'>cover</span> <span class='word'>the</span> <span class='word'>implementation</span> <span class='word'>of</span> <span class='word'>a</span> <span class='word'>compiler</span> <span class='word'>backend</span> <span class='word'>to</span> <span class='word'>ease</span> <span class='word'>software</span> <span class='word'>writing</span> <span class='word'>and</span> <span class='word'>programming</span> <span class='word'>of</span> <span class='word'>the</span> <span class='word'>processor</span><span class='ignore'>.</span><br>
<br>
<span class='cmd'>\subsubsection</span><span class='ignore'>{</span><span class='hword'>Stage</span> <span class='hword'>7.1</span> <span class='ignore'>-</span><span class='ignore'>-</span> <span class='hword'>Wishbone</span> <span class='hword'>Peripherals</span><span class='ignore'>}</span><br>
<span class='word'>Additional</span> <span class='word'>Wishbone</span> <span class='word'>peripherals</span><span class='ignore'>,</span> <span class='word'>such</span> <span class='word'>as</span> <span class='word'>SPI</span> <span class='word'>and</span> <span class='word'>timers</span> <span class='word'>will</span> <span class='word'>be</span> <span class='word'>added</span> <span class='word'>to</span> <span class='word'>produce</span> <span class='word'>a</span> <span class='word'>more</span> <span class='word'>useful</span> <span class='word'>multiprocessor</span> <span class='word'>system</span><span class='ignore'>.</span><br>
<br>
<span class='cmd'>\subsubsection</span><span class='ignore'>{</span><span class='hword'>Stage</span> <span class='hword'>8.1</span> <span class='ignore'>-</span><span class='ignore'>-</span> <span class='hword'>Final</span> <span class='hword'>Report</span><span class='ignore'>}</span><br>
<span class='word'>This</span> <span class='word'>stage</span> <span class='word'>is</span> <span class='word'>dedicated</span> <span class='word'>to</span> <span class='word'>the</span> <span class='word'>final</span> <span class='word'>report</span> <span class='word'>write-up</span><span class='ignore'>.</span> <span class='word'>It</span> <span class='word'>is</span> <span class='word'>expected</span> <span class='word'>to</span> <span class='word'>be</span> <span class='word'>an</span> <span class='word'>iterative</span> <span class='word'>task</span> <span class='word'>that</span> <span class='word'>is</span> <span class='word'>active</span> <span class='word'>throughout</span> <span class='word'>the</span> <span class='word'>lifespan</span> <span class='word'>of</span> <span class='word'>the</span> <span class='word'>project</span><span class='ignore'>.</span><br>
<br>
<span class='cmd'>\subsection</span><span class='ignore'>{</span><span class='hword'>Timeline</span><span class='ignore'>}</span><br>
<span class='word'>The</span> <span class='word'>project</span> <span class='word'>stages</span> <span class='word'>from</span> <span class='word'>Table</span> <span class='cmd'>\ref</span><span class='ignore'>{</span><span class='ignore'>tb</span><span class='ignore'>:</span><span class='ignore'>stages</span><span class='ignore'>}</span> <span class='word'>are</span> <span class='word'>displayed</span> <span class='word'>below</span> <span class='word'>in</span> <span class='word'>a</span> <span class='word'>Gantt</span> <span class='word'>chart</span><span class='ignore'>.</span><br>
<br>
<span class='envir'>\begin</span><span class='envir'>{figure}</span><span class='option'>[h]</span><br>
<span class='exclcmd'>\centering</span><br>
<span class='exclcmd'>\includegraphics</span><span class='option'>[width=13cm]</span><span class='ignore'>{</span><span class='ignore'>.</span><span class='ignore'>.</span><span class='ignore'>/</span><span class='ignore'>img</span><span class='ignore'>/</span><span class='ignore'>week2</span><span class='ignore'>_</span><span class='ignore'>gantt</span><span class='ignore'>}</span><br>
<span class='cmd'>\caption</span><span class='ignore'>{</span><span class='oword'>Project</span> <span class='oword'>stages</span> <span class='oword'>in</span> <span class='oword'>a</span> <span class='oword'>Gantt</span> <span class='oword'>chart</span><span class='ignore'>.</span><span class='ignore'>}</span><br>
<span class='exclcmd'>\label</span><span class='ignore'>{</span><span class='ignore'>fig</span><span class='ignore'>:</span><span class='ignore'>gantt</span><span class='ignore'>}</span><br>
<span class='envir'>\end</span><span class='envir'>{figure}</span><br>
<br>
<br>
<span class='cmd'>\section</span><span class='ignore'>{</span><span class='hword'>Resources</span><span class='ignore'>}</span><br>
<span class='word'>This</span> <span class='word'>section</span> <span class='word'>describes</span> <span class='word'>the</span> <span class='word'>hardware</span> <span class='word'>and</span> <span class='word'>software</span> <span class='word'>resources</span> <span class='word'>required</span> <span class='word'>to</span> <span class='word'>fulfil</span> <span class='word'>the</span> <span class='word'>project</span><span class='ignore'>.</span> <br>
<br>
<span class='cmd'>\subsection</span><span class='ignore'>{</span><span class='hword'>Hardware</span> <span class='hword'>Resources</span><span class='ignore'>}</span><br>
<span class='word'>Core</span> <span class='word'>deliverable</span> <span class='cmd'>\ref</span><span class='ignore'>{</span><span class='ignore'>cd</span><span class='ignore'>:</span><span class='ignore'>vendor</span><span class='ignore'>}</span> <span class='word'>requires</span> <span class='word'>the</span> <span class='word'>designed</span> <span class='word'>RISC</span> <span class='word'>core</span> <span class='word'>to</span> <span class='word'>be</span> <span class='word'>implemented</span> <span class='word'>and</span> <span class='word'>demonstrated</span> <span class='word'>on</span> <span class='word'>multiple</span> <span class='word'>FPGA</span> <span class='word'>devices</span><span class='ignore'>.</span>&nbsp; <span class='word'>Although</span> <span class='word'>my</span> <span class='word'>design</span> <span class='word'>should</span> <span class='word'>synthesise</span> <span class='word'>for</span> <span class='word'>physical</span> <span class='word'>IC</span> <span class='word'>implementation</span><span class='ignore'>,</span> <span class='word'>due</span> <span class='word'>to</span> <span class='word'>high</span> <span class='word'>costs</span> <span class='word'>and</span> <span class='word'>lengthy</span> <span class='word'>production</span> <span class='word'>times</span><span class='ignore'>,</span> <span class='word'>it</span> <span class='word'>is</span> <span class='word'>not</span> <span class='word'>a</span> <span class='word'>primary</span> <span class='word'>development</span> <span class='word'>target</span><span class='ignore'>.</span> <br>
<span class='word'>Due</span> <span class='word'>to</span> <span class='word'>having</span> <span class='word'>past</span> <span class='word'>experience</span> <span class='word'>with</span> <span class='word'>Xilinx</span> <span class='word'>FPGAs</span> <span class='word'>from</span> <span class='word'>my</span> <span class='word'>placement</span> <span class='word'>work</span> <span class='word'>and</span> <span class='word'>experience</span> <span class='word'>with</span> <span class='word'>Altera</span> <span class='word'>from</span> <span class='word'>university</span> <span class='word'>modules</span> <span class='word'>it</span> <span class='word'>was</span> <span class='word'>decided</span> <span class='word'>to</span> <span class='word'>target</span> <span class='word'>the</span> <span class='word'>Xilinx</span> <span class='word'>Spartan</span> <span class='word'>6</span> <span class='word'>XC6SLX9</span> <span class='word'>and</span> <span class='word'>the</span> <span class='word'>Altera</span> <span class='word'>Cyclone</span> <span class='word'>V</span><span class='ignore'>.</span><br>
<br>
<span class='cmd'>\subsubsection</span><span class='ignore'>{</span><span class='hword'>Terasic</span> <span class='hword'>DE1-SoC</span> <span class='hword'>Development</span> <span class='hword'>Board</span><span class='ignore'>}</span><br>
<span class='word'>The</span> <span class='word'>Terasic</span> <span class='word'>DE1-SoC</span> <span class='word'>development</span> <span class='word'>board</span> <span class='word'>features</span> <span class='word'>a</span> <span class='word'>large</span> <span class='word'>Cyclone</span> <span class='word'>V</span> <span class='word'>FPGA</span> <span class='word'>and</span> <span class='word'>many</span> <span class='word'>peripherals</span><span class='ignore'>,</span> <span class='word'>such</span> <span class='word'>as</span> <span class='word'>seven-segment</span> <span class='word'>displays</span><span class='ignore'>,</span> <span class='word'>64</span> <span class='word'>MB</span> <span class='word'>SDRAM</span><span class='ignore'>,</span> <span class='word'>ADCs</span><span class='ignore'>,</span> <span class='word'>and</span> <span class='word'>buttons</span> <span class='word'>and</span> <span class='word'>switches</span><span class='ignore'>,</span> <span class='word'>which</span> <span class='word'>will</span> <span class='word'>aid</span> <span class='word'>demonstration</span> <span class='word'>of</span> <span class='word'>the</span> <span class='word'>project</span><span class='ignore'>.</span> <span class='word'>The</span> <span class='word'>development</span> <span class='word'>board</span> <span class='word'>is</span> <span class='word'>available</span> <span class='word'>through</span> <span class='word'>the</span> <span class='word'>university</span> <span class='word'>so</span> <span class='word'>the</span> <span class='word'>cost</span> <span class='word'>is</span> <span class='word'>negligible</span><span class='ignore'>.</span> <span class='cmd'>\cref</span><span class='ignore'>{</span><span class='word'>fig</span><span class='ignore'>:</span><span class='word'>de1soc</span><span class='ignore'>}</span> <span class='word'>shows</span> <span class='word'>the</span> <span class='word'>peripherals</span> <span class='ignore'>(</span><span class='word'>green</span><span class='ignore'>)</span> <span class='word'>available</span> <span class='word'>to</span> <span class='word'>the</span> <span class='word'>FPGA</span><span class='ignore'>.</span><br>
<br>
<span class='envir'>\begin</span><span class='envir'>{figure}</span><span class='option'>[h]</span><br>
<span class='exclcmd'>\centering</span> <br>
<span class='exclcmd'>\includegraphics</span><span class='option'>[width=10cm]</span><span class='ignore'>{</span><span class='ignore'>.</span><span class='ignore'>.</span><span class='ignore'>/</span><span class='ignore'>img</span><span class='ignore'>/</span><span class='ignore'>de1soc</span><span class='ignore'>}</span><br>
<span class='cmd'>\caption</span><span class='ignore'>{</span><span class='oword'>Terasic</span> <span class='oword'>DE1-SoC</span> <span class='oword'>development</span> <span class='oword'>board</span> <span class='oword'>featuring</span> <span class='oword'>the</span> <span class='oword'>Altera</span> <span class='oword'>Cyclone</span> <span class='oword'>V</span> <span class='oword'>FPGA</span> <span class='oword'>and</span> <span class='oword'>many</span> <span class='oword'>peripherals</span><span class='ignore'>.</span> <span class='oword'>Image</span> <span class='oword'>source</span><span class='ignore'>:</span> <span class='cmd'>\cite</span><span class='ignore'>{</span><span class='ignore'>de1soc</span><span class='ignore'>}</span><span class='ignore'>.</span><span class='ignore'>}</span><br>
<span class='exclcmd'>\label</span><span class='ignore'>{</span><span class='ignore'>fig</span><span class='ignore'>:</span><span class='ignore'>de1soc</span><span class='ignore'>}</span><br>
<span class='envir'>\end</span><span class='envir'>{figure}</span><br>
<br>
<span class='cmd'>\subsubsection</span><span class='ignore'>{</span><span class='hword'>Minispartan</span> <span class='hword'>6</span><span class='ignore'>+</span> <span class='hword'>FPGA</span> <span class='hword'>Development</span> <span class='hword'>Board</span><span class='ignore'>}</span><br>
<span class='word'>The</span> <span class='word'>Minispartan</span> <span class='word'>6</span><span class='ignore'>+</span> <span class='word'>is</span> <span class='word'>a</span> <span class='word'>hobbyist</span> <span class='word'>FGPA</span> <span class='word'>development</span> <span class='word'>board</span> <span class='word'>with</span> <span class='word'>fewer</span> <span class='word'>peripherals</span> <span class='word'>than</span> <span class='word'>the</span> <span class='word'>DE1-SoC</span><span class='ignore'>.</span> <span class='word'>The</span> <span class='word'>board</span> <span class='word'>features</span> <span class='word'>a</span> <span class='word'>Xilinx</span> <span class='word'>Spartan</span> <span class='word'>6</span> <span class='word'>XC6LX9</span> <span class='word'>which</span> <span class='word'>has</span> <span class='word'>far</span> <span class='word'>fewer</span> <span class='word'>resources</span> <span class='word'>than</span> <span class='word'>the</span> <span class='word'>DE1-SoC's</span> <span class='word'>Cyclone</span> <span class='word'>V</span> <span class='word'>however</span> <span class='word'>it's</span> <span class='word'>simplicity</span> <span class='word'>and</span> <span class='word'>my</span> <span class='word'>familiarity</span> <span class='word'>with</span>&nbsp; <span class='word'>Xilinx's</span> <span class='word'>software</span> <span class='word'>suite</span> <span class='word'>will</span> <span class='word'>speed</span> <span class='word'>up</span> <span class='word'>development</span><span class='ignore'>.</span> <span class='word'>The</span> <span class='word'>development</span> <span class='word'>board</span> <span class='word'>is</span> <span class='word'>shown</span> <span class='word'>in</span> <span class='cmd'>\cref</span><span class='ignore'>{</span><span class='word'>fig</span><span class='ignore'>:</span><span class='word'>minispartan</span><span class='ignore'>}</span><span class='ignore'>.</span><br>
<br>
<span class='envir'>\begin</span><span class='envir'>{figure}</span><span class='option'>[h]</span><br>
<span class='exclcmd'>\centering</span> <br>
<span class='exclcmd'>\includegraphics</span><span class='option'>[width=10cm]</span><span class='ignore'>{</span><span class='ignore'>.</span><span class='ignore'>.</span><span class='ignore'>/</span><span class='ignore'>img</span><span class='ignore'>/</span><span class='ignore'>minispartan</span><span class='ignore'>}</span><br>
<span class='cmd'>\caption</span><span class='ignore'>{</span><span class='oword'>Minispartan-6</span><span class='ignore'>+</span> <span class='oword'>development</span> <span class='oword'>board</span> <span class='oword'>featuring</span> <span class='oword'>the</span> <span class='oword'>Xilinx</span> <span class='oword'>Spartan</span> <span class='oword'>6</span> <span class='oword'>XC6SLX9</span><span class='ignore'>.</span> <span class='oword'>Note</span> <span class='oword'>that</span> <span class='oword'>the</span> <span class='oword'>XC6SLX9</span> <span class='oword'>and</span> <span class='oword'>XC6SLX25</span> <span class='oword'>FPGAs</span> <span class='oword'>share</span> <span class='oword'>the</span> <span class='oword'>same</span> <span class='oword'>board</span><span class='ignore'>.</span> <span class='oword'>Image</span> <span class='oword'>source</span><span class='ignore'>:</span> <span class='cmd'>\cite</span><span class='ignore'>{</span><span class='ignore'>scarabhardware</span><span class='ignore'>}</span><span class='ignore'>.</span><span class='ignore'>}</span><br>
<span class='exclcmd'>\label</span><span class='ignore'>{</span><span class='ignore'>fig</span><span class='ignore'>:</span><span class='ignore'>minispartan</span><span class='ignore'>}</span><br>
<span class='envir'>\end</span><span class='envir'>{figure}</span><br>
<br>
<span class='cmd'>\subsection</span><span class='ignore'>{</span><span class='hword'>Software</span> <span class='hword'>Resources</span><span class='ignore'>}</span><br>
<span class='cmd'>\subsubsection</span><span class='ignore'>{</span><span class='hword'>Intel</span> <span class='hword'>Quartus</span><span class='ignore'>}</span><br>
<span class='word'>Intel</span> <span class='word'>Quartus</span> <span class='word'>Prime</span> <span class='word'>is</span> <span class='word'>a</span> <span class='word'>paid-for</span> <span class='word'>SoC</span><span class='ignore'>,</span> <span class='word'>CPLD</span><span class='ignore'>,</span> <span class='word'>and</span> <span class='word'>FPGA</span> <span class='word'>software</span> <span class='word'>suite</span> <span class='word'>targeting</span> <span class='word'>Intel's</span> <span class='word'>Stratix</span><span class='ignore'>,</span> <span class='word'>Arria</span><span class='ignore'>,</span> <span class='word'>and</span> <span class='word'>Cyclone</span> <span class='word'>based</span> <span class='word'>FPGAs</span><span class='ignore'>.</span> <span class='word'>The</span> <span class='word'>university</span> <span class='word'>provides</span> <span class='word'>student</span> <span class='word'>licences</span> <span class='word'>which</span> <span class='word'>will</span> <span class='word'>be</span> <span class='word'>used</span> <span class='word'>via</span> <span class='word'>VPN</span><span class='ignore'>.</span><br>
<br>
<br>
<span class='cmd'>\subsubsection</span><span class='ignore'>{</span><span class='hword'>Xilinx</span> <span class='hword'>ISE</span> <span class='hword'>Webpack</span><span class='ignore'>}</span><br>
<span class='word'>Xilinx</span> <span class='word'>ISE</span> <span class='word'>Webkpack</span> <span class='word'>is</span> <span class='word'>Xilinx's</span> <span class='word'>free</span> <span class='word'>software</span> <span class='word'>suite</span> <span class='word'>for</span> <span class='word'>FPGA</span> <span class='word'>development</span> <span class='word'>for</span> <span class='word'>Spartan</span> <span class='word'>6</span> <span class='word'>based</span> <span class='word'>FPGAs</span><span class='ignore'>.</span><br>
<span class='word'>Due</span> <span class='word'>to</span> <span class='word'>ISE's</span> <span class='word'>intuitive</span> <span class='word'>and</span> <span class='word'>fast</span> <span class='word'>work</span> <span class='word'>flow</span><span class='ignore'>,</span> <span class='word'>most</span> <span class='word'>of</span> <span class='word'>the</span> <span class='word'>initial</span> <span class='word'>simulation</span> <span class='word'>and</span> <span class='word'>verification</span> <span class='word'>processes</span> <span class='word'>will</span> <span class='word'>be</span> <span class='word'>performed</span> <span class='word'>using</span> <span class='word'>ISE</span><span class='ignore'>.</span> <span class='word'>This</span> <span class='word'>will</span> <span class='word'>greatly</span> <span class='word'>improve</span> <span class='word'>development</span> <span class='word'>times</span><span class='ignore'>.</span><br>
<br>
<span class='cmd'>\subsubsection</span><span class='ignore'>{</span><span class='hword'>Verilator</span><span class='ignore'>}</span><br>
<span class='word'>Verilator</span> <span class='word'>is</span> <span class='word'>an</span> <span class='word'>open-source</span> <span class='word'>Verilog</span> <span class='word'>to</span> <span class='word'>C</span><span class='ignore'>+</span><span class='ignore'>+</span> <span class='word'>transpiler</span> <span class='word'>which</span> <span class='word'>provides</span> <span class='word'>a</span> <span class='word'>C</span><span class='ignore'>+</span><span class='ignore'>+</span> <span class='word'>interface</span> <span class='word'>to</span> <span class='word'>simulate</span> <span class='word'>Verilog</span> <span class='word'>modules</span> <span class='word'>and</span> <span class='word'>read</span><span class='ignore'>/</span><span class='word'>write</span> <span class='word'>values</span> <span class='word'>similar</span> <span class='word'>to</span> <span class='word'>a</span> <span class='word'>test</span> <span class='word'>bench</span><span class='ignore'>.</span> <span class='word'>Verilator</span> <span class='word'>will</span> <span class='word'>be</span> <span class='word'>used</span> <span class='word'>for</span> <span class='word'>specific</span> <span class='word'>modules</span> <span class='word'>within</span> <span class='word'>the</span> <span class='word'>RISC</span> <span class='word'>core</span> <span class='word'>such</span> <span class='word'>as</span> <span class='word'>the</span> <span class='word'>ALU</span> <span class='word'>and</span> <span class='word'>decoder</span> <span class='word'>as</span> <span class='word'>Verilator</span> <span class='word'>is</span> <span class='word'>useful</span> <span class='word'>when</span> <span class='word'>performing</span> <span class='word'>exhaustive</span> <span class='word'>verification</span><span class='ignore'>.</span><br>
<br>
<span class='cmd'>\section</span><span class='ignore'>{</span><span class='hword'>Legal</span> <span class='hword'>and</span> <span class='hword'>Ethical</span> <span class='hword'>Considerations</span><span class='ignore'>}</span><br>
<span class='word'>The</span> <span class='word'>RISC</span> <span class='word'>core</span> <span class='word'>is</span> <span class='word'>designed</span> <span class='word'>to</span> <span class='word'>be</span> <span class='word'>used</span> <span class='word'>as</span> <span class='word'>an</span> <span class='word'>academic</span> <span class='word'>research</span> <span class='word'>and</span> <span class='word'>educational</span> <span class='word'>tool</span> <span class='word'>to</span> <span class='word'>aid</span> <span class='word'>learning</span> <span class='word'>and</span> <span class='word'>understanding</span> <span class='word'>of</span> <span class='word'>RISC</span> <span class='word'>and</span> <span class='word'>multi-core</span> <span class='word'>machines</span><span class='ignore'>.</span> <span class='word'>It</span> <span class='word'>should</span> <span class='word'>not</span> <span class='word'>be</span> <span class='word'>use</span> <span class='word'>for</span> <span class='word'>roles</span> <span class='word'>where</span> <span class='word'>mission</span> <span class='word'>critical</span> <span class='word'>or</span> <span class='word'>safety</span> <span class='word'>is</span> <span class='word'>a</span> <span class='word'>factor</span><span class='ignore'>.</span> <br>
<br>
<span class='word'>The</span> <span class='word'>processor</span> <span class='word'>does</span> <span class='word'>not</span> <span class='word'>provide</span> <span class='word'>any</span> <span class='word'>memory</span> <span class='word'>protection</span> <span class='word'>features</span> <span class='word'>and</span> <span class='word'>any</span> <span class='word'>software</span> <span class='word'>running</span> <span class='word'>on</span> <span class='word'>the</span> <span class='word'>processor</span> <span class='word'>has</span> <span class='word'>full</span> <span class='word'>access</span> <span class='word'>to</span> <span class='word'>all</span> <span class='word'>memory</span><span class='ignore'>.</span><br>
<br>
<span class='word'>The</span> <span class='word'>processor</span> <span class='word'>does</span> <span class='word'>not</span> <span class='word'>store</span><span class='ignore'>/</span><span class='word'>track</span><span class='ignore'>/</span><span class='word'>predict</span> <span class='word'>software</span> <span class='word'>instructions</span><span class='ignore'>.</span> <span class='word'>The</span> <span class='word'>processor</span> <span class='word'>uses</span> <span class='word'>pipelining</span> <span class='word'>techniques</span> <span class='word'>to</span> <span class='word'>improve</span> <span class='word'>performance</span> <span class='word'>which</span> <span class='word'>results</span> <span class='word'>in</span> <span class='word'>future</span> <span class='word'>instructions</span> <span class='word'>entering</span> <span class='word'>the</span> <span class='word'>pipeline</span> <span class='word'>even</span> <span class='word'>if</span> <span class='word'>the</span> <span class='word'>software's</span> <span class='word'>logical</span> <span class='word'>sequence</span> <span class='word'>does</span> <span class='word'>not</span> <span class='word'>include</span> <span class='word'>these</span> <span class='word'>instructions</span><span class='ignore'>.</span> <span class='word'>This</span> <span class='word'>could</span> <span class='word'>result</span> <span class='word'>in</span> <span class='word'>security</span> <span class='word'>vulnerabilities</span> <span class='word'>similar</span> <span class='word'>to</span> <span class='word'>Intel's</span> <span class='word'>Spectre</span> <span class='word'>vulnerability</span> <span class='cmd'>\cite</span><span class='ignore'>{</span><span class='ignore'>kocher2018spectre</span><span class='ignore'>}</span><span class='ignore'>.</span><br>
</p></div>
<div class='count'>
<ul class='count'>
<li class='header'>Included file: ./chapter_proj.tex</li>
<li>Encoding: ascii</li>
<li>Words in text: 1326</li>
<li>Words in headers: 93</li>
<li>Words outside text (captions, etc.): 52</li>
<li>Number of headers: 25</li>
<li>Number of floats/tables/figures: 4</li>
<li>Number of math inlines: 0</li>
<li>Number of math displayed: 0</li>
<li>Subcounts:</li>
<span class='subcount'>
<li class='fielddesc'>&nbsp; text+headers+captions (#headers/#floats/#inlines/#displayed)</li>
  <li>11+2+0 (1/0/0/0) Chapter: Project Overview</li>
  <li>46+2+0 (1/0/0/0) Section: Project Deliverables</li>
  <li>318+3+0 (1/0/0/0) Subsection: Core Deliverables (CD)</li>
  <li>136+3+0 (1/0/0/0) Subsection: Extended Deliverables (ED)</li>
  <li>0+2+0 (1/0/0/0) Section: Project Timeline</li>
  <li>61+2+9 (1/1/0/0) Subsection: Project Stages</li>
  <li>310+54+0 (9/0/0/0) Subsection: Project Stage Detail</li>
  <li>12+1+6 (1/1/0/0) Subsection: Timeline</li>
  <li>13+1+0 (1/0/0/0) Section: Resources</li>
  <li>185+11+37 (3/2/0/0) Subsection: Hardware Resources</li>
  <li>125+8+0 (4/0/0/0) Subsection: Software Resources</li>
  <li>109+4+0 (1/0/0/0) Section: Legal and Ethical Considerations</li>
</span>
</ul>
</div>
<h2>File: ./chapter_singlecore.tex</h2>
<div class='parse'><p>
<br>
<span class='cmd'>\chapter</span><span class='ignore'>{</span><span class='hword'>Single-core</span> <span class='hword'>Design</span><span class='ignore'>}</span><br>
<span class='cmd'>\label</span><span class='ignore'>{</span><span class='ignore'>sec</span><span class='ignore'>:</span><span class='ignore'>singlecore</span><span class='ignore'>}</span><br>
<span class='cmd'>\startcontents</span><span class='option'>[chapters]</span><br>
<span class='cmd'>\printcontents</span><span class='option'>[chapters]</span><span class='ignore'>{</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='word'>1</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='ignore'>}</span><br>
<br>
<span class='cmd'>\section</span><span class='ignore'>{</span><span class='hword'>Introduction</span><span class='ignore'>}</span><br>
<span class='word'>While</span> <span class='word'>the</span> <span class='word'>majority</span> <span class='word'>of</span> <span class='word'>this</span> <span class='word'>report</span> <span class='word'>will</span> <span class='word'>focus</span> <span class='word'>on</span> <span class='word'>the</span> <span class='word'>multi-processing</span> <span class='word'>functionality</span> <span class='word'>of</span> <span class='word'>this</span> <span class='word'>project</span><span class='ignore'>,</span> <span class='word'>it</span> <span class='word'>is</span> <span class='word'>important</span> <span class='word'>understand</span> <span class='word'>the</span> <span class='word'>design</span> <span class='word'>decisions</span> <span class='word'>of</span> <span class='word'>the</span> <span class='word'>single</span> <span class='word'>core</span> <span class='word'>to</span> <span class='word'>understand</span> <span class='word'>the</span> <span class='word'>features</span> <span class='word'>and</span> <span class='word'>limitations</span> <span class='word'>of</span> <span class='word'>the</span> <span class='word'>multi-core</span> <span class='word'>system-on-chip</span> <span class='word'>as</span> <span class='word'>a</span> <span class='word'>whole</span><span class='ignore'>.</span><br>
<br>
<span class='cmd'>\section</span><span class='ignore'>{</span><span class='hword'>Design</span> <span class='hword'>and</span> <span class='hword'>Implementation</span><span class='ignore'>}</span><br>
<span class='word'>The</span> <span class='word'>single-core</span> <span class='word'>design</span> <span class='word'>is</span> <span class='word'>a</span> <span class='word'>traditional</span> <span class='word'>5-stage</span> <span class='word'>RISC</span> <span class='word'>processor</span> <span class='ignore'>(</span><span class='word'>fetch</span><span class='ignore'>,</span> <span class='word'>decode</span><span class='ignore'>,</span> <span class='word'>execute</span><span class='ignore'>,</span> <span class='word'>memory</span><span class='ignore'>,</span> <span class='word'>write-back</span><span class='ignore'>)</span><span class='ignore'>.</span> <span class='word'>The</span> <span class='word'>core</span> <span class='word'>uses</span> <span class='word'>separate</span> <span class='word'>instruction</span> <span class='word'>and</span> <span class='word'>data</span> <span class='word'>memories</span> <span class='word'>in</span> <span class='word'>the</span> <span class='word'>style</span> <span class='word'>of</span> <span class='word'>a</span> <span class='word'>Harvard</span> <span class='word'>architecture</span><span class='ignore'>.</span><br>
<br>
<span class='word'>To</span> <span class='word'>satisfy</span> <span class='cmd'>\ref</span><span class='ignore'>{</span><span class='ignore'>cd</span><span class='ignore'>:</span><span class='ignore'>vendor</span><span class='ignore'>}</span><span class='ignore'>,</span> <span class='word'>the</span> <span class='word'>Verilog</span> <span class='word'>code</span> <span class='word'>will</span> <span class='word'>be</span> <span class='word'>self-contained</span> <span class='word'>in</span> <span class='word'>a</span> <span class='word'>single</span> <span class='word'>file</span><span class='ignore'>.</span> <span class='word'>This</span> <span class='word'>reduces</span> <span class='word'>the</span> <span class='word'>hierarchical</span> <span class='word'>complexity</span> <span class='word'>and</span> <span class='word'>eases</span> <span class='word'>cross-vendor</span> <span class='word'>project</span> <span class='word'>set-up</span> <span class='word'>as</span> <span class='word'>only</span> <span class='word'>a</span> <span class='word'>single</span> <span class='word'>file</span> <span class='word'>is</span> <span class='word'>required</span> <span class='word'>to</span> <span class='word'>be</span> <span class='word'>included</span><span class='ignore'>.</span> <br>
<br>
<span class='envir'>\begin</span><span class='envir'>{figure}</span><span class='option'>[H]</span><br>
<span class='exclcmd'>\centering</span> <br>
<span class='exclcmd'>\includegraphics</span><span class='option'>[width=10cm]</span><span class='ignore'>{</span><span class='ignore'>.</span><span class='ignore'>.</span><span class='ignore'>/</span><span class='ignore'>img</span><span class='ignore'>/</span><span class='ignore'>risc</span><span class='ignore'>}</span><br>
<span class='cmd'>\caption</span><span class='ignore'>{</span><span class='oword'>Vmicro16</span> <span class='oword'>RISC</span> <span class='oword'>5-stage</span> <span class='oword'>RTL</span> <span class='oword'>diagram</span> <span class='oword'>showing</span><span class='ignore'>:</span> <span class='oword'>instruction</span> <span class='oword'>pipelining</span> <span class='ignore'>(</span><span class='oword'>data</span> <span class='oword'>passed</span> <span class='oword'>forward</span> <span class='oword'>through</span> <span class='oword'>clocked</span> <span class='oword'>register</span> <span class='oword'>banks</span> <span class='oword'>at</span> <span class='oword'>each</span> <span class='oword'>stage</span><span class='ignore'>)</span><span class='ignore'>;</span> <span class='oword'>branch</span> <span class='oword'>address</span> <span class='oword'>calculation</span><span class='ignore'>;</span> <span class='oword'>ALU</span> <span class='oword'>operand</span> <span class='oword'>calculation</span> <span class='ignore'>(</span><span class='oword'>rd2</span> <span class='oword'>or</span> <span class='oword'>imm</span><span class='ignore'>)</span><span class='ignore'>;</span> <span class='oword'>and</span> <span class='oword'>program</span> <span class='oword'>counter</span> <span class='oword'>incrementing</span><span class='ignore'>.</span><span class='ignore'>}</span><br>
<span class='exclcmd'>\label</span><span class='ignore'>{</span><span class='ignore'>fig</span><span class='ignore'>:</span><span class='ignore'>risc</span><span class='ignore'>}</span><br>
<span class='envir'>\end</span><span class='envir'>{figure}</span><br>
<br>
<span class='word'>A</span> <span class='word'>small</span> <span class='word'>reduction</span> <span class='word'>in</span> <span class='word'>size</span> <span class='word'>within</span> <span class='word'>the</span> <span class='word'>single-core</span> <span class='word'>will</span> <span class='word'>result</span> <span class='word'>in</span> <span class='word'>substantial</span> <span class='word'>size</span> <span class='word'>reductions</span> <span class='word'>in</span> <br>
<br>
<span class='cmd'>\subsection</span><span class='ignore'>{</span><span class='hword'>Instruction</span> <span class='hword'>Set</span> <span class='hword'>Architecture</span><span class='ignore'>}</span><br>
<span class='envir'>\begin</span><span class='envir'>{quotation}</span><br>
<span class='cmd'>\noindent</span> <span class='word'>Core</span> <span class='word'>deliverable</span> <span class='cmd'>\ref</span><span class='ignore'>{</span><span class='ignore'>cd</span><span class='ignore'>:</span><span class='ignore'>isa</span><span class='ignore'>}</span> <span class='word'>details</span> <span class='word'>the</span> <span class='word'>background</span> <span class='word'>for</span> <span class='word'>the</span> <span class='word'>requirement</span> <span class='word'>of</span> <span class='word'>a</span> <span class='word'>custom</span> <span class='word'>instruction</span> <span class='word'>set</span> <span class='word'>architecture</span><span class='ignore'>.</span> <br>
<span class='word'>The</span> <span class='word'>16-bit</span> <span class='word'>instruction</span> <span class='word'>set</span> <span class='word'>listing</span> <span class='word'>is</span> <span class='word'>shown</span> <span class='word'>in</span> <span class='cmd'>\cref</span><span class='ignore'>{</span><span class='word'>fig</span><span class='ignore'>:</span><span class='word'>isa</span><span class='ignore'>}</span><span class='ignore'>.</span><br>
<span class='envir'>\end</span><span class='envir'>{quotation}</span><br>
<br>
<span class='word'>In</span> <span class='word'>this</span> <span class='word'>proposed</span> <span class='word'>architecture</span><span class='ignore'>,</span> <span class='word'>most</span> <span class='word'>instructions</span> <span class='word'>are</span> <span class='cmd'>\textit</span><span class='ignore'>{</span><span class='word'>destructive</span><span class='ignore'>}</span> <span class='word'>meaning</span> <span class='word'>that</span> <span class='word'>source</span> <span class='word'>operands</span> <span class='word'>also</span> <span class='word'>act</span> <span class='word'>as</span> <span class='word'>the</span> <span class='word'>destination</span><span class='ignore'>,</span> <span class='word'>hence</span> <span class='word'>effectively</span> <span class='cmd'>\textit</span><span class='ignore'>{</span><span class='word'>destroying</span><span class='ignore'>}</span> <span class='word'>the</span> <span class='word'>original</span> <span class='word'>source</span> <span class='word'>data</span><span class='ignore'>.</span> <span class='word'>This</span> <span class='word'>design</span> <span class='word'>decision</span> <span class='word'>reduces</span> <span class='word'>the</span> <span class='word'>complexity</span> <span class='word'>of</span> <span class='word'>the</span> <span class='word'>ISA</span> <span class='word'>as</span> <span class='word'>traditional</span> <span class='word'>three</span> <span class='word'>operand</span> <span class='word'>instructions</span><span class='ignore'>,</span> <span class='word'>for</span> <span class='word'>example</span> <span class='cmd'>\verb</span><span class='cmd'>|</span><span class='ignore'>add r0, r0, r1</span><span class='cmd'>|</span><span class='ignore'>,</span> <span class='word'>can</span> <span class='word'>be</span> <span class='word'>encoded</span> <span class='word'>using</span> <span class='word'>only</span> <span class='word'>two</span> <span class='word'>operands</span> <span class='cmd'>\verb</span><span class='cmd'>|</span><span class='ignore'>add r0, r1</span><span class='cmd'>|</span><span class='ignore'>.</span> <span class='word'>However</span><span class='ignore'>,</span> <span class='word'>this</span> <span class='word'>does</span> <span class='word'>increase</span> <span class='word'>the</span> <span class='word'>complexity</span> <span class='word'>of</span> <span class='word'>compilers</span> <span class='word'>as</span> <span class='word'>they</span> <span class='word'>may</span> <span class='word'>need</span> <span class='word'>to</span> <span class='word'>make</span> <span class='word'>temporary</span> <span class='word'>copies</span> <span class='word'>of</span> <span class='word'>registers</span> <span class='word'>as</span> <span class='word'>the</span> <span class='word'>instructions</span> <span class='word'>will</span> <span class='cmd'>\textit</span><span class='ignore'>{</span><span class='word'>destroy</span><span class='ignore'>}</span> <span class='word'>the</span> <span class='word'>original</span> <span class='word'>source</span> <span class='word'>data</span><span class='ignore'>.</span><br>
<br>
<span class='word'>The</span> <span class='word'>instruction</span> <span class='word'>set</span> <span class='word'>is</span> <span class='word'>split</span> <span class='word'>into</span> <span class='word'>7</span> <span class='word'>categories</span> <span class='ignore'>(</span><span class='word'>highlighted</span> <span class='word'>by</span> <span class='word'>colours</span> <span class='word'>in</span> <span class='cmd'>\cref</span><span class='ignore'>{</span><span class='word'>fig</span><span class='ignore'>:</span><span class='word'>isa</span><span class='ignore'>}</span><span class='ignore'>)</span><span class='ignore'>:</span><br>
<span class='envir'>\begin</span><span class='envir'>{itemize}</span><br>
<span class='cmd'>\item</span> <span class='word'>Special</span> <span class='word'>instructions</span><span class='ignore'>,</span> <span class='word'>such</span> <span class='word'>as</span> <span class='word'>halting</span> <span class='word'>and</span> <span class='word'>interrupt</span> <span class='word'>returns</span><span class='ignore'>;</span><br>
<span class='cmd'>\item</span> <span class='word'>Bitwise</span> <span class='word'>operations</span><span class='ignore'>,</span> <span class='word'>such</span> <span class='word'>as</span> <span class='word'>XOR</span> <span class='word'>and</span> <span class='word'>AND</span><span class='ignore'>;</span><br>
<span class='cmd'>\item</span> <span class='word'>Signed</span> <span class='word'>arithmetic</span><span class='ignore'>;</span><br>
<span class='cmd'>\item</span> <span class='word'>Unsigned</span> <span class='word'>arithmetic</span><span class='ignore'>;</span><br>
<span class='cmd'>\item</span> <span class='word'>Conditional</span> <span class='word'>branches</span> <span class='word'>and</span> <span class='word'>compare</span> <span class='word'>instructions</span><span class='ignore'>;</span><br>
<span class='cmd'>\item</span> <span class='word'>and</span> <span class='word'>Load</span><span class='ignore'>/</span><span class='word'>store</span> <span class='word'>instructions</span><span class='ignore'>,</span> <span class='word'>with</span> <span class='word'>their</span> <span class='word'>atomic</span> <span class='word'>equivalents</span><span class='ignore'>.</span><br>
<span class='envir'>\end</span><span class='envir'>{itemize}</span><br>
<br>
<span class='comment'>%The instruction set supports bitwise operations such as OR, XOR, AND, NOT, and left and right shifts. It was decided to provide these functions to enable software to easily create large 16-bit values which is expensive with only an 8-bit immediate.</span><br>
<br>
<span class='cmd'>\subsection</span><span class='ignore'>{</span><span class='hword'>Memory</span> <span class='hword'>Management</span> <span class='hword'>Unit</span><span class='ignore'>}</span><br>
<span class='word'>It</span> <span class='word'>was</span> <span class='word'>decided</span> <span class='word'>to</span> <span class='word'>use</span> <span class='word'>a</span> <span class='word'>memory</span> <span class='word'>management</span> <span class='word'>unit</span> <span class='ignore'>(</span><span class='word'>MMU</span><span class='ignore'>)</span> <span class='word'>to</span> <span class='word'>make</span> <span class='word'>it</span> <span class='word'>easier</span> <span class='word'>and</span> <span class='word'>extensible</span> <span class='word'>to</span> <span class='word'>communicate</span> <span class='word'>with</span> <span class='word'>external</span> <span class='word'>peripherals</span> <span class='word'>or</span> <span class='word'>additional</span> <span class='word'>registers</span><span class='ignore'>.</span> <span class='word'>This</span> <span class='word'>method</span> <span class='word'>transparently</span> <span class='word'>uses</span> <span class='word'>the</span> <span class='word'>existing</span> <span class='cmd'>\verb</span><span class='cmd'>|</span><span class='ignore'>LW[EX]</span><span class='cmd'>|</span><span class='ignore'>/</span><span class='cmd'>\verb</span><span class='cmd'>|</span><span class='ignore'>SW[EX]</span><span class='cmd'>|</span> <span class='word'>to</span> <span class='word'>easily</span> <span class='word'>provide</span> <span class='word'>an</span> <span class='word'>arbitrary</span> <span class='word'>number</span> <span class='word'>of</span> <span class='word'>peripherals</span><span class='ignore'>/</span><span class='word'>special</span> <span class='word'>purpose</span> <span class='word'>addresses</span> <span class='word'>to</span> <span class='word'>the</span> <span class='word'>software</span> <span class='word'>running</span> <span class='word'>on</span> <span class='word'>the</span> <span class='word'>processor</span><span class='ignore'>.</span><br>
<br>
<span class='cmd'>\subsection</span><span class='ignore'>{</span><span class='hword'>Instruction</span> <span class='hword'>and</span> <span class='hword'>Data</span> <span class='hword'>Memory</span><span class='ignore'>}</span><br>
<span class='word'>The</span> <span class='word'>design</span> <span class='word'>uses</span> <span class='word'>separate</span> <span class='word'>instruction</span> <span class='word'>and</span> <span class='word'>data</span> <span class='word'>memories</span> <span class='word'>similar</span> <span class='word'>to</span> <span class='word'>a</span> <span class='word'>Harvard</span> <span class='word'>architecture</span> <span class='word'>computer</span><span class='ignore'>.</span> <span class='word'>This</span> <span class='word'>architecture</span> <span class='word'>was</span> <span class='word'>chosen</span> <span class='word'>due</span> <span class='word'>because</span> <span class='word'>it</span> <span class='word'>is</span> <span class='word'>generally</span> <span class='word'>easier</span> <span class='word'>to</span> <span class='word'>implement</span><span class='ignore'>,</span> <span class='word'>however</span> <span class='word'>later</span> <span class='word'>resulted</span> <span class='word'>in</span> <span class='word'>design</span> <span class='word'>challenges</span> <span class='word'>in</span> <span class='word'>large</span> <span class='word'>multi-core</span> <span class='word'>designs</span><span class='ignore'>.</span> <span class='word'>This</span> <span class='word'>is</span> <span class='word'>discussed</span> <span class='word'>later</span> <span class='word'>in</span> <span class='word'>the</span> <span class='word'>report</span><span class='ignore'>.</span><br>
<br>
<span class='word'>Each</span> <span class='word'>single-core</span> <span class='word'>has</span> <span class='word'>it's</span> <span class='word'>own</span> <span class='cmd'>\textit</span><span class='ignore'>{</span><span class='word'>scratch</span><span class='ignore'>}</span> <span class='word'>memory</span> <span class='ignore'>-</span><span class='ignore'>-</span> <span class='word'>a</span> <span class='word'>small</span> <span class='word'>RAM-like</span> <span class='word'>memory</span> <span class='word'>which</span> <span class='word'>can</span> <span class='word'>be</span> <span class='word'>used</span> <span class='word'>for</span> <span class='word'>stack-space</span> <span class='word'>and</span> <span class='word'>arrays</span> <span class='word'>too</span> <span class='word'>large</span> <span class='word'>to</span> <span class='word'>fit</span> <span class='word'>into</span> <span class='word'>the</span> <span class='word'>8</span> <span class='word'>registers</span><span class='ignore'>.</span> <span class='word'>These</span> <span class='word'>memories</span> <span class='word'>are</span> <span class='word'>provided</span> <span class='word'>as</span> <span class='word'>is</span> <span class='ignore'>-</span><span class='ignore'>-</span> <span class='word'>meaning</span> <span class='word'>it's</span> <span class='word'>up</span> <span class='word'>to</span> <span class='word'>the</span> <span class='word'>software</span> <span class='word'>to</span> <span class='word'>implement</span> <span class='word'>and</span> <span class='word'>provide</span> <span class='word'>any</span> <span class='word'>stack-frame</span><span class='ignore'>,</span> <span class='word'>function</span><span class='ignore'>,</span> <span class='word'>and</span> <span class='word'>calling</span><span class='ignore'>,</span> <span class='word'>functionality</span><span class='ignore'>.</span><br>
<span class='word'>Each</span> <span class='word'>core</span> <span class='word'>also</span> <span class='word'>features</span> <span class='word'>it's</span> <span class='word'>own</span> <span class='word'>read-only</span> <span class='word'>instruction</span> <span class='word'>memory</span> <span class='word'>that</span> <span class='word'>is</span> <span class='word'>programmed</span> <span class='word'>at</span> <span class='word'>compile</span> <span class='word'>time</span> <span class='word'>of</span> <span class='word'>the</span> <span class='word'>design</span><span class='ignore'>,</span> <span class='word'>or</span> <span class='word'>via</span> <span class='word'>the</span> <span class='cmd'>\verb</span><span class='cmd'>|</span><span class='ignore'>UART0</span><span class='cmd'>|</span> <span class='word'>reciever</span> <span class='word'>interface</span> <span class='ignore'>(</span><span class='word'>discussed</span> <span class='word'>later</span><span class='ignore'>)</span><span class='ignore'>.</span> <span class='word'>Both</span> <span class='word'>of</span> <span class='word'>these</span> <span class='word'>memories</span> <span class='word'>map</span> <span class='word'>onto</span> <span class='word'>synchronous</span><span class='ignore'>,</span> <span class='word'>read-first</span><span class='ignore'>,</span> <span class='word'>single-port</span><span class='ignore'>,</span> <span class='word'>FPGA</span> <span class='word'>block</span> <span class='word'>RAMs</span> <span class='word'>to</span> <span class='word'>minimise</span> <span class='word'>LUT</span> <span class='word'>requirements</span><span class='ignore'>.</span><br>
<br>
<span class='word'>Users</span> <span class='word'>can</span> <span class='word'>customise</span> <span class='word'>the</span> <span class='word'>size</span> <span class='word'>of</span> <span class='word'>these</span> <span class='word'>memories</span> <span class='word'>by</span> <span class='word'>tweaking</span> <span class='word'>the</span> <span class='word'>following</span> <span class='word'>parameters</span> <span class='word'>in</span> <span class='word'>the</span> <span class='cmd'>\verb</span><span class='cmd'>|</span><span class='ignore'>vmicro16_soc_config.v</span><span class='cmd'>|</span> <span class='word'>file</span><span class='ignore'>:</span> <span class='cmd'>\verb</span><span class='cmd'>|</span><span class='ignore'>DEF_MEM_INSTR_DEPTH</span><span class='cmd'>|</span> <span class='word'>for</span> <span class='word'>the</span> <span class='word'>instruction</span> <span class='word'>memory</span><span class='ignore'>,</span> <span class='word'>and</span> <span class='cmd'>\verb</span><span class='cmd'>|</span><span class='ignore'>DEF_MEM_SCRATCH_DEPTH</span><span class='cmd'>|</span> <span class='word'>for</span> <span class='word'>the</span> <span class='word'>scratch</span> <span class='word'>memory</span><span class='ignore'>.</span><br>
<br>
<br>
<span class='cmd'>\subsection</span><span class='ignore'>{</span><span class='hword'>ALU</span> <span class='hword'>Design</span><span class='ignore'>}</span><br>
<span class='word'>The</span> <span class='word'>Vmicro16's</span> <span class='word'>ALU</span> <span class='word'>is</span> <span class='word'>an</span> <span class='word'>asynchronous</span> <span class='word'>module</span> <span class='word'>that</span> <span class='word'>has</span> <span class='word'>3</span> <span class='word'>inputs</span><span class='ignore'>:</span> <span class='word'>data</span> <span class='word'>a</span><span class='ignore'>;</span> <span class='word'>data</span> <span class='word'>b</span><span class='ignore'>;</span> <span class='word'>and</span> <span class='word'>opcode</span> <span class='word'>op</span><span class='ignore'>;</span> <span class='word'>and</span> <span class='word'>outputs</span> <span class='word'>data</span> <span class='word'>c</span><span class='ignore'>.</span><br>
<span class='word'>The</span> <span class='word'>ALU</span> <span class='word'>is</span> <span class='word'>able</span> <span class='word'>to</span> <span class='word'>operate</span> <span class='word'>on</span> <span class='word'>both</span> <span class='word'>register</span> <span class='word'>data</span> <span class='ignore'>(</span><span class='cmd'>\verb</span><span class='cmd'>|</span><span class='ignore'>rd1</span><span class='cmd'>|</span> <span class='word'>and</span> <span class='cmd'>\verb</span><span class='cmd'>|</span><span class='ignore'>rd2</span><span class='cmd'>|</span><span class='ignore'>)</span> <span class='word'>and</span> <span class='word'>immediate</span> <span class='word'>values</span><span class='ignore'>.</span> <span class='word'>A</span> <span class='word'>switch</span> <span class='word'>is</span> <span class='word'>used</span> <span class='word'>to</span> <span class='word'>set</span> <span class='word'>the</span> <span class='cmd'>\verb</span><span class='cmd'>|</span><span class='ignore'>b</span><span class='cmd'>|</span> <span class='word'>input</span> <span class='word'>to</span> <span class='word'>either</span> <span class='word'>the</span> <span class='cmd'>\verb</span><span class='cmd'>|</span><span class='ignore'>rd2</span><span class='cmd'>|</span> <span class='word'>or</span> <span class='cmd'>\verb</span><span class='cmd'>|</span><span class='ignore'>imm</span><span class='cmd'>|</span> <span class='word'>value</span> <span class='word'>from</span> <span class='word'>the</span> <span class='word'>previous</span> <span class='word'>stage</span><span class='ignore'>.</span><br>
<br>
<span class='envir'>\begin</span><span class='envir'>{figure}</span><span class='option'>[H]</span><br>
<span class='exclcmd'>\centering</span> <br>
<span class='exclcmd'>\includegraphics</span><span class='option'>[width=10cm]</span><span class='ignore'>{</span><span class='ignore'>.</span><span class='ignore'>.</span><span class='ignore'>/</span><span class='ignore'>img</span><span class='ignore'>/</span><span class='ignore'>alu</span><span class='ignore'>}</span><br>
<span class='cmd'>\caption</span><span class='ignore'>{</span><span class='oword'>Vmicro16</span> <span class='oword'>ALU</span> <span class='oword'>diagram</span> <span class='oword'>showing</span> <span class='oword'>clocked</span> <span class='oword'>inputs</span> <span class='oword'>from</span> <span class='oword'>the</span> <span class='oword'>previous</span> <span class='oword'>IDEX</span> <span class='oword'>stage</span> <span class='oword'>being</span> <span class='ignore'>}</span><br>
<span class='exclcmd'>\label</span><span class='ignore'>{</span><span class='ignore'>fig</span><span class='ignore'>:</span><span class='ignore'>alu</span><span class='ignore'>}</span><br>
<span class='envir'>\end</span><span class='envir'>{figure}</span><br>
<br>
<span class='word'>The</span> <span class='word'>ALU</span> <span class='word'>also</span> <span class='word'>performs</span> <span class='word'>comparison</span> <span class='ignore'>(</span><span class='cmd'>\verb</span><span class='cmd'>|</span><span class='ignore'>CMP</span><span class='cmd'>|</span><span class='ignore'>)</span> <span class='word'>operations</span> <span class='word'>in</span> <span class='word'>which</span> <span class='word'>it</span> <span class='word'>returns</span> <span class='word'>flags</span> <span class='word'>similar</span> <span class='word'>to</span> <span class='word'>X86's</span> <span class='word'>overflow</span><span class='ignore'>,</span> <span class='word'>signed</span><span class='ignore'>,</span> <span class='word'>and</span> <span class='word'>zero</span><span class='ignore'>,</span> <span class='word'>flags</span><span class='ignore'>.</span> <span class='word'>The</span> <span class='word'>combination</span> <span class='word'>of</span> <span class='word'>these</span> <span class='word'>flags</span> <span class='word'>can</span> <span class='word'>be</span> <span class='word'>used</span> <span class='word'>to</span> <span class='word'>easily</span> <span class='word'>compute</span> <span class='word'>relationships</span> <span class='word'>between</span> <span class='word'>the</span> <span class='word'>two</span> <span class='word'>input</span> <span class='word'>operands</span><span class='ignore'>.</span> <span class='word'>For</span> <span class='word'>example</span><span class='ignore'>,</span> <span class='word'>if</span> <span class='word'>the</span> <span class='word'>zero</span> <span class='word'>flag</span> <span class='word'>is</span> <span class='word'>not</span> <span class='word'>equal</span> <span class='word'>to</span> <span class='word'>the</span> <span class='word'>signed</span> <span class='word'>flag</span><span class='ignore'>,</span> <span class='word'>then</span> <span class='word'>the</span> <span class='word'>relationship</span> <span class='word'>between</span> <span class='word'>inputs</span> <span class='mathgroup'>$</span><span class='math'>a</span><span class='mathgroup'>$</span> <span class='word'>and</span> <span class='mathgroup'>$</span><span class='math'>b</span><span class='mathgroup'>$</span> <span class='word'>is</span> <span class='word'>that</span> <span class='mathgroup'>$</span><span class='math'>a</span> <span class='math'>&lt;</span> <span class='math'>b</span><span class='mathgroup'>$</span><span class='ignore'>.</span><br>
<br>
<span class='envir'>\begin</span><span class='envir'>{listing}</span><span class='option'>[H]</span><br>
<span class='cmd'>\centering</span><br>
<span class='envir'>\begin</span><span class='envir'>{minted}</span><span class='option'>[fontsize=\scriptsize,linenos,baselinestretch=0.5,frame=single,framesep=10pt]</span><span class='ignore'>{</span><span class='word'>verilog</span><span class='ignore'>}</span><br>
<span class='word'>module</span> <span class='word'>branch</span> <span class='ignore'>(</span><br>
&nbsp; &nbsp; <span class='word'>input</span> <span class='ignore'>[</span><span class='word'>3</span><span class='ignore'>:</span><span class='word'>0</span><span class='ignore'>]</span> <span class='word'>flags</span><span class='ignore'>,</span><br>
&nbsp; &nbsp; <span class='word'>input</span> <span class='ignore'>[</span><span class='word'>7</span><span class='ignore'>:</span><span class='word'>0</span><span class='ignore'>]</span> <span class='word'>cond</span><span class='ignore'>,</span><br>
&nbsp; &nbsp; <span class='word'>output</span> <span class='word'>reg</span>&nbsp; <span class='word'>en</span><br>
<span class='ignore'>)</span><span class='ignore'>;</span><br>
&nbsp; &nbsp; <span class='word'>always</span> <span class='ignore'>@</span><span class='ignore'>(</span><span class='ignore'>*</span><span class='ignore'>)</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; <span class='word'>case</span> <span class='ignore'>(</span><span class='word'>cond</span><span class='ignore'>)</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='ignore'>`</span><span class='word'>VMICRO16</span><span class='ignore'>_</span><span class='word'>OP</span><span class='ignore'>_</span><span class='word'>BR</span><span class='ignore'>_</span><span class='word'>U</span><span class='ignore'>:</span>&nbsp; <span class='word'>en</span> <span class='ignore'>=</span> <span class='word'>1</span><span class='ignore'>;</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='ignore'>`</span><span class='word'>VMICRO16</span><span class='ignore'>_</span><span class='word'>OP</span><span class='ignore'>_</span><span class='word'>BR</span><span class='ignore'>_</span><span class='word'>E</span><span class='ignore'>:</span>&nbsp; <span class='word'>en</span> <span class='ignore'>=</span> <span class='ignore'>(</span><span class='word'>flags</span><span class='ignore'>[</span><span class='ignore'>`</span><span class='word'>VMICRO16</span><span class='ignore'>_</span><span class='word'>SFLAG</span><span class='ignore'>_</span><span class='word'>Z</span><span class='ignore'>]</span> <span class='ignore'>=</span><span class='ignore'>=</span> <span class='word'>1</span><span class='ignore'>)</span><span class='ignore'>;</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='ignore'>`</span><span class='word'>VMICRO16</span><span class='ignore'>_</span><span class='word'>OP</span><span class='ignore'>_</span><span class='word'>BR</span><span class='ignore'>_</span><span class='word'>NE</span><span class='ignore'>:</span> <span class='word'>en</span> <span class='ignore'>=</span> <span class='ignore'>(</span><span class='word'>flags</span><span class='ignore'>[</span><span class='ignore'>`</span><span class='word'>VMICRO16</span><span class='ignore'>_</span><span class='word'>SFLAG</span><span class='ignore'>_</span><span class='word'>Z</span><span class='ignore'>]</span> <span class='ignore'>=</span><span class='ignore'>=</span> <span class='word'>0</span><span class='ignore'>)</span><span class='ignore'>;</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='ignore'>`</span><span class='word'>VMICRO16</span><span class='ignore'>_</span><span class='word'>OP</span><span class='ignore'>_</span><span class='word'>BR</span><span class='ignore'>_</span><span class='word'>G</span><span class='ignore'>:</span>&nbsp; <span class='word'>en</span> <span class='ignore'>=</span> <span class='ignore'>(</span><span class='word'>flags</span><span class='ignore'>[</span><span class='ignore'>`</span><span class='word'>VMICRO16</span><span class='ignore'>_</span><span class='word'>SFLAG</span><span class='ignore'>_</span><span class='word'>Z</span><span class='ignore'>]</span> <span class='ignore'>=</span><span class='ignore'>=</span> <span class='word'>0</span><span class='ignore'>)</span> <span class='ignore'>&amp;</span><span class='ignore'>&amp;</span> <br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class='ignore'>(</span><span class='word'>flags</span><span class='ignore'>[</span><span class='ignore'>`</span><span class='word'>VMICRO16</span><span class='ignore'>_</span><span class='word'>SFLAG</span><span class='ignore'>_</span><span class='word'>N</span><span class='ignore'>]</span> <span class='ignore'>=</span><span class='ignore'>=</span> <span class='word'>flags</span><span class='ignore'>[</span><span class='ignore'>`</span><span class='word'>VMICRO16</span><span class='ignore'>_</span><span class='word'>SFLAG</span><span class='ignore'>_</span><span class='word'>V</span><span class='ignore'>]</span><span class='ignore'>)</span><span class='ignore'>;</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='ignore'>`</span><span class='word'>VMICRO16</span><span class='ignore'>_</span><span class='word'>OP</span><span class='ignore'>_</span><span class='word'>BR</span><span class='ignore'>_</span><span class='word'>L</span><span class='ignore'>:</span>&nbsp; <span class='word'>en</span> <span class='ignore'>=</span> <span class='ignore'>(</span><span class='word'>flags</span><span class='ignore'>[</span><span class='ignore'>`</span><span class='word'>VMICRO16</span><span class='ignore'>_</span><span class='word'>SFLAG</span><span class='ignore'>_</span><span class='word'>Z</span><span class='ignore'>]</span> <span class='ignore'>!</span><span class='ignore'>=</span> <span class='word'>flags</span><span class='ignore'>[</span><span class='ignore'>`</span><span class='word'>VMICRO16</span><span class='ignore'>_</span><span class='word'>SFLAG</span><span class='ignore'>_</span><span class='word'>N</span><span class='ignore'>]</span><span class='ignore'>)</span><span class='ignore'>;</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='ignore'>`</span><span class='word'>VMICRO16</span><span class='ignore'>_</span><span class='word'>OP</span><span class='ignore'>_</span><span class='word'>BR</span><span class='ignore'>_</span><span class='word'>GE</span><span class='ignore'>:</span> <span class='word'>en</span> <span class='ignore'>=</span> <span class='ignore'>(</span><span class='word'>flags</span><span class='ignore'>[</span><span class='ignore'>`</span><span class='word'>VMICRO16</span><span class='ignore'>_</span><span class='word'>SFLAG</span><span class='ignore'>_</span><span class='word'>Z</span><span class='ignore'>]</span> <span class='ignore'>=</span><span class='ignore'>=</span> <span class='word'>flags</span><span class='ignore'>[</span><span class='ignore'>`</span><span class='word'>VMICRO16</span><span class='ignore'>_</span><span class='word'>SFLAG</span><span class='ignore'>_</span><span class='word'>N</span><span class='ignore'>]</span><span class='ignore'>)</span><span class='ignore'>;</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='ignore'>`</span><span class='word'>VMICRO16</span><span class='ignore'>_</span><span class='word'>OP</span><span class='ignore'>_</span><span class='word'>BR</span><span class='ignore'>_</span><span class='word'>LE</span><span class='ignore'>:</span> <span class='word'>en</span> <span class='ignore'>=</span> <span class='ignore'>(</span><span class='word'>flags</span><span class='ignore'>[</span><span class='ignore'>`</span><span class='word'>VMICRO16</span><span class='ignore'>_</span><span class='word'>SFLAG</span><span class='ignore'>_</span><span class='word'>Z</span><span class='ignore'>]</span> <span class='ignore'>=</span><span class='ignore'>=</span> <span class='word'>1</span><span class='ignore'>)</span> <span class='ignore'>|</span><span class='ignore'>|</span> <br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class='ignore'>(</span><span class='word'>flags</span><span class='ignore'>[</span><span class='ignore'>`</span><span class='word'>VMICRO16</span><span class='ignore'>_</span><span class='word'>SFLAG</span><span class='ignore'>_</span><span class='word'>N</span><span class='ignore'>]</span> <span class='ignore'>!</span><span class='ignore'>=</span> <span class='word'>flags</span><span class='ignore'>[</span><span class='ignore'>`</span><span class='word'>VMICRO16</span><span class='ignore'>_</span><span class='word'>SFLAG</span><span class='ignore'>_</span><span class='word'>V</span><span class='ignore'>]</span><span class='ignore'>)</span><span class='ignore'>;</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='word'>default</span><span class='ignore'>:</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='word'>en</span> <span class='ignore'>=</span> <span class='word'>0</span><span class='ignore'>;</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; <span class='word'>endcase</span><br>
<span class='word'>endmodule</span><br>
<span class='envir'>\end</span><span class='envir'>{minted}</span><br>
<span class='cmd'>\caption</span><span class='ignore'>{</span><span class='oword'>ALU</span> <span class='oword'>branch</span> <span class='oword'>detection</span> <span class='oword'>using</span> <span class='oword'>flags</span><span class='ignore'>:</span> <span class='oword'>zero</span> <span class='ignore'>(</span><span class='oword'>Z</span><span class='ignore'>)</span><span class='ignore'>,</span> <span class='oword'>overflow</span> <span class='ignore'>(</span><span class='oword'>V</span><span class='ignore'>)</span><span class='ignore'>,</span> <span class='oword'>and</span> <span class='oword'>negative</span> <span class='ignore'>(</span><span class='oword'>N</span><span class='ignore'>)</span><span class='ignore'>.</span><span class='ignore'>}</span><br>
<span class='envir'>\end</span><span class='envir'>{listing}</span><br>
<br>
<br>
<span class='word'>The</span> <span class='word'>Verilog</span> <span class='word'>implementation</span> <span class='word'>of</span> <span class='word'>the</span> <span class='word'>ALU</span> <span class='word'>is</span> <span class='word'>shown</span> <span class='word'>in</span> <span class='cmd'>\cref</span><span class='ignore'>{</span><span class='word'>fig</span><span class='ignore'>:</span><span class='word'>aluv</span><span class='ignore'>}</span><span class='ignore'>.</span> <span class='word'>The</span> <span class='word'>ALU's</span> <span class='word'>asynchronous</span> <span class='word'>output</span> <span class='word'>is</span> <span class='word'>clocked</span> <span class='word'>with</span> <span class='word'>other</span> <span class='word'>registers</span><span class='ignore'>,</span> <span class='word'>such</span> <span class='word'>as</span> <span class='word'>destination</span> <span class='word'>register</span> <span class='cmd'>\verb</span><span class='cmd'>|</span><span class='ignore'>rs1</span><span class='cmd'>|</span> <span class='word'>and</span> <span class='word'>other</span> <span class='word'>control</span> <span class='word'>signals</span><span class='ignore'>,</span> <span class='word'>in</span> <span class='word'>the</span> <span class='cmd'>\verb</span><span class='cmd'>|</span><span class='ignore'>EXME</span><span class='cmd'>|</span> <span class='word'>register</span> <span class='word'>bank</span><span class='ignore'>.</span><br>
<span class='envir'>\begin</span><span class='envir'>{listing}</span><span class='option'>[H]</span><br>
<span class='cmd'>\centering</span><br>
<span class='envir'>\begin</span><span class='envir'>{minted}</span><span class='option'>[fontsize=\scriptsize,linenos,baselinestretch=0.5,frame=single,framesep=10pt]</span><span class='ignore'>{</span><span class='word'>verilog</span><span class='ignore'>}</span><br>
<span class='word'>always</span> <span class='ignore'>@</span><span class='ignore'>(</span><span class='ignore'>*</span><span class='ignore'>)</span> <span class='word'>case</span> <span class='ignore'>(</span><span class='word'>op</span><span class='ignore'>)</span><br>
&nbsp; &nbsp; <span class='ignore'>/</span><span class='ignore'>/</span> <span class='word'>branch</span><span class='ignore'>/</span><span class='word'>nop</span><span class='ignore'>,</span> <span class='word'>output</span> <span class='word'>nothing</span><br>
&nbsp; &nbsp; <span class='ignore'>`</span><span class='word'>VMICRO16</span><span class='ignore'>_</span><span class='word'>ALU</span><span class='ignore'>_</span><span class='word'>BR</span><span class='ignore'>,</span><br>
&nbsp; &nbsp; <span class='ignore'>`</span><span class='word'>VMICRO16</span><span class='ignore'>_</span><span class='word'>ALU</span><span class='ignore'>_</span><span class='word'>NOP</span><span class='ignore'>:</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='word'>c</span> <span class='ignore'>=</span> <span class='ignore'>{</span><span class='word'>DATA</span><span class='ignore'>_</span><span class='word'>WIDTH</span><span class='ignore'>{</span><span class='word'>1'b0</span><span class='ignore'>}</span><span class='ignore'>}</span><span class='ignore'>;</span><br>
&nbsp; &nbsp; <span class='ignore'>/</span><span class='ignore'>/</span> <span class='word'>load</span><span class='ignore'>/</span><span class='word'>store</span> <span class='word'>addresses</span> <span class='ignore'>(</span><span class='word'>use</span> <span class='word'>value</span> <span class='word'>in</span> <span class='word'>rd2</span><span class='ignore'>)</span><br>
&nbsp; &nbsp; <span class='ignore'>`</span><span class='word'>VMICRO16</span><span class='ignore'>_</span><span class='word'>ALU</span><span class='ignore'>_</span><span class='word'>LW</span><span class='ignore'>,</span><br>
&nbsp; &nbsp; <span class='ignore'>`</span><span class='word'>VMICRO16</span><span class='ignore'>_</span><span class='word'>ALU</span><span class='ignore'>_</span><span class='word'>SW</span><span class='ignore'>:</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class='word'>c</span> <span class='ignore'>=</span> <span class='word'>b</span><span class='ignore'>;</span><br>
&nbsp; &nbsp; <span class='ignore'>/</span><span class='ignore'>/</span> <span class='word'>bitwise</span> <span class='word'>operations</span><br>
&nbsp; &nbsp; <span class='ignore'>`</span><span class='word'>VMICRO16</span><span class='ignore'>_</span><span class='word'>ALU</span><span class='ignore'>_</span><span class='word'>BIT</span><span class='ignore'>_</span><span class='word'>OR</span><span class='ignore'>:</span>&nbsp; &nbsp; &nbsp;  <span class='word'>c</span> <span class='ignore'>=</span> <span class='word'>a</span> <span class='ignore'>|</span> <span class='word'>b</span><span class='ignore'>;</span><br>
&nbsp; &nbsp; <span class='ignore'>`</span><span class='word'>VMICRO16</span><span class='ignore'>_</span><span class='word'>ALU</span><span class='ignore'>_</span><span class='word'>BIT</span><span class='ignore'>_</span><span class='word'>XOR</span><span class='ignore'>:</span>&nbsp; &nbsp; &nbsp; <span class='word'>c</span> <span class='ignore'>=</span> <span class='word'>a</span> <span class='ignore'>^</span> <span class='word'>b</span><span class='ignore'>;</span><br>
&nbsp; &nbsp; <span class='ignore'>`</span><span class='word'>VMICRO16</span><span class='ignore'>_</span><span class='word'>ALU</span><span class='ignore'>_</span><span class='word'>BIT</span><span class='ignore'>_</span><span class='word'>AND</span><span class='ignore'>:</span>&nbsp; &nbsp; &nbsp; <span class='word'>c</span> <span class='ignore'>=</span> <span class='word'>a</span> <span class='ignore'>&amp;</span> <span class='word'>b</span><span class='ignore'>;</span><br>
&nbsp; &nbsp; <span class='ignore'>`</span><span class='word'>VMICRO16</span><span class='ignore'>_</span><span class='word'>ALU</span><span class='ignore'>_</span><span class='word'>BIT</span><span class='ignore'>_</span><span class='word'>NOT</span><span class='ignore'>:</span>&nbsp; &nbsp; &nbsp; <span class='word'>c</span> <span class='ignore'>=</span> <span class='ignore'>~</span><span class='ignore'>(</span><span class='word'>b</span><span class='ignore'>)</span><span class='ignore'>;</span><br>
&nbsp; &nbsp; <span class='ignore'>`</span><span class='word'>VMICRO16</span><span class='ignore'>_</span><span class='word'>ALU</span><span class='ignore'>_</span><span class='word'>BIT</span><span class='ignore'>_</span><span class='word'>LSHFT</span><span class='ignore'>:</span>&nbsp; &nbsp; <span class='word'>c</span> <span class='ignore'>=</span> <span class='word'>a</span> <span class='ignore'>&lt;</span><span class='ignore'>&lt;</span> <span class='word'>b</span><span class='ignore'>;</span><br>
&nbsp; &nbsp; <span class='ignore'>`</span><span class='word'>VMICRO16</span><span class='ignore'>_</span><span class='word'>ALU</span><span class='ignore'>_</span><span class='word'>BIT</span><span class='ignore'>_</span><span class='word'>RSHFT</span><span class='ignore'>:</span>&nbsp; &nbsp; <span class='word'>c</span> <span class='ignore'>=</span> <span class='word'>a</span> <span class='ignore'>&gt;</span><span class='ignore'>&gt;</span> <span class='word'>b</span><span class='ignore'>;</span><br>
<span class='envir'>\end</span><span class='envir'>{minted}</span><br>
<span class='cmd'>\caption</span><span class='ignore'>{</span><span class='oword'>Vmicro16's</span> <span class='oword'>ALU</span> <span class='oword'>implementation</span> <span class='oword'>named</span> <span class='oword'>vmicro16</span><span class='cmd'>\_</span><span class='oword'>alu</span><span class='ignore'>.</span> <span class='oword'>vmicro16.v</span><span class='ignore'>}</span><br>
<span class='cmd'>\label</span><span class='ignore'>{</span><span class='ignore'>fig</span><span class='ignore'>:</span><span class='ignore'>aluv</span><span class='ignore'>}</span><br>
<span class='envir'>\end</span><span class='envir'>{listing}</span><br>
<br>
<br>
<br>
<br>
<span class='cmd'>\subsection</span><span class='ignore'>{</span><span class='hword'>Decoder</span> <span class='hword'>Design</span><span class='ignore'>}</span><br>
<span class='word'>Instruction</span> <span class='word'>decoding</span> <span class='word'>occurs</span> <span class='word'>in</span> <span class='word'>the</span> <span class='word'>between</span> <span class='word'>the</span> <span class='word'>IFID</span> <span class='word'>and</span> <span class='word'>IDEX</span> <span class='word'>stages</span><span class='ignore'>.</span> <br>
<span class='word'>The</span> <span class='word'>decoder</span> <span class='word'>extracts</span> <span class='word'>register</span> <span class='word'>selects</span> <span class='word'>and</span> <span class='word'>operands</span> <span class='word'>from</span> <span class='word'>the</span> <span class='word'>input</span> <span class='word'>instruction</span><span class='ignore'>.</span> <span class='word'>The</span> <span class='word'>decoder</span> <span class='word'>outputs</span> <span class='word'>are</span> <span class='word'>asynchronous</span> <span class='word'>which</span> <span class='word'>allows</span> <span class='word'>the</span> <span class='word'>register</span> <span class='word'>selects</span> <span class='word'>to</span> <span class='word'>be</span> <span class='word'>passed</span> <span class='word'>to</span> <span class='word'>the</span> <span class='word'>register</span> <span class='word'>set</span> <span class='word'>and</span> <span class='word'>register</span> <span class='word'>data</span> <span class='word'>to</span> <span class='word'>be</span> <span class='word'>read</span> <span class='word'>asynchronously</span><span class='ignore'>.</span> <span class='word'>The</span> <span class='word'>register</span> <span class='word'>selects</span> <span class='word'>and</span> <span class='word'>register</span> <span class='word'>read</span> <span class='word'>data</span> <span class='word'>is</span> <span class='word'>then</span> <span class='word'>clocked</span> <span class='word'>into</span> <span class='word'>the</span> <span class='word'>IDEX</span> <span class='word'>register</span> <span class='word'>bank</span><span class='ignore'>.</span><br>
<br>
<span class='envir'>\begin</span><span class='envir'>{listing}</span><span class='option'>[H]</span><br>
<span class='cmd'>\centering</span><br>
<span class='envir'>\begin</span><span class='envir'>{minted}</span><span class='option'>[fontsize=\scriptsize,linenos,baselinestretch=0.5,frame=single,framesep=10pt]</span><span class='ignore'>{</span><span class='word'>verilog</span><span class='ignore'>}</span><br>
<span class='word'>always</span> <span class='ignore'>@</span><span class='ignore'>(</span><span class='ignore'>*</span><span class='ignore'>)</span> <span class='word'>case</span> <span class='ignore'>(</span><span class='word'>instr</span><span class='ignore'>[</span><span class='word'>15</span><span class='ignore'>:</span><span class='word'>11</span><span class='ignore'>]</span><span class='ignore'>)</span><br>
&nbsp; &nbsp; <span class='ignore'>`</span><span class='word'>VMICRO16</span><span class='ignore'>_</span><span class='word'>OP</span><span class='ignore'>_</span><span class='word'>BR</span><span class='ignore'>:</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='word'>alu</span><span class='ignore'>_</span><span class='word'>op</span> <span class='ignore'>=</span> <span class='ignore'>`</span><span class='word'>VMICRO16</span><span class='ignore'>_</span><span class='word'>ALU</span><span class='ignore'>_</span><span class='word'>BR</span><span class='ignore'>;</span><br>
&nbsp; &nbsp; <span class='ignore'>`</span><span class='word'>VMICRO16</span><span class='ignore'>_</span><span class='word'>OP</span><span class='ignore'>_</span><span class='word'>MULT</span><span class='ignore'>:</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='word'>alu</span><span class='ignore'>_</span><span class='word'>op</span> <span class='ignore'>=</span> <span class='ignore'>`</span><span class='word'>VMICRO16</span><span class='ignore'>_</span><span class='word'>ALU</span><span class='ignore'>_</span><span class='word'>MULT</span><span class='ignore'>;</span><br>
<br>
&nbsp; &nbsp; <span class='ignore'>`</span><span class='word'>VMICRO16</span><span class='ignore'>_</span><span class='word'>OP</span><span class='ignore'>_</span><span class='word'>CMP</span><span class='ignore'>:</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class='word'>alu</span><span class='ignore'>_</span><span class='word'>op</span> <span class='ignore'>=</span> <span class='ignore'>`</span><span class='word'>VMICRO16</span><span class='ignore'>_</span><span class='word'>ALU</span><span class='ignore'>_</span><span class='word'>CMP</span><span class='ignore'>;</span><br>
&nbsp; &nbsp; <span class='ignore'>`</span><span class='word'>VMICRO16</span><span class='ignore'>_</span><span class='word'>OP</span><span class='ignore'>_</span><span class='word'>SETC</span><span class='ignore'>:</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='word'>alu</span><span class='ignore'>_</span><span class='word'>op</span> <span class='ignore'>=</span> <span class='ignore'>`</span><span class='word'>VMICRO16</span><span class='ignore'>_</span><span class='word'>ALU</span><span class='ignore'>_</span><span class='word'>SETC</span><span class='ignore'>;</span><br>
&nbsp; &nbsp; <br>
&nbsp; &nbsp; <span class='ignore'>`</span><span class='word'>VMICRO16</span><span class='ignore'>_</span><span class='word'>OP</span><span class='ignore'>_</span><span class='word'>BIT</span><span class='ignore'>:</span>&nbsp; &nbsp;  <span class='word'>casez</span> <span class='ignore'>(</span><span class='word'>instr</span><span class='ignore'>[</span><span class='word'>4</span><span class='ignore'>:</span><span class='word'>0</span><span class='ignore'>]</span><span class='ignore'>)</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; <span class='ignore'>`</span><span class='word'>VMICRO16</span><span class='ignore'>_</span><span class='word'>OP</span><span class='ignore'>_</span><span class='word'>BIT</span><span class='ignore'>_</span><span class='word'>OR</span><span class='ignore'>:</span>&nbsp; &nbsp; &nbsp; <span class='word'>alu</span><span class='ignore'>_</span><span class='word'>op</span> <span class='ignore'>=</span> <span class='ignore'>`</span><span class='word'>VMICRO16</span><span class='ignore'>_</span><span class='word'>ALU</span><span class='ignore'>_</span><span class='word'>BIT</span><span class='ignore'>_</span><span class='word'>OR</span><span class='ignore'>;</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; <span class='ignore'>`</span><span class='word'>VMICRO16</span><span class='ignore'>_</span><span class='word'>OP</span><span class='ignore'>_</span><span class='word'>BIT</span><span class='ignore'>_</span><span class='word'>XOR</span><span class='ignore'>:</span>&nbsp; &nbsp;  <span class='word'>alu</span><span class='ignore'>_</span><span class='word'>op</span> <span class='ignore'>=</span> <span class='ignore'>`</span><span class='word'>VMICRO16</span><span class='ignore'>_</span><span class='word'>ALU</span><span class='ignore'>_</span><span class='word'>BIT</span><span class='ignore'>_</span><span class='word'>XOR</span><span class='ignore'>;</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; <span class='ignore'>`</span><span class='word'>VMICRO16</span><span class='ignore'>_</span><span class='word'>OP</span><span class='ignore'>_</span><span class='word'>BIT</span><span class='ignore'>_</span><span class='word'>AND</span><span class='ignore'>:</span>&nbsp; &nbsp;  <span class='word'>alu</span><span class='ignore'>_</span><span class='word'>op</span> <span class='ignore'>=</span> <span class='ignore'>`</span><span class='word'>VMICRO16</span><span class='ignore'>_</span><span class='word'>ALU</span><span class='ignore'>_</span><span class='word'>BIT</span><span class='ignore'>_</span><span class='word'>AND</span><span class='ignore'>;</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; <span class='ignore'>`</span><span class='word'>VMICRO16</span><span class='ignore'>_</span><span class='word'>OP</span><span class='ignore'>_</span><span class='word'>BIT</span><span class='ignore'>_</span><span class='word'>NOT</span><span class='ignore'>:</span>&nbsp; &nbsp;  <span class='word'>alu</span><span class='ignore'>_</span><span class='word'>op</span> <span class='ignore'>=</span> <span class='ignore'>`</span><span class='word'>VMICRO16</span><span class='ignore'>_</span><span class='word'>ALU</span><span class='ignore'>_</span><span class='word'>BIT</span><span class='ignore'>_</span><span class='word'>NOT</span><span class='ignore'>;</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; <span class='ignore'>`</span><span class='word'>VMICRO16</span><span class='ignore'>_</span><span class='word'>OP</span><span class='ignore'>_</span><span class='word'>BIT</span><span class='ignore'>_</span><span class='word'>LSHFT</span><span class='ignore'>:</span>&nbsp;  <span class='word'>alu</span><span class='ignore'>_</span><span class='word'>op</span> <span class='ignore'>=</span> <span class='ignore'>`</span><span class='word'>VMICRO16</span><span class='ignore'>_</span><span class='word'>ALU</span><span class='ignore'>_</span><span class='word'>BIT</span><span class='ignore'>_</span><span class='word'>LSHFT</span><span class='ignore'>;</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; <span class='ignore'>`</span><span class='word'>VMICRO16</span><span class='ignore'>_</span><span class='word'>OP</span><span class='ignore'>_</span><span class='word'>BIT</span><span class='ignore'>_</span><span class='word'>RSHFT</span><span class='ignore'>:</span>&nbsp;  <span class='word'>alu</span><span class='ignore'>_</span><span class='word'>op</span> <span class='ignore'>=</span> <span class='ignore'>`</span><span class='word'>VMICRO16</span><span class='ignore'>_</span><span class='word'>ALU</span><span class='ignore'>_</span><span class='word'>BIT</span><span class='ignore'>_</span><span class='word'>RSHFT</span><span class='ignore'>;</span><br>
&nbsp; &nbsp; &nbsp; &nbsp; <span class='word'>default</span><span class='ignore'>:</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='word'>alu</span><span class='ignore'>_</span><span class='word'>op</span> <span class='ignore'>=</span> <span class='ignore'>`</span><span class='word'>VMICRO16</span><span class='ignore'>_</span><span class='word'>ALU</span><span class='ignore'>_</span><span class='word'>BAD</span><span class='ignore'>;</span> <span class='word'>endcase</span><br>
<span class='envir'>\end</span><span class='envir'>{minted}</span><br>
<span class='cmd'>\caption</span><span class='ignore'>{</span><span class='oword'>Vmicro16's</span> <span class='oword'>ALU</span> <span class='oword'>implementation</span> <span class='oword'>named</span> <span class='oword'>vmicro16</span><span class='cmd'>\_</span><span class='oword'>alu</span><span class='ignore'>.</span> <span class='oword'>vmicro16.v</span><span class='ignore'>}</span><br>
<span class='cmd'>\caption</span><span class='ignore'>{</span><span class='oword'>Vmicro16's</span> <span class='oword'>decoder</span> <span class='oword'>module</span> <span class='oword'>code</span> <span class='oword'>showing</span> <span class='oword'>nested</span> <span class='oword'>bit</span> <span class='oword'>switches</span> <span class='oword'>to</span> <span class='oword'>determine</span> <span class='oword'>the</span> <span class='oword'>intended</span> <span class='oword'>opcode</span><span class='ignore'>.</span> <span class='oword'>vmicro16.v</span><span class='ignore'>}</span><br>
<span class='cmd'>\label</span><span class='ignore'>{</span><span class='ignore'>fig</span><span class='ignore'>:</span><span class='ignore'>vdecoder</span><span class='ignore'>}</span><br>
<span class='envir'>\end</span><span class='envir'>{listing}</span><br>
<br>
<span class='word'>In</span> <span class='cmd'>\cref</span><span class='ignore'>{</span><span class='word'>fig</span><span class='ignore'>:</span><span class='word'>vdecoder</span><span class='ignore'>}</span><span class='ignore'>,</span> <span class='word'>it</span> <span class='word'>can</span> <span class='word'>be</span> <span class='word'>seen</span> <span class='word'>that</span> <span class='word'>the</span> <span class='word'>first</span> <span class='word'>4</span> <span class='word'>opcode</span> <span class='word'>cases</span> <span class='ignore'>(</span><span class='word'>BR</span><span class='ignore'>,</span> <span class='word'>MULT</span><span class='ignore'>,</span> <span class='word'>CMP</span><span class='ignore'>,</span> <span class='word'>SETC</span><span class='ignore'>)</span> <span class='word'>are</span> <span class='word'>represented</span> <span class='word'>using</span> <span class='word'>the</span> <span class='word'>same</span> <span class='word'>15-11</span> <span class='ignore'>(</span><span class='word'>opcode</span><span class='ignore'>)</span> <span class='word'>bits</span><span class='ignore'>,</span> <span class='word'>however</span> <span class='word'>the</span> <span class='word'>BIT</span> <span class='word'>instructions</span> <span class='word'>share</span> <span class='word'>the</span> <span class='word'>same</span> <span class='word'>opcode</span> <span class='word'>and</span> <span class='word'>so</span> <span class='word'>require</span> <span class='word'>another</span> <span class='word'>bit</span> <span class='word'>range</span> <span class='word'>to</span> <span class='word'>be</span> <span class='word'>compared</span> <span class='word'>to</span> <span class='word'>determine</span> <span class='word'>the</span> <span class='word'>output</span> <span class='word'>function</span><span class='ignore'>.</span><br>
<br>
<br>
<br>
<span class='cmd'>\subsection</span><span class='ignore'>{</span><span class='hword'>Pipelining</span><span class='ignore'>}</span><br>
<span class='word'>In</span> <span class='word'>the</span> <span class='word'>interim</span> <span class='word'>progress</span> <span class='word'>update</span><span class='ignore'>,</span> <span class='word'>the</span> <span class='word'>processor</span> <span class='word'>design</span> <span class='word'>featured</span> <span class='cmd'>\textit</span><span class='ignore'>{</span><span class='word'>instruction</span> <span class='word'>pipelining</span><span class='ignore'>}</span> <span class='word'>to</span> <span class='word'>meet</span> <span class='word'>requirement</span> <span class='cmd'>\ref</span><span class='ignore'>{</span><span class='ignore'>ed</span><span class='ignore'>:</span><span class='ignore'>ipc</span><span class='ignore'>}</span><span class='ignore'>.</span> <span class='word'>Instruction</span> <span class='word'>pipelining</span> <span class='word'>allows</span> <span class='word'>instructions</span> <span class='word'>executions</span> <span class='word'>to</span> <span class='word'>be</span> <span class='word'>overlapped</span> <span class='word'>in</span> <span class='word'>the</span> <span class='word'>pipeline</span><span class='ignore'>,</span> <span class='word'>resulting</span> <span class='word'>in</span> <span class='word'>higher</span> <span class='word'>throughput</span> <span class='ignore'>(</span><span class='word'>up</span> <span class='word'>to</span> <span class='word'>one</span> <span class='word'>instruction</span> <span class='word'>per</span> <span class='word'>clock</span><span class='ignore'>)</span> <span class='word'>at</span> <span class='word'>the</span> <span class='word'>expense</span> <span class='word'>of</span> <span class='word'>5-6</span> <span class='word'>clocks</span> <span class='word'>of</span> <span class='word'>latency</span> <span class='word'>and</span> <span class='cmd'>\textit</span><span class='ignore'>{</span><span class='word'>significant</span><span class='ignore'>}</span> <span class='word'>code</span> <span class='word'>complexity</span><span class='ignore'>.</span> <span class='word'>As</span> <span class='word'>the</span> <span class='word'>development</span> <span class='word'>of</span> <span class='word'>the</span> <span class='word'>project</span> <span class='word'>shifted</span> <span class='word'>from</span> <span class='word'>single-core</span> <span class='word'>to</span> <span class='word'>multi-core</span><span class='ignore'>,</span> <span class='word'>it</span> <span class='word'>became</span> <span class='word'>obvious</span> <span class='word'>that</span> <span class='word'>the</span> <span class='word'>complexity</span> <span class='word'>of</span> <span class='word'>the</span> <span class='word'>pipelined</span> <span class='word'>processor</span> <span class='word'>would</span> <span class='word'>inhibit</span> <span class='word'>the</span> <span class='word'>integration</span> <span class='word'>of</span> <span class='word'>the</span> <span class='word'>multi-core</span> <span class='word'>functionality</span><span class='ignore'>.</span> <span class='word'>It</span> <span class='word'>was</span> <span class='word'>decided</span> <span class='word'>to</span> <span class='word'>remove</span> <span class='word'>the</span> <span class='word'>instruction</span> <span class='word'>pipelining</span> <span class='word'>functionality</span> <span class='word'>and</span> <span class='word'>use</span> <span class='word'>a</span> <span class='word'>simpler</span> <span class='word'>state-machine</span> <span class='word'>based</span> <span class='word'>pipeline</span> <span class='word'>that</span> <span class='word'>is</span> <span class='word'>much</span> <span class='word'>simpler</span> <span class='word'>to</span> <span class='word'>extend</span> <span class='word'>and</span> <span class='word'>would</span> <span class='word'>cause</span> <span class='word'>fewer</span> <span class='word'>challenges</span> <span class='word'>later</span> <span class='word'>in</span> <span class='word'>the</span> <span class='word'>project</span><span class='ignore'>.</span> <br>
<br>
<span class='cmd'>\subsection</span><span class='ignore'>{</span><span class='hword'>Design</span> <span class='hword'>Optimisations</span><span class='ignore'>}</span><br>
<span class='word'>In</span> <span class='word'>a</span> <span class='word'>design</span> <span class='word'>that</span> <span class='word'>has</span> <span class='word'>many</span> <span class='word'>instantiations</span> <span class='word'>of</span> <span class='word'>the</span> <span class='word'>same</span> <span class='word'>component</span><span class='ignore'>,</span> <span class='word'>a</span> <span class='word'>small</span> <span class='word'>resource</span> <span class='word'>saving</span> <span class='word'>improvement</span> <span class='word'>within</span> <span class='word'>the</span> <span class='word'>component</span> <span class='word'>can</span> <span class='word'>have</span> <span class='word'>a</span> <span class='word'>significant</span> <span class='word'>overall</span> <span class='word'>savings</span> <span class='word'>improvement</span> <span class='word'>if</span> <span class='word'>it</span> <span class='word'>is</span> <span class='word'>instantiated</span> <span class='word'>many</span> <span class='word'>times</span><span class='ignore'>.</span> <span class='word'>Project</span> <span class='word'>requirement</span> <span class='cmd'>\ref</span><span class='ignore'>{</span><span class='ignore'>cd</span><span class='ignore'>:</span><span class='ignore'>vendor</span><span class='ignore'>}</span> <span class='word'>requires</span> <span class='word'>the</span> <span class='word'>design</span> <span class='word'>to</span> <span class='word'>be</span> <span class='word'>compiled</span> <span class='word'>for</span> <span class='word'>a</span> <span class='word'>range</span> <span class='word'>of</span> <span class='word'>FPGA</span> <span class='word'>sizes</span><span class='ignore'>,</span> <span class='word'>and</span> <span class='word'>so</span> <span class='word'>space</span> <span class='word'>saving</span> <span class='word'>optimisations</span> <span class='word'>are</span> <span class='word'>considered</span><span class='ignore'>.</span> <br>
<br>
<span class='cmd'>\subsubsection</span><span class='ignore'>{</span><span class='hword'>Register</span> <span class='hword'>Set</span> <span class='hword'>Size</span> <span class='hword'>Improvements</span><span class='ignore'>}</span><br>
<span class='word'>A</span> <span class='word'>register</span> <span class='word'>set</span> <span class='word'>in</span> <span class='word'>a</span> <span class='word'>CPU</span> <span class='word'>is</span> <span class='word'>a</span> <span class='word'>fast</span><span class='ignore'>,</span> <span class='word'>temporary</span><span class='ignore'>,</span> <span class='word'>and</span> <span class='word'>small</span> <span class='word'>memory</span> <span class='word'>that</span> <span class='word'>software</span> <span class='word'>instructions</span> <span class='word'>directly</span> <span class='word'>manipulate</span> <span class='word'>to</span> <span class='word'>perform</span> <span class='word'>computation</span><span class='ignore'>.</span> <span class='word'>In</span> <span class='word'>the</span> <span class='word'>Vmicro16</span> <span class='word'>instruction</span> <span class='word'>set</span><span class='ignore'>,</span> <span class='word'>eight</span> <span class='word'>registers</span> <span class='word'>named</span> <span class='word'>r0</span> <span class='word'>to</span> <span class='word'>r7</span> <span class='word'>are</span> <span class='word'>available</span> <span class='word'>to</span> <span class='word'>software</span><span class='ignore'>.</span> <span class='word'>The</span> <span class='word'>instruction</span> <span class='word'>set</span> <span class='word'>allows</span> <span class='word'>up</span> <span class='word'>to</span> <span class='word'>two</span> <span class='word'>registers</span> <span class='word'>to</span> <span class='word'>be</span> <span class='word'>references</span> <span class='word'>in</span> <span class='word'>most</span> <span class='word'>instructions</span><span class='ignore'>,</span> <span class='word'>for</span> <span class='word'>example</span> <span class='word'>the</span> <span class='word'>instruction</span> <span class='cmd'>\verb</span><span class='cmd'>|</span><span class='ignore'>add r0, r1</span><span class='cmd'>|</span> <span class='word'>tells</span> <span class='word'>the</span> <span class='word'>processor</span> <span class='word'>to</span> <span class='word'>perform</span> <span class='word'>the</span> <span class='word'>following</span> <span class='word'>actions</span><span class='ignore'>:</span><br>
<span class='envir'>\begin</span><span class='envir'>{enumerate}</span><span class='option'>[leftmargin=4\parindent, label=\bfseries Clock \arabic*.]</span><br>
<span class='cmd'>\item</span> <span class='word'>Fetch</span> <span class='word'>r0</span> <span class='word'>and</span> <span class='word'>r1</span> <span class='word'>from</span> <span class='word'>the</span> <span class='word'>register</span> <span class='word'>set</span><br>
<span class='cmd'>\item</span> <span class='word'>Add</span> <span class='word'>the</span> <span class='word'>two</span> <span class='word'>values</span> <span class='word'>together</span> <span class='word'>in</span> <span class='word'>the</span> <span class='word'>ALU</span><br>
<span class='cmd'>\item</span> <span class='word'>Store</span> <span class='word'>the</span> <span class='word'>result</span> <span class='word'>back</span> <span class='word'>the</span> <span class='word'>register</span> <span class='word'>set</span> <span class='word'>in</span> <span class='word'>r0</span><br>
<span class='envir'>\end</span><span class='envir'>{enumerate}</span><br>
<span class='word'>For</span> <span class='word'>Clock</span> <span class='word'>1</span><span class='ignore'>,</span> <span class='word'>it</span> <span class='word'>was</span> <span class='word'>originally</span> <span class='word'>decided</span> <span class='word'>to</span> <span class='word'>use</span> <span class='word'>a</span> <span class='word'>dual</span> <span class='word'>port</span> <span class='word'>register</span> <span class='word'>set</span> <span class='ignore'>(</span><span class='word'>meaning</span> <span class='word'>that</span> <span class='word'>two</span> <span class='word'>data</span> <span class='word'>reads</span> <span class='word'>can</span> <span class='word'>be</span> <span class='word'>performed</span> <span class='word'>in</span> <span class='word'>a</span> <span class='word'>single</span> <span class='word'>clock</span><span class='ignore'>,</span> <span class='word'>in</span> <span class='word'>this</span> <span class='word'>case</span> <span class='word'>r0</span> <span class='word'>and</span> <span class='word'>r1</span><span class='ignore'>)</span><span class='ignore'>,</span> <span class='word'>however</span> <span class='word'>due</span> <span class='word'>to</span> <span class='word'>the</span> <span class='word'>asynchronous</span> <span class='word'>design</span> <span class='word'>of</span> <span class='word'>the</span> <span class='word'>register</span> <span class='word'>set</span> <span class='ignore'>(</span><span class='word'>for</span> <span class='word'>speed</span><span class='ignore'>)</span> <span class='word'>the</span> <span class='word'>RTL</span> <span class='word'>produced</span> <span class='word'>consumed</span> <span class='word'>a</span> <span class='word'>significant</span> <span class='word'>amount</span> <span class='word'>of</span> <span class='word'>FPGA</span> <span class='word'>resources</span><span class='ignore'>,</span> <span class='word'>approximately</span> <span class='word'>256</span> <span class='word'>flip-flops</span> <span class='ignore'>(</span><span class='word'>16</span> <span class='ignore'>(</span><span class='word'>data</span> <span class='word'>width</span><span class='ignore'>)</span> <span class='ignore'>*</span> <span class='word'>8</span> <span class='ignore'>(</span><span class='word'>registers</span><span class='ignore'>)</span> <span class='ignore'>*</span> <span class='word'>2</span> <span class='ignore'>(</span><span class='word'>ports</span><span class='ignore'>)</span><span class='ignore'>)</span><span class='ignore'>.</span> <span class='word'>To</span> <span class='word'>reduce</span> <span class='word'>this</span><span class='ignore'>,</span> <span class='word'>it</span> <span class='word'>was</span> <span class='word'>decided</span> <span class='word'>to</span> <span class='word'>split</span> <span class='word'>task</span> <span class='word'>1</span> <span class='word'>into</span> <span class='word'>two</span> <span class='word'>steps</span> <span class='word'>over</span> <span class='word'>two</span> <span class='word'>clock</span> <span class='word'>cycles</span> <span class='word'>using</span> <span class='word'>a</span> <span class='word'>single-port</span> <span class='word'>register</span> <span class='word'>set</span><span class='ignore'>.</span> <span class='word'>This</span> <span class='word'>required</span> <span class='word'>the</span> <span class='word'>processor</span> <span class='word'>pipe-line</span> <span class='word'>to</span> <span class='word'>use</span> <span class='word'>another</span> <span class='word'>clock</span> <span class='word'>cycle</span> <span class='word'>resulting</span> <span class='word'>in</span> <span class='word'>slightly</span> <span class='word'>lower</span> <span class='word'>performance</span><span class='ignore'>,</span> <span class='word'>however</span> <span class='word'>the</span> <span class='word'>size</span> <span class='word'>improvements</span> <span class='word'>will</span> <span class='word'>allow</span> <span class='word'>for</span> <span class='word'>more</span> <span class='word'>cores</span> <span class='word'>to</span> <span class='word'>be</span> <span class='word'>instantiated</span> <span class='word'>in</span> <span class='word'>the</span> <span class='word'>design</span><span class='ignore'>.</span> <span class='word'>This</span> <span class='word'>optimisation</span> <span class='word'>is</span> <span class='word'>also</span> <span class='word'>applied</span> <span class='word'>to</span> <span class='word'>the</span> <span class='word'>interrupt</span> <span class='word'>register</span> <span class='word'>set</span><span class='ignore'>,</span> <span class='word'>resulting</span> <span class='word'>in</span> <span class='word'>a</span> <span class='word'>saving</span> <span class='word'>of</span> <span class='word'>approximately</span> <span class='word'>256</span> <span class='word'>flip-flops</span> <span class='word'>per</span> <span class='word'>core</span> <span class='ignore'>(</span><span class='word'>128</span> <span class='word'>in</span> <span class='word'>the</span> <span class='word'>normal</span> <span class='word'>mode</span> <span class='word'>register</span> <span class='word'>set</span><span class='ignore'>,</span> <span class='word'>and</span> <span class='word'>128</span> <span class='word'>in</span> <span class='word'>the</span> <span class='word'>interrupt</span> <span class='word'>register</span> <span class='word'>set</span><span class='ignore'>)</span><span class='ignore'>.</span> <span class='word'>As</span> <span class='word'>shown</span><span class='ignore'>,</span> <span class='word'>adding</span> <span class='word'>a</span> <span class='word'>single</span> <span class='word'>clock</span> <span class='word'>delay</span> <span class='word'>saves</span> <span class='word'>a</span> <span class='word'>significant</span> <span class='word'>amount</span> <span class='word'>of</span> <span class='word'>LUTs</span><span class='ignore'>.</span> <span class='word'>This</span> <span class='word'>saving</span> <span class='word'>will</span> <span class='word'>be</span> <span class='word'>amplified</span> <span class='word'>in</span> <span class='word'>designs</span> <span class='word'>with</span> <span class='word'>many</span> <span class='word'>cores</span><span class='ignore'>.</span><br>
<br>
<br>
<br>
<span class='cmd'>\section</span><span class='ignore'>{</span><span class='hword'>Interrupts</span><span class='ignore'>}</span><br>
<span class='cmd'>\label</span><span class='ignore'>{</span><span class='ignore'>sect</span><span class='ignore'>:</span><span class='ignore'>interrupts</span><span class='ignore'>}</span><br>
<span class='word'>Interrupts</span> <span class='word'>are</span> <span class='word'>a</span> <span class='word'>technique</span> <span class='word'>used</span> <span class='word'>by</span> <span class='word'>processors</span> <span class='word'>to</span> <span class='word'>run</span> <span class='word'>software</span> <span class='word'>functions</span> <span class='word'>when</span> <span class='word'>an</span> <span class='word'>event</span> <span class='word'>occurs</span> <span class='word'>within</span> <span class='word'>the</span> <span class='word'>processor</span><span class='ignore'>,</span> <span class='word'>such</span> <span class='word'>as</span> <span class='word'>exceptions</span><span class='ignore'>,</span> <span class='word'>or</span> <span class='word'>signalled</span> <span class='word'>from</span> <span class='word'>an</span> <span class='word'>external</span> <span class='word'>source</span><span class='ignore'>,</span> <span class='word'>such</span> <span class='word'>as</span> <span class='word'>a</span> <span class='word'>UART</span> <span class='word'>receiver</span> <span class='word'>signalling</span> <span class='word'>it</span> <span class='word'>has</span> <span class='word'>received</span> <span class='word'>new</span> <span class='word'>data</span><span class='ignore'>.</span> <span class='word'>Today</span><span class='ignore'>,</span> <span class='word'>it</span> <span class='word'>is</span> <span class='word'>common</span> <span class='word'>for</span> <span class='word'>micro-controllers</span><span class='ignore'>,</span> <span class='word'>soft-processors</span><span class='ignore'>,</span> <span class='word'>and</span> <span class='word'>desktop</span> <span class='word'>processors</span><span class='ignore'>,</span> <span class='word'>to</span> <span class='word'>all</span> <span class='word'>feature</span> <span class='word'>interrupts</span><span class='ignore'>.</span> <span class='word'>Modern</span> <span class='word'>implementations</span> <span class='word'>support</span> <span class='word'>an</span> <span class='cmd'>\textit</span><span class='ignore'>{</span><span class='word'>interrupt</span> <span class='word'>vector</span><span class='ignore'>}</span> <span class='word'>which</span> <span class='word'>is</span> <span class='word'>a</span> <span class='word'>memory</span> <span class='word'>array</span> <span class='word'>that</span> <span class='word'>contains</span> <span class='word'>addresses</span> <span class='word'>to</span> <span class='word'>different</span> <span class='cmd'>\textit</span><span class='ignore'>{</span><span class='word'>interrupt</span> <span class='word'>handlers</span><span class='ignore'>}</span> <span class='ignore'>(</span><span class='word'>a</span> <span class='word'>software</span> <span class='word'>function</span> <span class='word'>called</span> <span class='word'>when</span> <span class='word'>a</span> <span class='word'>particular</span> <span class='word'>interrupt</span> <span class='word'>is</span> <span class='word'>received</span><span class='ignore'>)</span><span class='ignore'>.</span><br>
<br>
<span class='word'>Although</span> <span class='word'>interrupts</span> <span class='word'>are</span> <span class='word'>not</span> <span class='word'>a</span> <span class='word'>requirement</span> <span class='word'>for</span> <span class='word'>a</span> <span class='word'>multi-core</span> <span class='word'>system</span><span class='ignore'>,</span> <span class='word'>it</span> <span class='word'>was</span> <span class='word'>decided</span> <span class='word'>to</span> <span class='word'>implement</span> <span class='word'>this</span> <span class='word'>functionality</span> <span class='word'>to</span> <span class='word'>boost</span> <span class='word'>my</span> <span class='word'>understanding</span> <span class='word'>of</span> <span class='word'>such</span> <span class='word'>systems</span><span class='ignore'>.</span> <span class='word'>In</span> <span class='word'>addition</span><span class='ignore'>,</span> <span class='word'>example</span> <span class='word'>demos</span> <span class='word'>provided</span> <span class='word'>with</span> <span class='word'>this</span> <span class='word'>project</span> <span class='word'>are</span> <span class='word'>better</span> <span class='word'>visualised</span> <span class='word'>with</span> <span class='word'>a</span> <span class='word'>interrupt</span> <span class='word'>functionality</span><span class='ignore'>.</span><br>
<br>
<span class='cmd'>\subsection</span><span class='ignore'>{</span><span class='hword'>Overview</span><span class='ignore'>}</span><br>
<span class='word'>The</span> <span class='word'>interrupt</span> <span class='word'>functionality</span> <span class='word'>in</span> <span class='word'>this</span> <span class='word'>project</span> <span class='word'>supports</span> <span class='word'>the</span> <span class='word'>following</span><span class='ignore'>:</span><br>
<span class='envir'>\begin</span><span class='envir'>{itemize}</span><br>
<span class='cmd'>\item</span> <span class='word'>Per-core</span> <span class='word'>8</span> <span class='word'>cell</span> <span class='word'>interrupt</span> <span class='word'>vector</span> <span class='word'>accessible</span> <span class='word'>to</span> <span class='word'>software</span><span class='ignore'>.</span><span class='cmd'>\\</span><br>
<span class='word'>Software</span> <span class='word'>programs</span> <span class='word'>running</span> <span class='word'>on</span> <span class='word'>the</span> <span class='word'>Vmicro16</span> <span class='word'>processor</span> <span class='word'>can</span> <span class='word'>edit</span> <span class='word'>the</span> <span class='word'>interrupt</span> <span class='word'>vector</span> <span class='word'>to</span> <span class='word'>add</span> <span class='word'>their</span> <span class='word'>own</span> <span class='word'>interrupt</span> <span class='word'>handlers</span> <span class='word'>at</span> <span class='word'>runtime</span><span class='ignore'>.</span><br>
<br>
<span class='cmd'>\item</span> <span class='word'>Fast</span> <span class='word'>context</span> <span class='word'>switching</span><span class='ignore'>.</span><span class='cmd'>\\</span><br>
<span class='word'>A</span> <span class='word'>dedicated</span> <span class='word'>interrupt</span> <span class='word'>register</span> <span class='word'>set</span> <span class='word'>is</span> <span class='word'>multiplexed</span> <span class='word'>with</span> <span class='word'>the</span> <span class='word'>normal</span> <span class='word'>mode</span> <span class='word'>register</span> <span class='word'>set</span> <span class='word'>to</span> <span class='word'>provide</span> <span class='word'>faster</span> <span class='word'>context</span> <span class='word'>switching</span><span class='ignore'>.</span> <span class='word'>It</span> <span class='word'>should</span> <span class='word'>be</span> <span class='word'>noted</span> <span class='word'>that</span> <span class='word'>only</span> <span class='word'>the</span> <span class='word'>registers</span> <span class='word'>are</span> <span class='word'>saved</span> <span class='word'>during</span> <span class='word'>a</span> <span class='word'>context</span> <span class='word'>switch</span><span class='ignore'>.</span> <span class='word'>The</span> <span class='word'>means</span> <span class='word'>that</span> <span class='word'>the</span> <span class='word'>stack</span> <span class='word'>is</span> <span class='word'>not</span> <span class='word'>saved</span><span class='ignore'>.</span> <span class='word'>A</span> <span class='word'>schematic</span> <span class='word'>of</span> <span class='word'>the</span> <span class='word'>register</span> <span class='word'>multiplex</span> <span class='word'>is</span> <span class='word'>shown</span> <span class='word'>in</span> <span class='cmd'>\cref</span><span class='ignore'>{</span><span class='word'>fig</span><span class='ignore'>:</span><span class='word'>regmult</span><span class='ignore'>}</span><span class='ignore'>.</span><br>
<br>
<span class='cmd'>\item</span> <span class='word'>Parametrised</span> <span class='word'>interrupt</span> <span class='word'>sources</span> <span class='word'>and</span> <span class='word'>widths</span><span class='ignore'>.</span><span class='cmd'>\\</span><br>
<span class='word'>Users</span> <span class='word'>can</span> <span class='word'>configure</span> <span class='word'>the</span> <span class='word'>width</span> <span class='word'>of</span> <span class='word'>the</span> <span class='word'>interrupt</span> <span class='word'>in</span> <span class='word'>signals</span> <span class='word'>and</span> <span class='word'>the</span> <span class='word'>data</span> <span class='word'>width</span> <span class='word'>per</span> <span class='word'>interrupt</span> <span class='word'>source</span> <span class='word'>via</span> <span class='word'>the</span> <span class='cmd'>\verb</span><span class='cmd'>|</span><span class='ignore'>vmicro16_soc_config.v</span><span class='cmd'>|</span><span class='ignore'>.</span> <span class='word'>By</span> <span class='word'>default</span><span class='ignore'>,</span> <span class='word'>8</span> <span class='word'>interrupt</span> <span class='word'>sources</span> <span class='word'>are</span> <span class='word'>available</span> <span class='word'>and</span> <span class='word'>each</span> <span class='word'>can</span> <span class='word'>provide</span> <span class='word'>8-bits</span> <span class='word'>of</span> <span class='word'>data</span><span class='ignore'>.</span><br>
<span class='envir'>\end</span><span class='envir'>{itemize}</span><br>
<br>
<span class='cmd'>\subsection</span><span class='ignore'>{</span><span class='hword'>Hardware</span> <span class='hword'>Implementation</span><span class='ignore'>}</span><br>
<br>
<span class='cmd'>\subsubsection</span><span class='ignore'>{</span><span class='hword'>Context</span> <span class='hword'>Switching</span><span class='ignore'>}</span><br>
<span class='word'>When</span> <span class='word'>acting</span> <span class='word'>upon</span> <span class='word'>an</span> <span class='word'>incoming</span> <span class='word'>interrupt</span> <span class='word'>the</span> <span class='word'>current</span> <span class='word'>state</span> <span class='word'>the</span> <span class='word'>processor</span> <span class='word'>must</span> <span class='word'>be</span> <span class='word'>saved</span> <span class='word'>so</span> <span class='word'>that</span> <span class='word'>changes</span> <span class='word'>from</span> <span class='word'>the</span> <span class='word'>interrupt</span> <span class='word'>handler</span><span class='ignore'>,</span> <span class='word'>such</span> <span class='word'>as</span> <span class='word'>register</span> <span class='word'>writes</span> <span class='word'>and</span> <span class='word'>branches</span><span class='ignore'>,</span> <span class='word'>do</span> <span class='word'>not</span> <span class='word'>affect</span> <span class='word'>the</span> <span class='word'>current</span> <span class='word'>state</span><span class='ignore'>.</span> <span class='word'>After</span> <span class='word'>the</span> <span class='word'>interrupt</span> <span class='word'>handler</span> <span class='word'>function</span> <span class='word'>signals</span> <span class='word'>it</span> <span class='word'>has</span> <span class='word'>finished</span> <span class='ignore'>(</span><span class='word'>by</span> <span class='word'>using</span> <span class='word'>the</span> <span class='cmd'>\textit</span><span class='ignore'>{</span><span class='word'>Interrupt</span> <span class='word'>Return</span><span class='ignore'>}</span> <span class='cmd'>\verb</span><span class='cmd'>|</span><span class='ignore'>INTR</span><span class='cmd'>|</span> <span class='word'>instruction</span><span class='ignore'>)</span> <span class='word'>the</span> <span class='word'>saved</span> <span class='word'>state</span> <span class='word'>is</span> <span class='word'>restored</span><span class='ignore'>.</span><br>
<span class='word'>In</span> <span class='word'>the</span> <span class='word'>case</span> <span class='word'>of</span> <span class='word'>the</span> <span class='word'>Vmicro16</span> <span class='word'>processor</span><span class='ignore'>,</span> <span class='word'>the</span> <span class='word'>program</span> <span class='word'>counter</span> <span class='cmd'>\verb</span><span class='cmd'>|</span><span class='ignore'>r_pc[15:0]</span><span class='cmd'>|</span> <span class='word'>and</span> <span class='word'>register</span> <span class='word'>set</span> <span class='cmd'>\verb</span><span class='cmd'>|</span><span class='ignore'>regs</span><span class='cmd'>|</span> <span class='word'>instance</span> <span class='word'>are</span> <span class='word'>the</span> <span class='word'>only</span> <span class='word'>states</span> <span class='word'>that</span> <span class='word'>are</span> <span class='word'>saved</span><span class='ignore'>.</span> <span class='word'>Going</span> <span class='word'>forth</span><span class='ignore'>,</span> <span class='word'>the</span> <span class='word'>terms</span> <span class='cmd'>\textit</span><span class='ignore'>{</span><span class='word'>normal</span> <span class='word'>mode</span><span class='ignore'>}</span> <span class='word'>and</span> <span class='cmd'>\textit</span><span class='ignore'>{</span><span class='word'>interrupt</span> <span class='word'>mode</span><span class='ignore'>}</span> <span class='word'>are</span> <span class='word'>used</span> <span class='word'>to</span> <span class='word'>describe</span> <span class='word'>what</span> <span class='word'>registers</span> <span class='word'>the</span> <span class='word'>processor</span> <span class='word'>should</span> <span class='word'>use</span> <span class='word'>when</span> <span class='word'>executing</span> <span class='word'>instructions</span><span class='ignore'>.</span><br>
<br>
<span class='word'>When</span> <span class='word'>saving</span> <span class='word'>the</span> <span class='word'>state</span><span class='ignore'>,</span> <span class='word'>to</span> <span class='word'>avoid</span> <span class='word'>clocking</span> <span class='word'>128</span> <span class='word'>bits</span> <span class='ignore'>(</span><span class='word'>8</span> <span class='word'>registers</span> <span class='word'>of</span> <span class='word'>16</span> <span class='word'>bits</span><span class='ignore'>)</span> <span class='word'>into</span> <span class='word'>another</span> <span class='word'>register</span> <span class='ignore'>(</span><span class='word'>which</span> <span class='word'>would</span> <span class='word'>increase</span> <span class='word'>timing</span> <span class='word'>delays</span> <span class='word'>and</span> <span class='word'>logic</span> <span class='word'>elements</span><span class='ignore'>)</span><span class='ignore'>,</span> <span class='word'>a</span> <span class='word'>dedicated</span> <span class='word'>register</span> <span class='word'>set</span> <span class='word'>for</span> <span class='word'>the</span> <span class='word'>interrupt</span> <span class='word'>mode</span> <span class='ignore'>(</span><span class='cmd'>\verb</span><span class='cmd'>|</span><span class='ignore'>regs_isr</span><span class='cmd'>|</span><span class='ignore'>)</span> <span class='word'>is</span> <span class='word'>multiplexed</span> <span class='word'>with</span> <span class='word'>the</span> <span class='word'>normal</span> <span class='word'>mode</span> <span class='word'>register</span> <span class='word'>set</span> <span class='ignore'>(</span><span class='cmd'>\verb</span><span class='cmd'>|</span><span class='ignore'>regs</span><span class='cmd'>|</span><span class='ignore'>)</span><span class='ignore'>.</span> <span class='word'>Then</span> <span class='word'>depending</span> <span class='word'>on</span> <span class='word'>the</span> <span class='word'>mode</span> <span class='ignore'>(</span><span class='word'>identified</span> <span class='word'>by</span> <span class='word'>the</span> <span class='word'>register</span> <span class='cmd'>\verb</span><span class='cmd'>|</span><span class='ignore'>regs_use_int</span><span class='cmd'>|</span><span class='ignore'>)</span> <span class='word'>the</span> <span class='word'>processor</span> <span class='word'>can</span> <span class='word'>easily</span> <span class='word'>switch</span> <span class='word'>between</span> <span class='word'>the</span> <span class='word'>two</span> <span class='word'>large</span> <span class='word'>states</span> <span class='word'>without</span> <span class='word'>significantly</span> <span class='word'>affecting</span> <span class='word'>timing</span><span class='ignore'>.</span><br>
<br>
<span class='word'>The</span> <span class='word'>timing</span> <span class='word'>diagram</span> <span class='word'>in</span> <span class='cmd'>\cref</span><span class='ignore'>{</span><span class='word'>fig</span><span class='ignore'>:</span><span class='word'>interrupts</span><span class='ignore'>}</span> <span class='word'>shows</span> <span class='word'>the</span> <span class='word'>behavioural</span> <span class='word'>logic</span> <span class='word'>for</span> <span class='word'>the</span> <span class='word'>TIMR0</span> <span class='word'>interrupt</span> <span class='word'>source</span><span class='ignore'>.</span><br>
<br>
<span class='envir'>\begin</span><span class='envir'>{figure}</span><span class='option'>[H]</span><br>
<span class='exclcmd'>\centering</span><br>
<span class='exclcmd'>\includegraphics</span><span class='option'>[width=\textwidth]</span><span class='ignore'>{</span><span class='ignore'>interrupts</span><span class='ignore'>}</span><br>
<span class='cmd'>\caption</span><span class='ignore'>{</span><span class='oword'>Time</span> <span class='oword'>diagram</span> <span class='oword'>showing</span> <span class='oword'>the</span> <span class='oword'>TIMR0</span> <span class='oword'>peripheral</span> <span class='oword'>emitting</span> <span class='oword'>a</span> <span class='oword'>1us</span> <span class='oword'>periodic</span> <span class='oword'>interrupt</span> <span class='oword'>signal</span> <span class='ignore'>(</span><span class='oword'>out</span><span class='ignore'>)</span> <span class='oword'>to</span> <span class='oword'>the</span> <span class='oword'>processor</span><span class='ignore'>.</span> <span class='oword'>The</span> <span class='oword'>processor</span> <span class='oword'>acknowledges</span> <span class='oword'>the</span> <span class='oword'>interrupt</span> <span class='ignore'>(</span><span class='oword'>int</span><span class='cmd'>\_</span><span class='oword'>pending</span><span class='cmd'>\_</span><span class='oword'>ack</span><span class='ignore'>)</span> <span class='oword'>and</span> <span class='oword'>enters</span> <span class='oword'>the</span> <span class='oword'>interrupt</span> <span class='oword'>mode</span> <span class='ignore'>(</span><span class='oword'>regs</span><span class='cmd'>\_</span><span class='oword'>use</span><span class='cmd'>\_</span><span class='oword'>int</span><span class='ignore'>)</span> <span class='oword'>for</span> <span class='oword'>a</span> <span class='oword'>period</span> <span class='oword'>of</span> <span class='oword'>time</span><span class='ignore'>.</span> <span class='oword'>When</span> <span class='oword'>the</span> <span class='oword'>interrupt</span> <span class='oword'>handler</span> <span class='oword'>reaches</span> <span class='oword'>the</span> <span class='oword'>Interrupt</span> <span class='oword'>Return</span> <span class='oword'>instruction</span> <span class='ignore'>(</span><span class='oword'>indicated</span> <span class='oword'>by</span> <span class='oword'>w</span><span class='cmd'>\_</span><span class='oword'>intr</span><span class='ignore'>)</span> <span class='oword'>the</span> <span class='oword'>processor</span> <span class='oword'>returns</span> <span class='oword'>to</span> <span class='oword'>normal</span> <span class='oword'>mode</span> <span class='oword'>and</span> <span class='oword'>restores</span> <span class='oword'>the</span> <span class='oword'>normal</span> <span class='oword'>state</span><span class='ignore'>.</span><span class='ignore'>}</span><br>
<span class='exclcmd'>\label</span><span class='ignore'>{</span><span class='ignore'>fig</span><span class='ignore'>:</span><span class='ignore'>interrupts</span><span class='ignore'>}</span><br>
<span class='envir'>\end</span><span class='envir'>{figure}</span><br>
<br>
<span class='cmd'>\subsection</span><span class='ignore'>{</span><span class='hword'>Software</span> <span class='hword'>Interface</span><span class='ignore'>}</span><br>
<span class='word'>A</span> <span class='word'>memory-mapped</span> <span class='word'>software</span> <span class='word'>interface</span> <span class='word'>is</span> <span class='word'>provided</span> <span class='word'>through</span> <span class='word'>the</span> <span class='word'>MMU</span> <span class='word'>to</span> <span class='word'>allow</span> <span class='word'>easy</span> <span class='word'>software</span> <span class='word'>control</span> <span class='word'>of</span> <span class='word'>the</span> <span class='word'>interrupt</span> <span class='word'>behaviour</span><span class='ignore'>.</span> <span class='word'>The</span> <span class='word'>interface</span> <span class='word'>is</span> <span class='word'>provided</span> <span class='word'>at</span> <span class='word'>the</span> <span class='word'>address</span> <span class='word'>range</span> <span class='word'>0x0100</span> <span class='word'>to</span> <span class='word'>0x0108</span><span class='ignore'>.</span> <span class='word'>This</span> <span class='word'>interface</span> <span class='word'>is</span> <span class='word'>per-core</span> <span class='word'>allowing</span> <span class='word'>each</span> <span class='word'>core</span> <span class='word'>to</span> <span class='word'>individually</span> <span class='word'>control</span> <span class='word'>what</span> <span class='word'>interrupts</span> <span class='word'>it</span> <span class='word'>receives</span> <span class='word'>and</span> <span class='word'>what</span> <span class='word'>functions</span> <span class='word'>to</span> <span class='word'>call</span> <span class='word'>upon</span> <span class='word'>an</span> <span class='word'>interrupt</span><span class='ignore'>.</span> <span class='word'>This</span> <span class='word'>enables</span> <span class='word'>complex</span> <span class='word'>functionality</span><span class='ignore'>,</span> <span class='word'>such</span> <span class='word'>as</span> <span class='word'>allowing</span> <span class='word'>each</span> <span class='word'>core</span> <span class='word'>to</span> <span class='word'>execute</span> <span class='word'>different</span> <span class='word'>functions</span> <span class='word'>upon</span> <span class='word'>the</span> <span class='word'>same</span> <span class='word'>interrupt</span><span class='ignore'>.</span><br>
<br>
<span class='envir'>\begin</span><span class='envir'>{figure}</span><span class='option'>[H]</span><br>
<span class='exclcmd'>\centering</span><br>
<span class='exclenv'>\begin</span><span class='exclenv'>{bytefield}</span><span class='option'>[bitwidth=4ex, rightcurly=., rightcurlyspace=0pt]</span><span class='ignore'>{</span><span class='ignore'>16</span><span class='ignore'>}</span><br>
<span class='exclcmd'>\bitheader</span><span class='option'>[endianness=big]</span><span class='ignore'>{</span><span class='ignore'>0-15</span><span class='ignore'>}</span> <span class='exclcmd'>\\</span><br>
<span class='exclenv'>\begin</span><span class='exclenv'>{rightwordgroup}</span><span class='ignore'>{</span><span class='ignore'>0100</span> <span class='ignore'>RW</span><span class='ignore'>}</span><br>
<span class='exclcmd'>\bitbox</span><span class='ignore'>{</span><span class='ignore'>16</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='ignore'>Interrupt</span> <span class='ignore'>handler</span> <span class='exclmath'>$</span><span class='math'>0</span><span class='exclmath'>$</span><span class='ignore'>}</span><br>
<span class='exclenv'>\end</span><span class='exclenv'>{rightwordgroup}</span><span class='exclcmd'>\\</span><br>
<br>
<span class='exclcmd'>\bitbox</span><span class='option'>[]</span><span class='ignore'>{</span><span class='ignore'>16</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='exclmath'>$</span><span class='mathcmd'>\vdots</span><span class='exclmath'>$</span> <span class='exclcmd'>\\</span><span class='option'>[1ex]</span><span class='ignore'>}</span> <span class='exclcmd'>\\</span><br>
<span class='exclenv'>\begin</span><span class='exclenv'>{rightwordgroup}</span><span class='ignore'>{</span><span class='ignore'>0107</span> <span class='ignore'>RW</span><span class='ignore'>}</span><br>
<span class='exclcmd'>\bitbox</span><span class='ignore'>{</span><span class='ignore'>16</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='ignore'>Interrupt</span> <span class='ignore'>handler</span> <span class='exclmath'>$</span><span class='math'>7</span><span class='exclmath'>$</span><span class='ignore'>}</span><br>
<span class='exclenv'>\end</span><span class='exclenv'>{rightwordgroup}</span><span class='exclcmd'>\\</span><br>
<br>
<span class='exclenv'>\begin</span><span class='exclenv'>{rightwordgroup}</span><span class='ignore'>{</span><span class='ignore'>0108</span> <span class='ignore'>RW</span><span class='ignore'>}</span><br>
<span class='exclcmd'>\bitbox</span><span class='ignore'>{</span><span class='ignore'>8</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='exclcmd'>\color</span><span class='ignore'>{</span><span class='ignore'>lightgray</span><span class='ignore'>}</span><span class='exclcmd'>\rule</span><span class='ignore'>{</span><span class='exclcmd'>\width</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='exclcmd'>\height</span><span class='ignore'>}</span><span class='ignore'>}</span> <span class='ignore'>&amp;</span> <span class='exclcmd'>\bitbox</span><span class='ignore'>{</span><span class='ignore'>8</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='ignore'>Interrupt</span> <span class='ignore'>bit</span> <span class='ignore'>mask</span><span class='ignore'>}</span><br>
<span class='exclenv'>\end</span><span class='exclenv'>{rightwordgroup}</span><br>
<span class='exclenv'>\end</span><span class='exclenv'>{bytefield}</span><br>
<span class='cmd'>\caption</span><span class='ignore'>{</span><span class='oword'>The</span> <span class='oword'>interrupt</span> <span class='oword'>vector</span> <span class='ignore'>(</span><span class='oword'>0x0100</span> <span class='ignore'>-</span> <span class='oword'>0x0107</span><span class='ignore'>)</span> <span class='oword'>consists</span> <span class='oword'>of</span> <span class='oword'>eight</span> <span class='oword'>16-bit</span> <span class='oword'>values</span> <span class='oword'>that</span> <span class='oword'>point</span> <span class='oword'>to</span> <span class='oword'>memory</span> <span class='oword'>addresses</span> <span class='oword'>of</span> <span class='oword'>the</span> <span class='oword'>instruction</span> <span class='oword'>memory</span> <span class='oword'>to</span> <span class='oword'>jump</span> <span class='oword'>to</span><span class='ignore'>.</span><span class='ignore'>}</span><br>
<span class='exclcmd'>\label</span><span class='ignore'>{</span><span class='ignore'>fig</span><span class='ignore'>:</span><span class='ignore'>r</span><span class='ignore'>_</span><span class='ignore'>interrupts</span><span class='ignore'>}</span><br>
<span class='envir'>\end</span><span class='envir'>{figure}</span><br>
<br>
<span class='cmd'>\subsubsection</span><span class='ignore'>{</span><span class='hword'>Interrupt</span> <span class='hword'>Vector</span> <span class='ignore'>(</span><span class='hword'>0x0100-0x0107</span><span class='ignore'>)</span><span class='ignore'>}</span><br>
<span class='word'>The</span> <span class='word'>interrupt</span> <span class='word'>vector</span> <span class='word'>is</span> <span class='word'>a</span> <span class='word'>per-core</span> <span class='word'>register</span> <span class='word'>that</span> <span class='word'>is</span> <span class='word'>used</span> <span class='word'>to</span> <span class='word'>store</span> <span class='word'>the</span> <span class='word'>addresses</span> <span class='word'>of</span> <span class='word'>interrupt</span> <span class='word'>handlers</span><span class='ignore'>.</span> <span class='word'>An</span> <span class='word'>interrupt</span> <span class='word'>handler</span> <span class='word'>is</span> <span class='word'>simply</span> <span class='word'>a</span> <span class='word'>software</span> <span class='word'>function</span> <span class='word'>residing</span> <span class='word'>in</span> <span class='word'>instruction</span> <span class='word'>memory</span> <span class='word'>that</span> <span class='word'>is</span> <span class='word'>branched</span> <span class='word'>to</span> <span class='word'>when</span> <span class='word'>a</span> <span class='word'>particular</span> <span class='word'>interrupt</span> <span class='word'>is</span> <span class='word'>received</span><span class='ignore'>.</span> <br>
<br>
<span class='cmd'>\subsubsection</span><span class='ignore'>{</span><span class='hword'>Interrupt</span> <span class='hword'>Mask</span> <span class='ignore'>(</span><span class='hword'>0x0108</span><span class='ignore'>)</span><span class='ignore'>}</span><br>
<span class='word'>The</span> <span class='word'>interrupt</span> <span class='word'>mask</span> <span class='word'>is</span> <span class='word'>a</span> <span class='word'>per-core</span> <span class='word'>register</span> <span class='word'>that</span> <span class='word'>is</span> <span class='word'>used</span> <span class='word'>to</span> <span class='word'>mask</span><span class='ignore'>/</span><span class='word'>listen</span> <span class='word'>specific</span> <span class='word'>interrupt</span> <span class='word'>sources</span><span class='ignore'>.</span> <span class='word'>This</span> <span class='word'>enables</span> <span class='word'>processing</span> <span class='word'>cores</span> <span class='word'>to</span> <span class='word'>individually</span> <span class='word'>select</span> <span class='word'>which</span> <span class='word'>interrupts</span> <span class='word'>they</span> <span class='word'>respond</span> <span class='word'>to</span><span class='ignore'>.</span> <span class='word'>This</span> <span class='word'>allows</span> <span class='word'>for</span> <span class='word'>multi-processor</span> <span class='word'>designs</span> <span class='word'>where</span> <span class='word'>each</span> <span class='word'>core</span> <span class='word'>can</span> <span class='word'>be</span> <span class='word'>used</span> <span class='word'>for</span> <span class='word'>a</span> <span class='word'>particular</span> <span class='word'>interrupt</span> <span class='word'>source</span><span class='ignore'>,</span> <span class='word'>improving</span> <span class='word'>the</span> <span class='word'>time</span> <span class='word'>response</span> <span class='word'>to</span> <span class='word'>the</span> <span class='word'>interrupt</span> <span class='word'>for</span> <span class='word'>time</span> <span class='word'>critical</span> <span class='word'>programs</span><span class='ignore'>.</span> <span class='word'>The</span> <span class='word'>Interrupt</span> <span class='word'>Mask</span> <span class='word'>register</span> <span class='word'>is</span> <span class='word'>an</span> <span class='word'>8-bit</span> <span class='word'>read</span><span class='ignore'>/</span><span class='word'>write</span> <span class='word'>register</span> <span class='word'>where</span> <span class='word'>each</span> <span class='word'>bit</span> <span class='word'>corresponds</span> <span class='word'>to</span> <span class='word'>a</span> <span class='word'>particular</span> <span class='word'>interrupt</span> <span class='word'>source</span> <span class='word'>and</span> <span class='word'>each</span> <span class='word'>bit</span> <span class='word'>corresponds</span> <span class='word'>with</span> <span class='word'>the</span> <span class='word'>interrupt</span> <span class='word'>handler</span> <span class='word'>in</span> <span class='word'>the</span> <span class='word'>interrupt</span> <span class='word'>vector</span><span class='ignore'>.</span> <span class='word'>The</span> <span class='word'>interrupt</span> <span class='word'>mask</span> <span class='word'>register</span> <span class='word'>is</span> <span class='word'>shown</span> <span class='word'>in</span> <span class='cmd'>\cref</span><span class='ignore'>{</span><span class='word'>fig</span><span class='ignore'>:</span><span class='word'>r</span><span class='ignore'>_</span><span class='word'>interruptmask</span><span class='ignore'>}</span><span class='ignore'>.</span><br>
<br>
<span class='envir'>\begin</span><span class='envir'>{figure}</span><br>
<span class='exclcmd'>\centering</span><br>
<span class='exclenv'>\begin</span><span class='exclenv'>{bytefield}</span><span class='option'>[bitwidth=4ex]</span><span class='ignore'>{</span><span class='ignore'>16</span><span class='ignore'>}</span><br>
<span class='ignore'>&amp;</span> <span class='exclcmd'>\bitlabel</span><span class='ignore'>{</span><span class='ignore'>8</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='ignore'>}</span> <span class='ignore'>&amp;</span><br>
<span class='ignore'>&amp;</span> <span class='exclcmd'>\bitlabel</span><span class='ignore'>{</span><span class='ignore'>6</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='ignore'>[</span><span class='ignore'>7</span><span class='ignore'>:</span><span class='ignore'>2</span><span class='ignore'>]</span> <span class='ignore'>User</span> <span class='ignore'>defined</span><span class='ignore'>}</span> <span class='ignore'>&amp;</span><br>
<span class='ignore'>&amp;</span> <span class='exclcmd'>\bitlabel</span><span class='ignore'>{</span><span class='ignore'>1</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='ignore'>UART0</span> <span class='ignore'>RX</span><span class='ignore'>}</span> <br>
<span class='ignore'>&amp;</span> <span class='exclcmd'>\bitlabel</span><span class='ignore'>{</span><span class='ignore'>1</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='ignore'>TIMR0</span><span class='ignore'>}</span> <span class='exclcmd'>\\</span><br>
<span class='exclcmd'>\bitheader</span><span class='option'>[endianness=big]</span><span class='ignore'>{</span><span class='ignore'>0-7</span><span class='ignore'>,</span><span class='ignore'>8</span><span class='ignore'>,</span><span class='ignore'>15</span><span class='ignore'>}</span> <span class='exclcmd'>\\</span><br>
&nbsp;<span class='exclcmd'>\bitbox</span><span class='ignore'>{</span><span class='ignore'>8</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='exclcmd'>\color</span><span class='ignore'>{</span><span class='ignore'>lightgray</span><span class='ignore'>}</span><span class='exclcmd'>\rule</span><span class='ignore'>{</span><span class='exclcmd'>\width</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='exclcmd'>\height</span><span class='ignore'>}</span><span class='ignore'>}</span><br>
<span class='ignore'>&amp;</span> <span class='exclcmd'>\bitbox</span><span class='ignore'>{</span><span class='ignore'>1</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='ignore'>0</span><span class='ignore'>}</span><br>
<span class='ignore'>&amp;</span> <span class='exclcmd'>\bitbox</span><span class='ignore'>{</span><span class='ignore'>1</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='ignore'>0</span><span class='ignore'>}</span><br>
<span class='ignore'>&amp;</span> <span class='exclcmd'>\bitbox</span><span class='ignore'>{</span><span class='ignore'>1</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='ignore'>0</span><span class='ignore'>}</span><br>
<span class='ignore'>&amp;</span> <span class='exclcmd'>\bitbox</span><span class='ignore'>{</span><span class='ignore'>1</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='ignore'>0</span><span class='ignore'>}</span><br>
<span class='ignore'>&amp;</span> <span class='exclcmd'>\bitbox</span><span class='ignore'>{</span><span class='ignore'>1</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='ignore'>0</span><span class='ignore'>}</span><br>
<span class='ignore'>&amp;</span> <span class='exclcmd'>\bitbox</span><span class='ignore'>{</span><span class='ignore'>1</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='ignore'>0</span><span class='ignore'>}</span><br>
<span class='ignore'>&amp;</span> <span class='exclcmd'>\bitbox</span><span class='ignore'>{</span><span class='ignore'>1</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='ignore'>0</span><span class='ignore'>}</span><br>
<span class='ignore'>&amp;</span> <span class='exclcmd'>\bitbox</span><span class='ignore'>{</span><span class='ignore'>1</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='ignore'>0</span><span class='ignore'>}</span><br>
<span class='exclenv'>\end</span><span class='exclenv'>{bytefield}</span><br>
<span class='cmd'>\caption</span><span class='ignore'>{</span><span class='oword'>Interrupt</span> <span class='oword'>Mask</span> <span class='oword'>register</span> <span class='ignore'>(</span><span class='oword'>0x0108</span><span class='ignore'>)</span><span class='ignore'>.</span> <span class='oword'>Each</span> <span class='oword'>bit</span> <span class='oword'>corresponds</span> <span class='oword'>to</span> <span class='oword'>an</span> <span class='oword'>interrupt</span> <span class='oword'>source</span><span class='ignore'>.</span> <span class='oword'>1</span> <span class='oword'>signifies</span> <span class='oword'>the</span> <span class='oword'>interrupt</span> <span class='oword'>is</span> <span class='oword'>enabled</span> <span class='oword'>for</span><span class='ignore'>/</span><span class='oword'>visible</span> <span class='oword'>to</span> <span class='oword'>the</span> <span class='oword'>core</span><span class='ignore'>.</span> <span class='oword'>Bits</span> <span class='ignore'>[</span><span class='oword'>7</span><span class='ignore'>:</span><span class='oword'>2</span><span class='ignore'>]</span> <span class='oword'>are</span> <span class='oword'>left</span> <span class='oword'>to</span> <span class='oword'>the</span> <span class='oword'>designer</span> <span class='oword'>to</span> <span class='oword'>assign</span><span class='ignore'>.</span> <span class='oword'>Bit</span> <span class='oword'>0</span> <span class='oword'>is</span> <span class='oword'>assigned</span> <span class='oword'>to</span> <span class='oword'>TIMR0's</span> <span class='oword'>interval</span> <span class='oword'>timer</span><span class='ignore'>.</span> <span class='oword'>Bit</span> <span class='oword'>1</span> <span class='oword'>is</span> <span class='oword'>assigned</span> <span class='oword'>to</span> <span class='oword'>the</span> <span class='oword'>UART0's</span> <span class='oword'>receiver</span> <span class='ignore'>(</span><span class='oword'>unassigned</span> <span class='oword'>if</span> <span class='oword'>DEF</span><span class='cmd'>\_</span><span class='oword'>USE</span><span class='cmd'>\_</span><span class='oword'>REPROG</span> <span class='oword'>is</span> <span class='oword'>enabled</span><span class='ignore'>)</span><span class='ignore'>.</span><span class='ignore'>}</span><br>
<span class='exclcmd'>\label</span><span class='ignore'>{</span><span class='ignore'>fig</span><span class='ignore'>:</span><span class='ignore'>r</span><span class='ignore'>_</span><span class='ignore'>interruptmask</span><span class='ignore'>}</span><br>
<span class='envir'>\end</span><span class='envir'>{figure}</span><br>
<br>
<span class='cmd'>\subsubsection</span><span class='ignore'>{</span><span class='hword'>Software</span> <span class='hword'>Example</span><span class='ignore'>}</span><br>
<span class='word'>To</span> <span class='word'>better</span> <span class='word'>understand</span> <span class='word'>the</span> <span class='word'>usage</span> <span class='word'>of</span> <span class='word'>the</span> <span class='word'>described</span> <span class='word'>interrupt</span> <span class='word'>registers</span><span class='ignore'>,</span> <span class='word'>a</span> <span class='word'>simple</span> <span class='word'>software</span> <span class='word'>program</span> <span class='word'>is</span> <span class='word'>described</span> <span class='word'>below</span><span class='ignore'>.</span> <span class='word'>The</span> <span class='word'>following</span> <span class='word'>software</span> <span class='word'>program</span> <span class='word'>produces</span> <span class='word'>a</span> <span class='word'>simple</span> <span class='word'>and</span> <span class='word'>power</span> <span class='word'>efficient</span> <span class='word'>routine</span> <span class='word'>to</span> <span class='word'>initialise</span> <span class='word'>the</span> <span class='word'>interrupt</span> <span class='word'>vector</span> <span class='word'>and</span> <span class='word'>interrupt</span> <span class='word'>mask</span><span class='ignore'>.</span><br>
<br>
<span class='comment'>% pip install pygments-arm</span><br>
<span class='envir'>\begin</span><span class='envir'>{minted}</span><span class='option'>[fontsize=\footnotesize,linenos,,baselinestretch=0.8]</span><span class='ignore'>{</span><span class='word'>arm</span><span class='ignore'>}</span><br>
<span class='word'>setup</span><span class='ignore'>_</span><span class='word'>interrupts</span><span class='ignore'>:</span><br>
&nbsp; &nbsp; <span class='ignore'>/</span><span class='ignore'>/</span> <span class='word'>Set</span> <span class='word'>interrupt</span> <span class='word'>vector</span> <span class='word'>at</span> <span class='word'>0x100</span><br>
&nbsp; &nbsp; <span class='ignore'>/</span><span class='ignore'>/</span> <span class='word'>Move</span> <span class='word'>address</span> <span class='word'>of</span> <span class='word'>isr0</span> <span class='word'>function</span> <span class='word'>to</span> <span class='word'>vector</span><span class='ignore'>[</span><span class='word'>0</span><span class='ignore'>]</span><br>
&nbsp; &nbsp; <span class='word'>movi</span>&nbsp; &nbsp; <span class='word'>r0</span><span class='ignore'>,</span> <span class='word'>isr0</span><br>
&nbsp; &nbsp; <span class='ignore'>/</span><span class='ignore'>/</span> <span class='word'>create</span> <span class='word'>0x100</span> <span class='word'>value</span> <span class='word'>by</span> <span class='word'>left</span> <span class='word'>shifting</span> <span class='word'>1</span> <span class='word'>8</span> <span class='word'>bits</span><br>
&nbsp; &nbsp; <span class='word'>movi</span>&nbsp; &nbsp; <span class='word'>r1</span><span class='ignore'>,</span> <span class='ignore'>#</span><span class='word'>0x1</span><br>
&nbsp; &nbsp; <span class='word'>movi</span>&nbsp; &nbsp; <span class='word'>r2</span><span class='ignore'>,</span> <span class='ignore'>#</span><span class='word'>0x8</span><br>
&nbsp; &nbsp; <span class='word'>lshft</span>&nbsp;  <span class='word'>r1</span><span class='ignore'>,</span> <span class='word'>r2</span><br>
&nbsp; &nbsp; <span class='ignore'>/</span><span class='ignore'>/</span> <span class='word'>write</span> <span class='word'>isr0</span> <span class='word'>address</span> <span class='word'>to</span> <span class='word'>vector</span><span class='ignore'>[</span><span class='word'>0</span><span class='ignore'>]</span><br>
&nbsp; &nbsp; <span class='word'>sw</span>&nbsp; &nbsp; &nbsp; <span class='word'>r0</span><span class='ignore'>,</span> <span class='word'>r1</span><br>
&nbsp; &nbsp; <br>
<span class='word'>enable</span><span class='ignore'>_</span><span class='word'>interrupts</span><span class='ignore'>:</span><br>
&nbsp; &nbsp; <span class='ignore'>/</span><span class='ignore'>/</span> <span class='word'>enable</span> <span class='word'>all</span> <span class='word'>interrupts</span> <span class='word'>by</span> <span class='word'>writing</span> <span class='word'>0x0f</span> <span class='word'>to</span> <span class='word'>0x108</span><br>
&nbsp; &nbsp; <span class='word'>movi</span>&nbsp; &nbsp; <span class='word'>r0</span><span class='ignore'>,</span> <span class='ignore'>#</span><span class='word'>0x0f</span><br>
&nbsp; &nbsp; <span class='word'>sw</span>&nbsp; &nbsp; &nbsp; <span class='word'>r0</span><span class='ignore'>,</span> <span class='word'>r1</span> <span class='ignore'>+</span> <span class='ignore'>#</span><span class='word'>0x8</span> <span class='ignore'>/</span><span class='ignore'>/</span> <span class='ignore'>(</span><span class='word'>0x100</span> <span class='ignore'>+</span> <span class='word'>0x8</span> <span class='ignore'>=</span> <span class='word'>0x108</span><span class='ignore'>)</span><br>
&nbsp; &nbsp; <span class='word'>halt</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='ignore'>/</span><span class='ignore'>/</span> <span class='word'>enter</span> <span class='word'>low</span> <span class='word'>power</span> <span class='word'>idle</span> <span class='word'>state</span><br>
&nbsp; &nbsp; <br>
<span class='word'>isr0</span><span class='ignore'>:</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class='ignore'>/</span><span class='ignore'>/</span> <span class='word'>arbitrary</span> <span class='word'>name</span><br>
&nbsp; &nbsp; <span class='word'>movi</span>&nbsp; &nbsp; <span class='word'>r0</span><span class='ignore'>,</span> <span class='ignore'>#</span><span class='word'>0xff</span>&nbsp; &nbsp;  <span class='ignore'>/</span><span class='ignore'>/</span> <span class='word'>do</span> <span class='word'>something</span><br>
&nbsp; &nbsp; <span class='word'>intr</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='ignore'>/</span><span class='ignore'>/</span> <span class='word'>return</span> <span class='word'>from</span> <span class='word'>interrupt</span><br>
<span class='envir'>\end</span><span class='envir'>{minted}</span><br>
<br>
<span class='word'>A</span> <span class='word'>more</span> <span class='word'>complex</span> <span class='word'>example</span> <span class='word'>software</span> <span class='word'>program</span> <span class='word'>utilising</span> <span class='word'>interrupts</span> <span class='word'>and</span> <span class='word'>the</span> <span class='word'>TIMR0</span> <span class='word'>interrupt</span> <span class='word'>is</span> <span class='word'>described</span> <span class='word'>in</span> <span class='word'>section</span> <span class='cmd'>\ref</span><span class='ignore'>{</span><span class='ignore'>sec</span><span class='ignore'>:</span><span class='ignore'>2coretimer</span><span class='ignore'>}</span><span class='ignore'>.</span><br>
<br>
<span class='cmd'>\subsection</span><span class='ignore'>{</span><span class='hword'>Design</span> <span class='hword'>Improvements</span><span class='ignore'>}</span><br>
<span class='word'>The</span> <span class='word'>hardware</span> <span class='word'>and</span> <span class='word'>software</span> <span class='word'>interrupt</span> <span class='word'>design</span> <span class='word'>have</span> <span class='word'>changed</span> <span class='word'>throughout</span> <span class='word'>the</span> <span class='word'>projects</span> <span class='word'>cycle</span><span class='ignore'>.</span> <span class='word'>In</span> <span class='word'>initial</span> <span class='word'>versions</span> <span class='word'>of</span> <span class='word'>the</span> <span class='word'>interrupt</span> <span class='word'>implementation</span><span class='ignore'>,</span> <span class='word'>the</span> <span class='word'>software</span> <span class='word'>program</span><span class='ignore'>,</span> <span class='word'>while</span> <span class='word'>waiting</span> <span class='word'>for</span> <span class='word'>an</span> <span class='word'>interrupt</span><span class='ignore'>,</span> <span class='word'>would</span> <span class='word'>be</span> <span class='word'>in</span> <span class='word'>a</span> <span class='word'>tight</span> <span class='word'>infinite</span> <span class='word'>loop</span> <span class='ignore'>(</span><span class='word'>branching</span> <span class='word'>to</span> <span class='word'>the</span> <span class='word'>same</span> <span class='word'>instruction</span><span class='ignore'>)</span><span class='ignore'>.</span> <span class='word'>This</span> <span class='word'>resulted</span> <span class='word'>in</span> <span class='word'>the</span> <span class='word'>processor</span> <span class='word'>using</span> <span class='word'>all</span> <span class='word'>pipeline</span> <span class='word'>stages</span> <span class='word'>during</span> <span class='word'>this</span> <span class='word'>time</span><span class='ignore'>.</span> <span class='word'>The</span> <span class='word'>pipeline</span> <span class='word'>stages</span> <span class='word'>produce</span> <span class='word'>many</span> <span class='word'>logic</span> <span class='word'>transitions</span> <span class='word'>and</span> <span class='word'>memory</span> <span class='word'>fetches</span> <span class='word'>which</span> <span class='word'>raise</span> <span class='word'>power</span> <span class='word'>consumption</span> <span class='word'>and</span> <span class='word'>temperatures</span><span class='ignore'>.</span> <span class='word'>This</span> <span class='word'>is</span> <span class='word'>quite</span> <span class='word'>noticeable</span> <span class='word'>especially</span> <span class='word'>when</span> <span class='word'>running</span> <span class='word'>on</span> <span class='word'>the</span> <span class='word'>Spartan-6</span> <span class='word'>LX9</span> <span class='word'>FPGA</span><span class='ignore'>.</span><br>
<br>
<span class='word'>To</span> <span class='word'>improve</span> <span class='word'>this</span><span class='ignore'>,</span> <span class='word'>it</span> <span class='word'>was</span> <span class='word'>decided</span> <span class='word'>to</span> <span class='word'>implement</span> <span class='word'>a</span> <span class='word'>new</span> <span class='word'>state</span> <span class='word'>within</span> <span class='word'>the</span> <span class='word'>processor's</span> <span class='word'>state</span> <span class='word'>machine</span> <span class='word'>that</span><span class='ignore'>,</span> <span class='word'>when</span> <span class='word'>entered</span><span class='ignore'>,</span> <span class='word'>did</span> <span class='word'>not</span> <span class='word'>produce</span> <span class='word'>high</span> <span class='word'>frequency</span> <span class='word'>logic</span> <span class='word'>transitions</span> <span class='word'>or</span> <span class='word'>memory</span> <span class='word'>fetches</span><span class='ignore'>.</span> <span class='word'>The</span> <span class='cmd'>\verb</span><span class='cmd'>|</span><span class='ignore'>HALT</span><span class='cmd'>|</span> <span class='word'>instruction</span> <span class='word'>was</span> <span class='word'>modified</span> <span class='word'>to</span> <span class='word'>enter</span> <span class='word'>this</span> <span class='word'>state</span> <span class='word'>and</span> <span class='word'>the</span> <span class='word'>only</span> <span class='word'>way</span> <span class='word'>to</span> <span class='word'>leave</span> <span class='word'>is</span> <span class='word'>from</span> <span class='word'>an</span> <span class='word'>interrupt</span> <span class='word'>or</span> <span class='word'>top-level</span> <span class='word'>reset</span><span class='ignore'>.</span> <span class='word'>This</span> <span class='word'>removes</span> <span class='word'>the</span> <span class='word'>need</span> <span class='word'>for</span> <span class='word'>a</span> <span class='word'>software</span> <span class='word'>infinite</span> <span class='word'>loop</span> <span class='word'>that</span> <span class='word'>produces</span> <span class='word'>high</span> <span class='word'>frequency</span> <span class='word'>logic</span> <span class='word'>transitions</span> <span class='ignore'>(</span><span class='word'>decoding</span><span class='ignore'>,</span> <span class='word'>ALU</span><span class='ignore'>,</span> <span class='word'>register</span> <span class='word'>reads</span><span class='ignore'>,</span> <span class='word'>etc</span><span class='ignore'>.</span><span class='ignore'>)</span> <span class='word'>and</span> <span class='word'>memory</span> <span class='word'>fetches</span><span class='ignore'>.</span><br>
<br>
<br>
<br>
<br>
<br>
<span class='cmd'>\section</span><span class='ignore'>{</span><span class='hword'>Verification</span><span class='ignore'>}</span><br>
<span class='word'>Various</span> <span class='word'>verification</span> <span class='word'>techniques</span> <span class='word'>are</span> <span class='word'>employed</span> <span class='word'>to</span> <span class='word'>ensure</span> <span class='word'>correct</span> <span class='word'>operation</span> <span class='word'>of</span> <span class='word'>the</span> <span class='word'>processor</span><span class='ignore'>.</span><br>
<br>
<span class='word'>The</span> <span class='word'>first</span> <span class='word'>technique</span> <span class='word'>involves</span> <span class='word'>using</span> <span class='word'>static</span> <span class='word'>assertions</span> <span class='word'>to</span> <span class='word'>identify</span> <span class='word'>incorrect</span> <span class='word'>configuration</span> <span class='word'>parameters</span> <span class='word'>at</span> <span class='word'>compile</span> <span class='word'>time</span><span class='ignore'>,</span> <span class='word'>such</span> <span class='word'>as</span> <span class='word'>having</span> <span class='word'>zero</span> <span class='word'>instruction</span> <span class='word'>memory</span> <span class='word'>and</span> <span class='word'>scratch</span> <span class='word'>memory</span> <span class='word'>depth</span><span class='ignore'>.</span> <span class='word'>These</span> <span class='word'>assertions</span> <span class='word'>use</span> <span class='word'>the</span> <span class='cmd'>\verb</span><span class='cmd'>|</span><span class='ignore'>static_assert</span><span class='cmd'>|</span> <span class='word'>for</span> <span class='word'>top</span> <span class='word'>level</span> <span class='word'>checks</span> <span class='word'>and</span> <span class='cmd'>\verb</span><span class='cmd'>|</span><span class='ignore'>static_assert_ng</span><span class='cmd'>|</span> <span class='word'>for</span> <span class='word'>checks</span> <span class='word'>inside</span> <span class='cmd'>\verb</span><span class='cmd'>|</span><span class='ignore'>generate</span><span class='cmd'>|</span> <span class='word'>blocks</span><span class='ignore'>.</span><br>
<br>
<span class='word'>The</span> <span class='word'>second</span> <span class='word'>verification</span> <span class='word'>technique</span> <span class='word'>is</span> <span class='word'>to</span> <span class='word'>use</span> <span class='word'>assertions</span> <span class='word'>in</span> <span class='cmd'>\verb</span><span class='cmd'>|</span><span class='ignore'>always</span><span class='cmd'>|</span> <span class='word'>blocks</span> <span class='word'>to</span> <span class='word'>identify</span> <span class='word'>incorrect</span> <span class='word'>behavioural</span> <span class='word'>states</span><span class='ignore'>.</span> <span class='word'>This</span> <span class='word'>is</span> <span class='word'>done</span> <span class='word'>using</span> <span class='word'>the</span> <span class='cmd'>\verb</span><span class='cmd'>|</span><span class='ignore'>rassert</span><span class='cmd'>|</span> <span class='ignore'>(</span><span class='word'>run-time</span> <span class='word'>assert</span><span class='ignore'>)</span> <span class='word'>macro</span><span class='ignore'>.</span><br>
<br>
<span class='word'>The</span> <span class='word'>third</span> <span class='word'>verification</span> <span class='word'>technique</span> <span class='word'>is</span> <span class='word'>to</span> <span class='word'>use</span> <span class='word'>automatic</span> <span class='word'>verifying</span> <span class='word'>test</span> <span class='word'>benches</span><span class='ignore'>.</span> <span class='word'>These</span> <span class='word'>test</span> <span class='word'>benches</span> <span class='word'>drive</span> <span class='word'>components</span> <span class='word'>of</span> <span class='word'>the</span> <span class='word'>processor</span><span class='ignore'>,</span> <span class='word'>such</span> <span class='word'>as</span> <span class='word'>the</span> <span class='word'>ALU</span> <span class='word'>and</span> <span class='word'>decoder</span><span class='ignore'>,</span> <span class='word'>and</span> <span class='word'>check</span> <span class='word'>the</span> <span class='word'>output</span> <span class='word'>against</span> <span class='word'>the</span> <span class='word'>correct</span> <span class='word'>value</span><span class='ignore'>.</span> <span class='word'>This</span> <span class='word'>uses</span> <span class='word'>the</span> <span class='cmd'>\verb</span><span class='cmd'>|</span><span class='ignore'>rassert</span><span class='cmd'>|</span> <span class='word'>macro</span><span class='ignore'>.</span><br>
<br>
<span class='word'>The</span> <span class='word'>final</span> <span class='word'>method</span> <span class='word'>of</span> <span class='word'>verification</span> <span class='word'>is</span> <span class='word'>to</span> <span class='word'>verify</span> <span class='word'>the</span> <span class='word'>complete</span> <span class='word'>design</span> <span class='word'>via</span> <span class='word'>a</span> <span class='word'>behavioural</span> <span class='word'>test</span> <span class='word'>bench</span><span class='ignore'>.</span> <span class='word'>The</span> <span class='word'>design</span> <span class='word'>is</span> <span class='word'>passed</span> <span class='word'>a</span> <span class='word'>compiled</span> <span class='word'>software</span> <span class='word'>program</span> <span class='word'>with</span> <span class='word'>a</span> <span class='word'>known</span> <span class='word'>expected</span> <span class='word'>output</span><span class='ignore'>,</span> <span class='word'>and</span> <span class='word'>is</span> <span class='word'>ran</span> <span class='word'>until</span> <span class='word'>the</span> <span class='cmd'>\verb</span><span class='cmd'>|</span><span class='ignore'>r_halt</span><span class='cmd'>|</span> <span class='word'>signal</span> <span class='word'>is</span> <span class='word'>raised</span><span class='ignore'>.</span> <span class='word'>The</span> <span class='word'>test</span> <span class='word'>bench</span> <span class='word'>then</span> <span class='word'>checks</span> <span class='word'>the</span> <span class='word'>value</span> <span class='word'>on</span> <span class='word'>the</span> <span class='cmd'>\verb</span><span class='cmd'>|</span><span class='ignore'>debug0</span><span class='cmd'>|</span><span class='ignore'>,</span> <span class='cmd'>\verb</span><span class='cmd'>|</span><span class='ignore'>debug1</span><span class='cmd'>|</span><span class='ignore'>,</span> <span class='word'>and</span> <span class='cmd'>\verb</span><span class='cmd'>|</span><span class='ignore'>debug2</span><span class='cmd'>|</span> <span class='word'>signals</span> <span class='word'>against</span> <span class='word'>the</span> <span class='word'>expected</span> <span class='word'>value</span><span class='ignore'>.</span> <span class='word'>If</span> <span class='word'>this</span> <span class='word'>matches</span><span class='ignore'>,</span> <span class='word'>then</span> <span class='word'>it</span> <span class='word'>is</span> <span class='word'>assumed</span> <span class='word'>that</span> <span class='word'>sub-components</span> <span class='word'>of</span> <span class='word'>the</span> <span class='word'>design</span> <span class='word'>also</span> <span class='word'>operate</span> <span class='word'>correctly</span><span class='ignore'>.</span> <span class='word'>This</span> <span class='word'>technique</span> <span class='word'>does</span> <span class='word'>not</span> <span class='word'>monitor</span> <span class='word'>the</span> <span class='word'>states</span> <span class='word'>of</span> <span class='word'>sub-components</span> <span class='word'>and</span> <span class='word'>statistics</span> <span class='ignore'>(</span><span class='word'>such</span> <span class='word'>as</span> <span class='word'>time</span> <span class='word'>taken</span> <span class='word'>to</span> <span class='word'>execute</span> <span class='word'>an</span> <span class='word'>instruction</span><span class='ignore'>)</span><span class='ignore'>,</span> <span class='word'>there</span> <span class='word'>leaves</span> <span class='word'>the</span> <span class='word'>possibility</span> <span class='word'>that</span> <span class='word'>some</span> <span class='word'>components</span> <span class='word'>could</span> <span class='word'>have</span> <span class='word'>entered</span> <span class='word'>an</span> <span class='word'>illegal</span> <span class='word'>state</span><span class='ignore'>.</span><br>
<br>
<br>
<br>
<br>
<br>
</p></div>
<div class='count'>
<ul class='count'>
<li class='header'>Included file: ./chapter_singlecore.tex</li>
<li>Encoding: ascii</li>
<li>Words in text: 2557</li>
<li>Words in headers: 46</li>
<li>Words outside text (captions, etc.): 221</li>
<li>Number of headers: 21</li>
<li>Number of floats/tables/figures: 5</li>
<li>Number of math inlines: 3</li>
<li>Number of math displayed: 0</li>
<li>Subcounts:</li>
<span class='subcount'>
<li class='fielddesc'>&nbsp; text+headers+captions (#headers/#floats/#inlines/#displayed)</li>
  <li>1+2+0 (1/0/0/0) Chapter: Single-core Design</li>
  <li>39+1+0 (1/0/0/0) Section: Introduction</li>
  <li>76+3+31 (1/1/0/0) Section: Design and Implementation</li>
  <li>144+3+0 (1/0/0/0) Subsection: Instruction Set Architecture</li>
  <li>48+3+0 (1/0/0/0) Subsection: Memory Management Unit</li>
  <li>158+4+0 (1/0/0/0) Subsection: Instruction and Data Memory</li>
  <li>328+2+31 (1/1/3/0) Subsection: ALU Design</li>
  <li>220+2+21 (1/0/0/0) Subsection: Decoder Design</li>
  <li>107+1+0 (1/0/0/0) Subsection: Pipelining</li>
  <li>313+6+0 (2/0/0/0) Subsection: Design Optimisations</li>
  <li>119+1+0 (1/0/0/0) Section: Interrupts</li>
  <li>129+1+0 (1/0/0/0) Subsection: Overview</li>
  <li>175+4+61 (2/1/0/0) Subsection: Hardware Implementation</li>
  <li>339+10+77 (4/2/0/0) Subsection: Software Interface</li>
  <li>152+2+0 (1/0/0/0) Subsection: Design Improvements</li>
  <li>209+1+0 (1/0/0/0) Section: Verification</li>
</span>
</ul>
</div>
<h2>File: ./chapter_design.tex</h2>
<div class='parse'><p>
<br>
<span class='cmd'>\chapter</span><span class='ignore'>{</span><span class='hword'>Interconnect</span><span class='ignore'>}</span><br>
<span class='cmd'>\startcontents</span><span class='option'>[chapters]</span><br>
<span class='cmd'>\printcontents</span><span class='option'>[chapters]</span><span class='ignore'>{</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='word'>1</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='ignore'>}</span><br>
<br>
<span class='comment'>%\noindent\\</span><br>
<span class='comment'>%\lipsum[1]</span><br>
<br>
<span class='cmd'>\section</span><span class='ignore'>{</span><span class='hword'>Introduction</span><span class='ignore'>}</span><br>
<span class='word'>The</span> <span class='word'>Vmicro16</span> <span class='word'>processor</span> <span class='word'>needs</span> <span class='word'>to</span> <span class='word'>communicate</span> <span class='word'>with</span> <span class='word'>multiple</span> <span class='word'>peripheral</span> <span class='word'>modules</span> <span class='ignore'>(</span><span class='word'>such</span> <span class='word'>as</span> <span class='word'>UART</span><span class='ignore'>,</span> <span class='word'>timers</span><span class='ignore'>,</span> <span class='word'>GPIO</span><span class='ignore'>,</span> <span class='word'>and</span> <span class='word'>more</span><span class='ignore'>)</span> <span class='word'>to</span> <span class='word'>provide</span> <span class='word'>useful</span> <span class='word'>functionality</span> <span class='word'>for</span> <span class='word'>the</span> <span class='word'>end</span> <span class='word'>user</span><span class='ignore'>.</span><br>
<br>
<span class='word'>Previous</span> <span class='word'>peripheral</span> <span class='word'>interface</span> <span class='word'>designs</span> <span class='word'>of</span> <span class='word'>mine</span> <span class='word'>have</span> <span class='word'>been</span> <span class='word'>directly</span> <span class='word'>connected</span> <span class='word'>to</span> <span class='word'>a</span> <span class='word'>main</span> <span class='word'>driver</span> <span class='word'>with</span> <span class='word'>unique</span> <span class='word'>inputs</span> <span class='word'>and</span> <span class='word'>outputs</span> <span class='word'>that</span> <span class='word'>the</span> <span class='word'>peripheral</span> <span class='word'>required</span><span class='ignore'>.</span> <span class='word'>For</span> <span class='word'>example</span><span class='ignore'>,</span> <span class='word'>a</span> <span class='word'>timer</span> <span class='word'>peripheral</span> <span class='word'>would</span> <span class='word'>have</span> <span class='word'>dedicated</span> <span class='word'>wires</span> <span class='word'>for</span> <span class='word'>it's</span> <span class='word'>load</span> <span class='word'>and</span> <span class='word'>prescaler</span> <span class='word'>values</span><span class='ignore'>,</span> <span class='word'>wires</span> <span class='word'>for</span> <span class='word'>enabling</span> <span class='word'>and</span> <span class='word'>resetting</span><span class='ignore'>,</span> <span class='word'>and</span> <span class='word'>wires</span> <span class='word'>for</span> <span class='word'>reading</span><span class='ignore'>.</span> <span class='word'>A</span> <span class='word'>memory</span> <span class='word'>peripheral</span> <span class='word'>would</span> <span class='word'>have</span> <span class='word'>wires</span> <span class='word'>for</span> <span class='word'>it's</span> <span class='word'>address</span><span class='ignore'>,</span> <span class='word'>read</span> <span class='word'>and</span> <span class='word'>write</span> <span class='word'>data</span><span class='ignore'>,</span> <span class='word'>and</span> <span class='word'>a</span> <span class='word'>write</span> <span class='word'>enable</span> <span class='word'>signal</span><span class='ignore'>.</span> <span class='word'>This</span> <span class='word'>resulted</span> <span class='word'>in</span> <span class='word'>each</span> <span class='word'>peripheral</span> <span class='word'>having</span> <span class='word'>a</span> <span class='word'>unique</span> <span class='word'>interface</span> <span class='word'>and</span> <span class='word'>unique</span> <span class='word'>logic</span> <span class='word'>for</span> <span class='word'>driving</span> <span class='word'>the</span> <span class='word'>peripheral</span><span class='ignore'>,</span> <span class='word'>which</span> <span class='word'>consumed</span> <span class='word'>significant</span> <span class='word'>amounts</span> <span class='word'>of</span> <span class='word'>limited</span> <span class='word'>FPGA</span> <span class='word'>resources</span><span class='ignore'>.</span><br>
<br>
<span class='word'>It</span> <span class='word'>can</span> <span class='word'>be</span> <span class='word'>seen</span> <span class='word'>that</span> <span class='word'>many</span> <span class='word'>of</span> <span class='word'>the</span> <span class='word'>peripherals</span> <span class='word'>need</span> <span class='word'>similar</span> <span class='word'>inputs</span> <span class='word'>and</span> <span class='word'>outputs</span> <span class='ignore'>(</span><span class='word'>for</span> <span class='word'>example</span> <span class='word'>read</span> <span class='word'>and</span> <span class='word'>write</span> <span class='word'>data</span> <span class='word'>signals</span><span class='ignore'>,</span> <span class='word'>write</span> <span class='word'>enables</span><span class='ignore'>,</span> <span class='word'>and</span> <span class='word'>addresses</span><span class='ignore'>)</span><span class='ignore'>,</span> <span class='word'>and</span> <span class='word'>because</span> <span class='word'>of</span> <span class='word'>this</span><span class='ignore'>,</span> <span class='word'>a</span> <span class='word'>standard</span> <span class='word'>interface</span> <span class='word'>can</span> <span class='word'>be</span> <span class='word'>used</span> <span class='word'>to</span> <span class='word'>interface</span> <span class='word'>with</span> <span class='word'>each</span> <span class='word'>peripheral</span><span class='ignore'>.</span> <span class='word'>Using</span> <span class='word'>a</span> <span class='word'>standard</span> <span class='word'>interface</span> <span class='word'>can</span> <span class='word'>reduce</span> <span class='word'>logic</span> <span class='word'>requirements</span> <span class='word'>as</span> <span class='word'>each</span> <span class='word'>peripheral</span> <span class='word'>can</span> <span class='word'>be</span> <span class='word'>driven</span> <span class='word'>by</span> <span class='word'>a</span> <span class='word'>single</span> <span class='word'>driver</span><span class='ignore'>.</span><br>
<br>
<span class='cmd'>\subsection</span><span class='ignore'>{</span><span class='hword'>Comparison</span> <span class='hword'>of</span> <span class='hword'>On-chip</span> <span class='hword'>Buses</span><span class='ignore'>}</span><br>
<span class='word'>The</span> <span class='word'>choice</span> <span class='word'>of</span> <span class='word'>on-chip</span> <span class='word'>interconnect</span> <span class='word'>has</span> <span class='word'>changed</span> <span class='word'>multiple</span> <span class='word'>times</span> <span class='word'>over</span> <span class='word'>the</span> <span class='word'>life-cycle</span> <span class='word'>of</span> <span class='word'>this</span> <span class='word'>project</span><span class='ignore'>,</span> <span class='word'>primary</span> <span class='word'>due</span> <span class='word'>to</span> <span class='word'>ease</span> <span class='word'>of</span> <span class='word'>implementation</span> <span class='word'>and</span> <span class='word'>resource</span> <span class='word'>requirements</span><span class='ignore'>.</span> <br>
<br>
<span class='word'>Originally</span><span class='ignore'>,</span> <span class='word'>it</span> <span class='word'>was</span> <span class='word'>planned</span> <span class='word'>to</span> <span class='word'>use</span> <span class='word'>the</span> <span class='word'>Wishbone</span> <span class='word'>bus</span> <span class='cmd'>\cite</span><span class='ignore'>{</span><span class='ignore'>wishbone</span><span class='ignore'>}</span> <span class='word'>due</span> <span class='word'>to</span> <span class='word'>it's</span> <span class='word'>popularity</span> <span class='word'>within</span> <span class='word'>open-source</span> <span class='word'>FPGA</span> <span class='word'>modules</span> <span class='word'>and</span> <span class='word'>good</span> <span class='word'>quality</span> <span class='word'>documentation</span><span class='ignore'>.</span><br>
<br>
<span class='word'>Late</span> <span class='word'>in</span> <span class='word'>the</span> <span class='word'>project</span><span class='ignore'>,</span> <span class='word'>it</span> <span class='word'>was</span> <span class='word'>decided</span> <span class='word'>to</span> <span class='word'>use</span> <span class='word'>the</span> <span class='word'>AMBA</span> <span class='word'>APB</span> <span class='word'>protocol</span> <span class='cmd'>\cite</span> <span class='ignore'>{</span><span class='ignore'>ambaapb</span><span class='ignore'>}</span> <span class='word'>as</span> <span class='word'>it</span> <span class='word'>is</span> <span class='word'>more</span> <span class='word'>commonly</span> <span class='word'>used</span> <span class='word'>in</span> <span class='word'>large</span> <span class='word'>commercial</span> <span class='word'>designs</span> <span class='word'>and</span> <span class='word'>understanding</span> <span class='word'>how</span> <span class='word'>the</span> <span class='word'>interface</span> <span class='word'>worked</span> <span class='word'>would</span> <span class='word'>better</span> <span class='word'>benefit</span> <span class='word'>myself</span><span class='ignore'>.</span> <span class='word'>APB</span> <span class='word'>describes</span> <span class='word'>an</span> <span class='word'>intuitive</span> <span class='word'>and</span> <span class='word'>easy</span> <span class='word'>to</span> <span class='word'>implement</span> <span class='word'>2-state</span> <span class='word'>interface</span> <span class='word'>aimed</span> <span class='word'>at</span> <span class='word'>communicating</span> <span class='word'>with</span> <span class='word'>low-throughput</span> <span class='word'>devices</span><span class='ignore'>,</span> <span class='word'>such</span> <span class='word'>as</span> <span class='word'>UARTs</span><span class='ignore'>,</span> <span class='word'>timers</span><span class='ignore'>,</span> <span class='word'>and</span> <span class='word'>watchdogs</span><span class='ignore'>.</span><br>
<br>
<span class='envir'>\begin</span><span class='envir'>{figure}</span><span class='option'>[H]</span><br>
<span class='exclcmd'>\centering</span><br>
<span class='exclcmd'>\includegraphics</span><span class='option'>[width=0.7\textwidth]</span><span class='ignore'>{</span><span class='ignore'>apb</span><span class='ignore'>_</span><span class='ignore'>wave</span><span class='ignore'>}</span><br>
<span class='cmd'>\caption</span><span class='ignore'>{</span><span class='oword'>Waveform</span> <span class='oword'>showing</span> <span class='oword'>an</span> <span class='oword'>APB</span> <span class='oword'>read</span> <span class='oword'>transaction</span><span class='ignore'>.</span><span class='ignore'>}</span><br>
<span class='envir'>\end</span><span class='envir'>{figure}</span><br>
<br>
<span class='cmd'>\section</span><span class='ignore'>{</span><span class='hword'>Overview</span><span class='ignore'>}</span><br>
<span class='word'>The</span> <span class='word'>system-on-chip</span> <span class='word'>design</span> <span class='word'>is</span> <span class='word'>split</span> <span class='word'>into</span> <span class='word'>3</span> <span class='word'>main</span> <span class='word'>parts</span><span class='ignore'>:</span> <span class='word'>peripheral</span> <span class='word'>interconnect</span> <span class='ignore'>(</span><span class='word'>red</span><span class='ignore'>)</span><span class='ignore'>,</span> <span class='word'>CPU</span> <span class='word'>array</span> <span class='ignore'>(</span><span class='word'>gray</span><span class='ignore'>)</span><span class='ignore'>,</span> <span class='word'>and</span> <span class='word'>the</span> <span class='word'>instruction</span> <span class='word'>memory</span> <span class='word'>interconnect</span> <span class='ignore'>(</span><span class='word'>green</span><span class='ignore'>)</span><span class='ignore'>.</span><br>
<br>
<span class='word'>A</span> <span class='word'>block</span> <span class='word'>diagram</span> <span class='word'>of</span> <span class='word'>this</span> <span class='word'>project</span> <span class='word'>is</span> <span class='word'>shown</span> <span class='word'>in</span> <span class='cmd'>\cref</span><span class='ignore'>{</span><span class='word'>fig</span><span class='ignore'>:</span><span class='word'>watchdog</span><span class='ignore'>}</span><br>
<span class='envir'>\begin</span><span class='envir'>{figure}</span><span class='option'>[H]</span><br>
<span class='exclcmd'>\centering</span><br>
<span class='exclcmd'>\includegraphics</span><span class='option'>[width=\textwidth]</span><span class='ignore'>{</span><span class='ignore'>watchdog</span><span class='ignore'>}</span><br>
<span class='cmd'>\caption</span><span class='ignore'>{</span><span class='oword'>Block</span> <span class='oword'>diagram</span> <span class='oword'>of</span> <span class='oword'>the</span> <span class='oword'>Vmicro16</span> <span class='oword'>system-on-chip</span><span class='ignore'>.</span><span class='ignore'>}</span><br>
<span class='exclcmd'>\label</span><span class='ignore'>{</span><span class='ignore'>fig</span><span class='ignore'>:</span><span class='ignore'>watchdog</span><span class='ignore'>}</span><br>
<span class='envir'>\end</span><span class='envir'>{figure}</span><br>
<br>
<span class='cmd'>\subsection</span><span class='ignore'>{</span><span class='hword'>Design</span> <span class='hword'>Considerations</span><span class='ignore'>}</span><br>
<span class='word'>There</span> <span class='word'>are</span> <span class='word'>several</span> <span class='word'>design</span> <span class='word'>issues</span> <span class='word'>to</span> <span class='word'>consider</span> <span class='word'>for</span> <span class='word'>this</span> <span class='word'>project</span><span class='ignore'>.</span> <span class='word'>These</span> <span class='word'>are</span> <span class='word'>listed</span> <span class='word'>below</span><span class='ignore'>:</span><br>
<br>
<span class='envir'>\begin</span><span class='envir'>{itemize}</span><br>
<span class='cmd'>\item</span> <span class='cmd'>\textbf</span><span class='ignore'>{</span><span class='word'>Design</span> <span class='word'>size</span> <span class='word'>limitations</span><span class='ignore'>}</span><span class='cmd'>\\</span><br>
<span class='word'>The</span> <span class='word'>target</span> <span class='word'>devices</span> <span class='word'>for</span> <span class='word'>this</span> <span class='word'>project</span> <span class='word'>are</span> <span class='word'>small</span> <span class='word'>to</span> <span class='word'>medium</span> <span class='word'>sized</span> <span class='word'>FPGAs</span> <span class='ignore'>(</span><span class='word'>featuring</span> <span class='word'>approximately</span> <span class='word'>10</span><span class='ignore'>,</span><span class='word'>000</span> <span class='word'>to</span> <span class='word'>30</span><span class='ignore'>,</span><span class='word'>000</span> <span class='word'>logic</span> <span class='word'>cells</span><span class='ignore'>)</span><span class='ignore'>.</span> <span class='word'>Because</span> <span class='word'>of</span> <span class='word'>this</span><span class='ignore'>,</span> <span class='word'>it</span> <span class='word'>is</span> <span class='word'>important</span> <span class='word'>to</span> <span class='word'>use</span> <span class='word'>a</span> <span class='word'>bus</span> <span class='word'>interconnect</span> <span class='word'>that</span> <span class='word'>has</span> <span class='word'>a</span> <span class='word'>small</span> <span class='word'>logic</span> <span class='word'>footprint</span> <span class='word'>yet</span> <span class='word'>is</span> <span class='word'>able</span> <span class='word'>to</span> <span class='word'>scale</span> <span class='word'>reasonably</span> <span class='word'>well</span><span class='ignore'>.</span><br>
<br>
<span class='cmd'>\item</span> <span class='cmd'>\textbf</span><span class='ignore'>{</span><span class='word'>Ease</span> <span class='word'>of</span> <span class='word'>implementation</span><span class='ignore'>}</span><span class='cmd'>\\</span><br>
<span class='word'>The</span> <span class='word'>interconnect</span> <span class='word'>and</span> <span class='word'>any</span> <span class='word'>peripherals</span> <span class='word'>should</span> <span class='word'>be</span> <span class='word'>easy</span> <span class='word'>to</span> <span class='word'>implement</span> <span class='word'>within</span> <span class='word'>the</span> <span class='word'>time</span> <span class='word'>allocations</span> <span class='word'>specified</span> <span class='word'>in</span> <span class='cmd'>\cref</span><span class='ignore'>{</span><span class='word'>fig</span><span class='ignore'>:</span><span class='word'>gantt</span><span class='ignore'>}</span><span class='ignore'>.</span><br>
<br>
<span class='cmd'>\item</span> <span class='cmd'>\textbf</span><span class='ignore'>{</span><span class='word'>Scalable</span><span class='ignore'>}</span><span class='cmd'>\\</span><br>
<span class='word'>The</span> <span class='word'>interconnect</span> <span class='word'>should</span> <span class='word'>allow</span> <span class='word'>for</span> <span class='word'>easy</span> <span class='word'>scalability</span> <span class='word'>of</span> <span class='word'>master</span> <span class='word'>and</span> <span class='word'>slave</span> <span class='word'>interfaces</span> <span class='word'>with</span> <span class='word'>minimal</span> <span class='word'>code</span> <span class='word'>changes</span><span class='ignore'>.</span><br>
<span class='envir'>\end</span><span class='envir'>{itemize}</span><br>
<br>
<span class='cmd'>\section</span><span class='ignore'>{</span><span class='hword'>Interfaces</span><span class='ignore'>}</span><br>
<br>
<span class='envir'>\begin</span><span class='envir'>{figure}</span><span class='option'>[H]</span><br>
<span class='exclcmd'>\centering</span><br>
<span class='exclcmd'>\includegraphics</span><span class='option'>[width=0.7\textwidth]</span><span class='ignore'>{</span><span class='ignore'>ahb</span><span class='ignore'>}</span><br>
<span class='envir'>\end</span><span class='envir'>{figure}</span><br>
<br>
<span class='cmd'>\subsection</span><span class='ignore'>{</span><span class='hword'>Master</span> <span class='hword'>to</span> <span class='hword'>Slave</span> <span class='hword'>Interface</span><span class='ignore'>}</span><br>
<span class='envir'>\begin</span><span class='envir'>{figure}</span><span class='option'>[H]</span><br>
<span class='exclcmd'>\centering</span><br>
<span class='exclenv'>\begin</span><span class='exclenv'>{bytefield}</span><span class='option'>[bitwidth=3.5ex, rightcurly=., rightcurlyspace=0pt]</span><span class='ignore'>{</span><span class='ignore'>21</span><span class='ignore'>}</span><br>
<span class='exclcmd'>\bitheader</span><span class='option'>[endianness=big]</span><span class='ignore'>{</span><span class='ignore'>0</span><span class='ignore'>,</span><span class='ignore'>15</span><span class='ignore'>,</span><span class='ignore'>16-20</span><span class='ignore'>}</span> <span class='exclcmd'>\\</span><br>
<span class='exclenv'>\begin</span><span class='exclenv'>{rightwordgroup}</span><span class='ignore'>{</span><span class='ignore'>PADDR</span><span class='ignore'>[</span><span class='ignore'>20</span><span class='ignore'>:</span><span class='ignore'>0</span><span class='ignore'>]</span><span class='ignore'>}</span><br>
&nbsp; <span class='exclcmd'>\bitbox</span><span class='ignore'>{</span><span class='ignore'>1</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='exclcmd'>\rotatebox</span><span class='ignore'>{</span><span class='ignore'>90</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='exclcmd'>\small</span> <span class='ignore'>LE</span><span class='ignore'>}</span><span class='ignore'>}</span><br>
&nbsp; <span class='exclcmd'>\bitbox</span><span class='ignore'>{</span><span class='ignore'>1</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='exclcmd'>\rotatebox</span><span class='ignore'>{</span><span class='ignore'>90</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='exclcmd'>\small</span> <span class='ignore'>SE</span><span class='ignore'>}</span><span class='ignore'>}</span><br>
<span class='ignore'>&amp;</span> <span class='exclcmd'>\bitbox</span><span class='ignore'>{</span><span class='ignore'>3</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='exclcmd'>\small</span> <span class='ignore'>CORE</span><span class='exclcmd'>\_</span><span class='ignore'>ID</span><span class='ignore'>}</span><br>
<span class='ignore'>&amp;</span> <span class='exclcmd'>\bitbox</span><span class='ignore'>{</span><span class='ignore'>16</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='ignore'>Address</span><span class='ignore'>}</span><br>
<span class='exclenv'>\end</span><span class='exclenv'>{rightwordgroup}</span><span class='exclcmd'>\\</span><br>
<br>
<span class='exclenv'>\begin</span><span class='exclenv'>{rightwordgroup}</span><span class='ignore'>{</span><span class='ignore'>PWDATA</span><span class='ignore'>[</span><span class='ignore'>15</span><span class='ignore'>:</span><span class='ignore'>0</span><span class='ignore'>]</span><span class='ignore'>}</span><br>
<span class='exclcmd'>\bitbox</span><span class='ignore'>{</span><span class='ignore'>5</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='exclcmd'>\color</span><span class='ignore'>{</span><span class='ignore'>lightgray</span><span class='ignore'>}</span><span class='exclcmd'>\rule</span><span class='ignore'>{</span><span class='exclcmd'>\width</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='exclcmd'>\height</span><span class='ignore'>}</span><span class='ignore'>}</span> <span class='ignore'>&amp;</span> <span class='exclcmd'>\bitbox</span><span class='ignore'>{</span><span class='ignore'>16</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='ignore'>Write</span> <span class='ignore'>data</span><span class='ignore'>}</span><br>
<span class='exclenv'>\end</span><span class='exclenv'>{rightwordgroup}</span><span class='exclcmd'>\\</span><br>
<br>
<span class='exclenv'>\begin</span><span class='exclenv'>{rightwordgroup}</span><span class='ignore'>{</span><span class='ignore'>PRDATA</span><span class='ignore'>[</span><span class='ignore'>15</span><span class='ignore'>:</span><span class='ignore'>0</span><span class='ignore'>]</span><span class='ignore'>}</span><br>
<span class='exclcmd'>\bitbox</span><span class='ignore'>{</span><span class='ignore'>5</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='exclcmd'>\color</span><span class='ignore'>{</span><span class='ignore'>lightgray</span><span class='ignore'>}</span><span class='exclcmd'>\rule</span><span class='ignore'>{</span><span class='exclcmd'>\width</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='exclcmd'>\height</span><span class='ignore'>}</span><span class='ignore'>}</span> <span class='ignore'>&amp;</span> <span class='exclcmd'>\bitbox</span><span class='ignore'>{</span><span class='ignore'>16</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='ignore'>Read</span> <span class='ignore'>Data</span><span class='ignore'>}</span><br>
<span class='exclenv'>\end</span><span class='exclenv'>{rightwordgroup}</span><span class='exclcmd'>\\</span><br>
<br>
<span class='exclenv'>\begin</span><span class='exclenv'>{rightwordgroup}</span><span class='ignore'>{</span><span class='ignore'>PWRITE</span><span class='ignore'>[</span><span class='ignore'>0</span><span class='ignore'>:</span><span class='ignore'>0</span><span class='ignore'>]</span><span class='ignore'>}</span><br>
<span class='exclcmd'>\bitbox</span><span class='ignore'>{</span><span class='ignore'>20</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='exclcmd'>\color</span><span class='ignore'>{</span><span class='ignore'>lightgray</span><span class='ignore'>}</span><span class='exclcmd'>\rule</span><span class='ignore'>{</span><span class='exclcmd'>\width</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='exclcmd'>\height</span><span class='ignore'>}</span><span class='ignore'>}</span> <span class='ignore'>&amp;</span> <span class='exclcmd'>\bitbox</span><span class='ignore'>{</span><span class='ignore'>1</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='exclcmd'>\rotatebox</span><span class='ignore'>{</span><span class='ignore'>90</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='exclcmd'>\small</span> <span class='ignore'>WE</span><span class='ignore'>}</span><span class='ignore'>}</span><br>
<span class='exclenv'>\end</span><span class='exclenv'>{rightwordgroup}</span><span class='exclcmd'>\\</span><br>
<br>
<span class='exclenv'>\begin</span><span class='exclenv'>{rightwordgroup}</span><span class='ignore'>{</span><span class='ignore'>PENABLE</span><span class='ignore'>[</span><span class='ignore'>0</span><span class='ignore'>:</span><span class='ignore'>0</span><span class='ignore'>]</span><span class='ignore'>}</span><br>
<span class='exclcmd'>\bitbox</span><span class='ignore'>{</span><span class='ignore'>20</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='exclcmd'>\color</span><span class='ignore'>{</span><span class='ignore'>lightgray</span><span class='ignore'>}</span><span class='exclcmd'>\rule</span><span class='ignore'>{</span><span class='exclcmd'>\width</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='exclcmd'>\height</span><span class='ignore'>}</span><span class='ignore'>}</span> <span class='ignore'>&amp;</span> <span class='exclcmd'>\bitbox</span><span class='ignore'>{</span><span class='ignore'>1</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='exclcmd'>\rotatebox</span><span class='ignore'>{</span><span class='ignore'>90</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='exclcmd'>\small</span> <span class='ignore'>EN</span><span class='ignore'>}</span><span class='ignore'>}</span><br>
<span class='exclenv'>\end</span><span class='exclenv'>{rightwordgroup}</span><br>
<span class='exclenv'>\end</span><span class='exclenv'>{bytefield}</span><br>
<span class='envir'>\end</span><span class='envir'>{figure}</span><br>
<br>
<span class='cmd'>\newpage</span><br>
<span class='cmd'>\subsection</span><span class='ignore'>{</span><span class='hword'>Multi-master</span> <span class='hword'>Support</span><span class='ignore'>}</span><br>
<span class='cmd'>\label</span><span class='ignore'>{</span><span class='ignore'>sec</span><span class='ignore'>:</span><span class='ignore'>multimaster</span><span class='ignore'>}</span><br>
<span class='word'>In</span> <span class='word'>this</span> <span class='word'>design</span><span class='ignore'>,</span> <span class='word'>each</span> <span class='word'>processor</span> <span class='word'>can</span> <span class='word'>act</span> <span class='word'>as</span> <span class='word'>an</span> <span class='word'>APB</span> <span class='word'>master</span> <span class='word'>to</span> <span class='word'>communicate</span> <span class='word'>with</span> <span class='word'>peripherals</span><span class='ignore'>,</span> <span class='word'>for</span> <span class='word'>example</span> <span class='word'>to</span> <span class='word'>write</span> <span class='word'>a</span> <span class='word'>value</span> <span class='word'>to</span> <span class='word'>UART</span> <span class='word'>or</span> <span class='word'>to</span> <span class='word'>the</span> <span class='word'>shared</span> <span class='word'>memory</span> <span class='word'>peripheral</span><span class='ignore'>.</span> <span class='word'>Because</span> <span class='word'>each</span> <span class='word'>core</span> <span class='word'>runs</span> <span class='word'>independently</span> <span class='word'>from</span> <span class='word'>other</span> <span class='word'>cores</span><span class='ignore'>,</span> <span class='word'>it</span> <span class='word'>is</span> <span class='word'>likely</span><span class='ignore'>,</span> <span class='word'>especially</span> <span class='word'>is</span> <span class='word'>many-core</span> <span class='word'>systems</span><span class='ignore'>,</span> <span class='word'>that</span> <span class='word'>two</span> <span class='word'>or</span> <span class='word'>more</span> <span class='word'>processors</span> <span class='word'>will</span> <span class='word'>want</span> <span class='word'>to</span> <span class='word'>use</span> <span class='word'>the</span> <span class='word'>peripheral</span> <span class='word'>bus</span> <span class='word'>at</span> <span class='word'>the</span> <span class='word'>same</span> <span class='word'>time</span><span class='ignore'>.</span><br>
<br>
<span class='word'>As</span> <span class='word'>the</span> <span class='word'>peripheral</span> <span class='word'>and</span> <span class='word'>instruction</span> <span class='word'>interconnects</span> <span class='word'>use</span> <span class='word'>a</span> <span class='word'>shared</span> <span class='word'>one-to-many</span> <span class='ignore'>(</span><span class='word'>one</span> <span class='word'>master</span> <span class='word'>to</span> <span class='word'>many</span> <span class='word'>slaves</span><span class='ignore'>)</span> <span class='word'>bus</span> <span class='word'>architecture</span><span class='ignore'>,</span> <span class='word'>only</span> <span class='word'>one</span> <span class='word'>master</span> <span class='word'>can</span> <span class='word'>use</span> <span class='word'>the</span> <span class='word'>bus</span> <span class='word'>at</span> <span class='word'>any-time</span><span class='ignore'>.</span> <span class='word'>To</span> <span class='word'>enable</span> <span class='word'>multiple</span> <span class='word'>masters</span> <span class='word'>to</span> <span class='word'>use</span> <span class='word'>the</span> <span class='word'>bus</span><span class='ignore'>,</span> <span class='word'>a</span> <span class='word'>device</span> <span class='word'>called</span> <span class='word'>an</span> <span class='cmd'>\textit</span><span class='ignore'>{</span><span class='word'>arbiter</span><span class='ignore'>}</span> <span class='word'>must</span> <span class='word'>be</span> <span class='word'>used</span> <span class='word'>to</span> <span class='word'>control</span> <span class='word'>which</span> <span class='word'>master</span> <span class='word'>gets</span> <span class='word'>access</span> <span class='word'>to</span> <span class='word'>drive</span> <span class='word'>the</span> <span class='word'>shared</span> <span class='word'>interconnect</span><span class='ignore'>.</span><br>
<br>
<span class='word'>Arbiters</span> <span class='word'>can</span> <span class='word'>vary</span> <span class='word'>in</span> <span class='word'>complexity</span><span class='ignore'>,</span> <span class='word'>mostly</span> <span class='word'>relative</span> <span class='word'>to</span> <span class='word'>throughput</span> <span class='word'>requirements</span><span class='ignore'>.</span><br>
<br>
<span class='word'>An</span> <span class='word'>ideal</span> <span class='word'>arbiter</span> <span class='word'>for</span> <span class='word'>this</span> <span class='word'>interconnect</span><span class='ignore'>,</span> <span class='word'>which</span> <span class='word'>ideally</span> <span class='word'>features</span> <span class='word'>many</span><span class='ignore'>,</span> <span class='word'>possibly</span> <span class='word'>tens</span> <span class='word'>of</span><span class='ignore'>,</span> <span class='word'>high-throughput</span> <span class='word'>masters</span><span class='ignore'>,</span> <span class='word'>would</span> <span class='word'>likely</span> <span class='word'>feature</span> <span class='word'>a</span> <span class='word'>priority-based</span> <span class='word'>and</span> <span class='word'>pipelined</span> <span class='word'>arbiter</span> <span class='word'>with</span> <span class='word'>various</span> <span class='word'>devices</span> <span class='word'>to</span> <span class='word'>improve</span> <span class='word'>performance</span> <span class='word'>such</span> <span class='word'>as</span> <span class='word'>cache-coherencies</span><span class='ignore'>.</span> <br>
<br>
<span class='cmd'>\subsubsection</span><span class='ignore'>{</span><span class='hword'>Overview</span><span class='ignore'>}</span><br>
<span class='word'>Due</span> <span class='word'>to</span> <span class='word'>this</span> <span class='word'>project's</span> <span class='word'>limited</span> <span class='word'>time</span><span class='ignore'>,</span> <span class='word'>and</span> <span class='word'>my</span> <span class='word'>personal</span> <span class='word'>knowledge</span> <span class='word'>in</span> <span class='word'>this</span> <span class='word'>area</span><span class='ignore'>,</span> <span class='word'>a</span> <span class='word'>simple</span> <span class='word'>rotating</span> <span class='word'>arbiter</span> <span class='word'>is</span> <span class='word'>used</span><span class='ignore'>.</span> <span class='word'>This</span> <span class='word'>arbitration</span> <span class='word'>scheme</span> <span class='word'>is</span> <span class='word'>likely</span> <span class='word'>the</span> <span class='word'>simplest</span> <span class='word'>that</span> <span class='word'>can</span> <span class='word'>be</span> <span class='word'>thought</span> <span class='word'>of</span><span class='ignore'>.</span>&nbsp; <span class='word'>A</span> <span class='word'>schematic</span> <span class='word'>of</span> <span class='word'>arbiter</span> <span class='word'>interconnect</span> <span class='word'>is</span> <span class='word'>shown</span> <span class='word'>in</span> <span class='cmd'>\cref</span><span class='ignore'>{</span><span class='word'>fig</span><span class='ignore'>:</span><span class='word'>multimaster</span><span class='ignore'>}</span><span class='ignore'>.</span><br>
<br>
<span class='word'>In</span> <span class='word'>this</span> <span class='word'>scheme</span><span class='ignore'>,</span> <span class='word'>access</span> <span class='word'>to</span> <span class='word'>the</span> <span class='word'>bus</span> <span class='word'>is</span> <span class='word'>given</span> <span class='word'>incrementally</span> <span class='word'>to</span> <span class='word'>each</span> <span class='word'>master</span> <span class='word'>port</span><span class='ignore'>,</span> <span class='word'>even</span> <span class='word'>if</span> <span class='word'>the</span> <span class='word'>master</span> <span class='word'>port</span> <span class='word'>has</span> <span class='word'>not</span> <span class='word'>requested</span> <span class='word'>to</span> <span class='word'>use</span> <span class='word'>the</span> <span class='word'>bus</span><span class='ignore'>.</span> <span class='word'>The</span> <span class='word'>active</span> <span class='word'>master</span> <span class='word'>port</span> <span class='word'>can</span> <span class='word'>use</span> <span class='word'>the</span> <span class='word'>bus</span> <span class='word'>for</span> <span class='word'>as</span> <span class='word'>long</span> <span class='word'>as</span> <span class='word'>it</span> <span class='word'>requires</span><span class='ignore'>,</span> <span class='word'>and</span> <span class='word'>signals</span> <span class='word'>it</span> <span class='word'>has</span> <span class='word'>finished</span> <span class='word'>by</span> <span class='word'>lowering</span> <span class='word'>the</span> <span class='word'>PSEL</span> <span class='word'>signal</span><span class='ignore'>.</span> <span class='word'>When</span> <span class='word'>the</span> <span class='word'>PSEL</span> <span class='word'>signal</span> <span class='word'>is</span> <span class='word'>lowered</span><span class='ignore'>,</span> <span class='word'>the</span> <span class='word'>arbiter</span> <span class='word'>grants</span> <span class='word'>access</span> <span class='word'>to</span> <span class='word'>the</span> <span class='word'>next</span> <span class='word'>master</span> <span class='word'>port</span><span class='ignore'>.</span> <span class='word'>If</span> <span class='word'>this</span> <span class='word'>next</span> <span class='word'>master</span> <span class='word'>port</span> <span class='word'>has</span> <span class='word'>not</span> <span class='word'>raised</span> <span class='word'>it's</span> <span class='word'>PSEL</span> <span class='word'>signal</span> <span class='ignore'>(</span><span class='word'>i.e</span><span class='ignore'>.</span> <span class='word'>it</span> <span class='word'>has</span> <span class='word'>not</span> <span class='word'>requested</span> <span class='word'>access</span> <span class='word'>to</span> <span class='word'>the</span> <span class='word'>bus</span><span class='ignore'>)</span> <span class='word'>then</span> <span class='word'>the</span> <span class='word'>arbiter</span> <span class='word'>grants</span> <span class='word'>access</span> <span class='word'>to</span> <span class='word'>the</span> <span class='word'>next</span> <span class='word'>master</span> <span class='word'>port</span><span class='ignore'>,</span> <span class='word'>and</span> <span class='word'>so</span> <span class='word'>on</span><span class='ignore'>.</span> <span class='word'>In</span> <span class='word'>Verilog</span><span class='ignore'>,</span> <span class='word'>this</span> <span class='word'>is</span> <span class='word'>simply</span> <span class='word'>an</span> <span class='word'>incremental</span> <span class='word'>counter</span> <span class='word'>which</span> <span class='word'>is</span> <span class='word'>used</span> <span class='word'>to</span> <span class='word'>index</span> <span class='word'>the</span> <span class='word'>master</span> <span class='word'>ports</span> <span class='word'>array</span><span class='ignore'>.</span> <span class='word'>To</span> <span class='word'>support</span> <span class='word'>a</span> <span class='word'>variable</span> <span class='word'>number</span> <span class='word'>of</span> <span class='word'>master</span> <span class='word'>ports</span><span class='ignore'>,</span> <span class='word'>the</span> <span class='word'>width</span> <span class='word'>of</span> <span class='word'>each</span> <span class='word'>APB</span> <span class='word'>signal</span> <span class='word'>is</span> <span class='word'>multiplied</span> <span class='word'>by</span> <span class='word'>the</span> <span class='word'>number</span> <span class='word'>of</span> <span class='word'>cores</span><span class='ignore'>,</span> <span class='word'>as</span> <span class='word'>shown</span> <span class='word'>in</span> <span class='cmd'>\cref</span><span class='ignore'>{</span><span class='word'>lst</span><span class='ignore'>:</span><span class='word'>widemaster</span><span class='ignore'>}</span><span class='ignore'>.</span><br>
<br>
<span class='envir'>\begin</span><span class='envir'>{figure}</span><span class='option'>[H]</span><br>
<span class='exclcmd'>\centering</span><br>
<span class='exclcmd'>\includegraphics</span><span class='option'>[width=\textwidth]</span><span class='ignore'>{</span><span class='ignore'>multimaster</span><span class='ignore'>}</span><br>
<span class='cmd'>\caption</span><span class='ignore'>{</span><span class='oword'>Foo</span><span class='ignore'>}</span><br>
<span class='exclcmd'>\label</span><span class='ignore'>{</span><span class='ignore'>fig</span><span class='ignore'>:</span><span class='ignore'>multimaster</span><span class='ignore'>}</span><br>
<span class='envir'>\end</span><span class='envir'>{figure}</span><br>
<br>
<br>
<br>
<span class='envir'>\begin</span><span class='envir'>{figure}</span><span class='option'>[H]</span><br>
<span class='exclcmd'>\centering</span><br>
<span class='exclenv'>\begin</span><span class='exclenv'>{bytefield}</span><span class='option'>[bitwidth=.5em, rightcurly=., rightcurlyspace=0pt]</span><span class='ignore'>{</span><span class='ignore'>84</span><span class='ignore'>}</span><br>
<span class='exclcmd'>\bitheader</span><span class='option'>[endianness=big]</span><span class='ignore'>{</span><span class='ignore'>0</span><span class='ignore'>,</span><span class='ignore'>20</span><span class='ignore'>,</span><span class='ignore'>41</span><span class='ignore'>,</span><span class='ignore'>62</span><span class='ignore'>,</span><span class='ignore'>83</span><span class='ignore'>}</span> <span class='exclcmd'>\\</span><br>
<span class='exclcmd'>\bitbox</span><span class='ignore'>{</span><span class='ignore'>21</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='ignore'>Core</span> <span class='exclmath'>$</span><span class='math'>N</span><span class='exclmath'>$</span><span class='ignore'>-</span><span class='exclmath'>$</span><span class='math'>1</span><span class='exclmath'>$</span><span class='ignore'>}</span> <span class='ignore'>&amp;</span> <br>
<span class='exclcmd'>\bitbox</span><span class='ignore'>{</span><span class='ignore'>21</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='exclmath'>$</span><span class='mathcmd'>\cdots</span><span class='exclmath'>$</span><span class='ignore'>}</span> <span class='ignore'>&amp;</span> <br>
<span class='exclcmd'>\bitbox</span><span class='ignore'>{</span><span class='ignore'>21</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='ignore'>Core</span> <span class='ignore'>1</span><span class='ignore'>}</span> <span class='ignore'>&amp;</span> <br>
<span class='exclcmd'>\bitbox</span><span class='ignore'>{</span><span class='ignore'>21</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='ignore'>Core</span> <span class='ignore'>0</span><span class='ignore'>}</span><br>
<span class='exclenv'>\end</span><span class='exclenv'>{bytefield}</span><br>
<span class='envir'>\end</span><span class='envir'>{figure}</span><br>
<br>
<br>
<span class='cmd'>\section</span><span class='ignore'>{</span><span class='hword'>Further</span> <span class='hword'>Work</span><span class='ignore'>}</span><br>
<span class='word'>The</span> <span class='word'>submitted</span> <span class='word'>design</span> <span class='word'>is</span> <span class='word'>acceptable</span> <span class='word'>for</span> <span class='word'>a</span> <span class='word'>multi-core</span> <span class='word'>system</span> <span class='word'>as</span> <span class='word'>it</span> <span class='word'>fulfils</span> <span class='word'>the</span> <span class='word'>following</span> <span class='word'>requirements</span><span class='ignore'>:</span><br>
<span class='envir'>\begin</span><span class='envir'>{itemize}</span><br>
<span class='cmd'>\item</span> <span class='word'>Support</span> <span class='word'>an</span> <span class='word'>arbitrary</span> <span class='word'>number</span> <span class='word'>of</span> <span class='word'>peripherals</span><span class='ignore'>.</span><br>
<span class='cmd'>\item</span> <span class='word'>Supports</span> <span class='word'>memory-mapped</span> <span class='word'>address</span> <span class='word'>decoding</span><span class='ignore'>.</span><br>
<span class='cmd'>\item</span> <span class='word'>Supports</span> <span class='word'>multiple</span> <span class='word'>master</span> <span class='word'>interfaces</span><span class='ignore'>.</span><br>
<span class='envir'>\end</span><span class='envir'>{itemize}</span><br>
<br>
<span class='cmd'>\subsubsection</span><span class='option'>*</span><span class='ignore'>{</span><span class='hword'>Arbiter</span> <span class='hword'>Performance</span> <span class='hword'>Improvements</span><span class='ignore'>}</span><br>
<span class='word'>However</span><span class='ignore'>,</span> <span class='word'>it</span> <span class='word'>fails</span> <span class='word'>in</span> <span class='word'>the</span> <span class='word'>performance</span> <span class='word'>aspect</span><span class='ignore'>.</span> <span class='word'>A</span> <span class='word'>one</span> <span class='word'>clock</span> <span class='word'>penalty</span> <span class='word'>occurs</span> <span class='word'>if</span> <span class='word'>the</span> <span class='word'>next</span> <span class='word'>master</span> <span class='word'>port</span> <span class='word'>has</span> <span class='word'>not</span> <span class='word'>requested</span> <span class='word'>the</span> <span class='word'>bus</span><span class='ignore'>.</span> <span class='word'>This</span> <span class='word'>may</span> <span class='word'>seem</span> <span class='word'>a</span> <span class='word'>small</span> <span class='word'>price</span> <span class='word'>to</span> <span class='word'>pay</span> <span class='word'>for</span> <span class='word'>such</span> <span class='word'>a</span> <span class='word'>simple</span> <span class='word'>arbiter</span> <span class='word'>design</span><span class='ignore'>,</span> <span class='word'>however</span> <span class='word'>it</span> <span class='word'>can</span> <span class='word'>add</span> <span class='word'>up</span> <span class='word'>significantly</span> <span class='word'>in</span> <span class='word'>many-core</span> <span class='word'>designs</span><span class='ignore'>.</span> <span class='word'>For</span> <span class='word'>example</span><span class='ignore'>,</span> <span class='word'>if</span> <span class='word'>core</span> <span class='cmd'>\#</span><span class='word'>0</span> <span class='word'>performs</span> <span class='word'>some</span> <span class='word'>action</span> <span class='word'>on</span> <span class='word'>the</span> <span class='word'>bus</span><span class='ignore'>,</span> <span class='word'>but</span> <span class='word'>core</span> <span class='cmd'>\#</span><span class='word'>10</span> <span class='word'>is</span> <span class='word'>the</span> <span class='word'>next</span>&nbsp; <span class='word'>master</span> <span class='word'>that</span> <span class='word'>wants</span> <span class='word'>to</span> <span class='word'>use</span> <span class='word'>the</span> <span class='word'>bus</span><span class='ignore'>,</span> <span class='word'>then</span> <span class='word'>the</span> <span class='word'>arbiter</span> <span class='word'>will</span> <span class='word'>waste</span> <span class='word'>time</span> <span class='word'>incremental</span> <span class='word'>granting</span> <span class='word'>access</span> <span class='word'>to</span> <span class='word'>cores</span> <span class='cmd'>\#</span><span class='word'>1</span> <span class='word'>to</span> <span class='cmd'>\#</span><span class='word'>9</span> <span class='word'>which</span> <span class='word'>do</span> <span class='word'>not</span> <span class='word'>need</span> <span class='word'>the</span> <span class='word'>bus</span><span class='ignore'>.</span> <span class='word'>This</span> <span class='word'>is</span> <span class='word'>also</span> <span class='word'>made</span> <span class='word'>worse</span> <span class='word'>when</span> <span class='word'>one</span> <span class='word'>of</span> <span class='word'>the</span> <span class='word'>cores</span> <span class='word'>is</span> <span class='word'>blocking</span> <span class='word'>access</span> <span class='word'>to</span> <span class='word'>a</span> <span class='word'>peripheral</span> <span class='word'>resource</span><span class='ignore'>,</span> <span class='word'>such</span> <span class='word'>as</span> <span class='word'>through</span> <span class='word'>a</span> <span class='word'>mutex</span> <span class='word'>or</span> <span class='word'>semaphore</span><span class='ignore'>.</span><br>
<br>
<span class='word'>To</span> <span class='word'>overcome</span> <span class='word'>this</span> <span class='word'>penalty</span><span class='ignore'>,</span> <span class='word'>a</span> <span class='word'>scheme</span> <span class='word'>could</span> <span class='word'>use</span> <span class='word'>an</span> <span class='word'>algorithm</span> <span class='word'>to</span> <span class='word'>find</span> <span class='word'>the</span> <span class='word'>next</span> <span class='word'>master</span> <span class='word'>port</span> <span class='word'>requesting</span> <span class='word'>access</span><span class='ignore'>,</span> <span class='word'>and</span> <span class='word'>grant</span> <span class='word'>access</span> <span class='word'>directly</span> <span class='word'>to</span> <span class='word'>it</span> <span class='word'>when</span> <span class='word'>the</span> <span class='word'>current</span> <span class='word'>master</span> <span class='word'>has</span> <span class='word'>finished</span><span class='ignore'>.</span> <span class='word'>Another</span> <span class='word'>scheme</span> <span class='word'>could</span> <span class='word'>be</span> <span class='word'>to</span> <span class='word'>use</span> <span class='word'>a</span> <span class='word'>priority</span> <span class='word'>encoder</span><span class='ignore'>.</span> <span class='word'>Here</span><span class='ignore'>,</span> <span class='word'>a</span> <span class='word'>hard-coded</span> <span class='word'>lookup</span> <span class='word'>table</span> <span class='ignore'>(</span><span class='word'>LUT</span><span class='ignore'>)</span> <span class='word'>could</span> <span class='word'>be</span> <span class='word'>used</span><span class='ignore'>,</span> <span class='word'>where</span> <span class='word'>the</span> <span class='word'>inputs</span> <span class='word'>are</span> <span class='word'>each</span> <span class='word'>master</span> <span class='word'>port's</span> <span class='word'>PSEL</span> <span class='word'>signal</span> <span class='ignore'>(</span><span class='word'>acting</span> <span class='word'>as</span> <span class='word'>a</span> <span class='word'>bus</span> <span class='word'>request</span> <span class='word'>line</span><span class='ignore'>)</span> <span class='word'>and</span> <span class='word'>the</span> <span class='word'>output</span> <span class='word'>being</span> <span class='word'>which</span> <span class='word'>master</span> <span class='word'>to</span> <span class='word'>grant</span> <span class='word'>access</span> <span class='word'>to</span><span class='ignore'>.</span> <span class='word'>As</span> <span class='word'>this</span> <span class='word'>is</span> <span class='word'>targetting</span> <span class='word'>FPGA</span> <span class='word'>devices</span><span class='ignore'>,</span> <span class='word'>this</span> <span class='word'>implemented</span> <span class='word'>would</span> <span class='word'>require</span> <span class='word'>few</span> <span class='word'>LUT</span> <span class='word'>resources</span> <span class='word'>for</span> <span class='word'>the</span> <span class='word'>arbiter</span><span class='ignore'>,</span> <span class='word'>due</span> <span class='word'>to</span> <span class='word'>the</span> <span class='word'>hard-coded</span> <span class='word'>LUT</span> <span class='word'>approach</span><span class='ignore'>.</span> <span class='word'>An</span> <span class='word'>example</span> <span class='word'>of</span> <span class='word'>this</span> <span class='word'>is</span> <span class='word'>given</span> <span class='word'>in</span> <span class='word'>M</span><span class='ignore'>.</span> <span class='word'>Weber's</span> <span class='cmd'>\textit</span><span class='ignore'>{</span><span class='word'>Arbiter</span><span class='ignore'>:</span> <span class='word'>Design</span> <span class='word'>Ideas</span> <span class='word'>and</span> <span class='word'>Coding</span> <span class='word'>Styles</span><span class='ignore'>}</span> <span class='cmd'>\cite</span><span class='optparm'>[</span><span class='word'>p</span><span class='ignore'>.</span><span class='ignore'>~</span><span class='word'>2</span><span class='optparm'>]</span><span class='ignore'>{</span><span class='ignore'>weber2001arbiters</span><span class='ignore'>}</span><span class='ignore'>.</span><br>
<br>
<span class='cmd'>\subsubsection</span><span class='option'>*</span><span class='ignore'>{</span><span class='hword'>APB</span> <span class='hword'>Bus</span> <span class='hword'>Errors</span> <span class='hword'>and</span> <span class='hword'>Recovery</span><span class='ignore'>}</span><br>
<span class='word'>This</span> <span class='word'>project's</span> <span class='word'>implementation</span> <span class='word'>of</span> <span class='word'>a</span> <span class='word'>multi-master</span> <span class='word'>APB</span> <span class='word'>interconnect</span> <span class='word'>does</span> <span class='word'>not</span> <span class='word'>provide</span> <span class='word'>a</span> <span class='word'>method</span> <span class='word'>of</span> <span class='word'>detecting</span> <span class='word'>errors</span> <span class='word'>and</span> <span class='word'>stalls</span><span class='ignore'>.</span> <span class='word'>This</span> <span class='word'>is</span> <span class='word'>mainly</span> <span class='word'>due</span> <span class='word'>to</span> <span class='word'>time</span> <span class='word'>constraints</span><span class='ignore'>.</span><br>
<br>
<span class='word'>An</span> <span class='word'>easy</span> <span class='word'>error</span> <span class='word'>that</span> <span class='word'>could</span> <span class='word'>be</span> <span class='word'>detected</span> <span class='word'>is</span> <span class='cmd'>\verb</span><span class='cmd'>|</span><span class='ignore'>PADDR</span><span class='cmd'>|</span> <span class='word'>addresses</span> <span class='word'>that</span> <span class='word'>do</span> <span class='word'>not</span> <span class='word'>fall</span> <span class='word'>into</span> <span class='word'>a</span> <span class='word'>memory-mapped</span> <span class='word'>address</span> <span class='word'>range</span><span class='ignore'>.</span> <span class='word'>This</span> <span class='word'>can</span> <span class='word'>easily</span> <span class='word'>and</span> <span class='word'>cheaply</span> <span class='word'>be</span> <span class='word'>detected</span> <span class='word'>in</span> <span class='word'>the</span> <span class='word'>address</span> <span class='word'>decoding</span> <span class='word'>module</span><span class='ignore'>.</span> <span class='word'>This</span> <span class='word'>will</span> <span class='word'>be</span> <span class='word'>discussed</span> <span class='word'>in</span> <span class='word'>detail</span> <span class='word'>in</span> <span class='word'>the</span> <span class='word'>next</span> <span class='word'>chapter</span><span class='ignore'>.</span><br>
<br>
<span class='word'>As</span> <span class='word'>previously</span> <span class='word'>stated</span><span class='ignore'>,</span> <span class='word'>the</span> <span class='word'>active</span> <span class='word'>bus</span> <span class='word'>master</span> <span class='word'>can</span> <span class='word'>take</span> <span class='word'>control</span> <span class='word'>of</span> <span class='word'>the</span> <span class='word'>bus</span> <span class='word'>for</span> <span class='word'>as</span> <span class='word'>long</span> <span class='word'>as</span> <span class='word'>it</span> <span class='word'>wants</span> <span class='word'>to</span><span class='ignore'>.</span> <span class='word'>This</span> <span class='word'>is</span> <span class='word'>useful</span> <span class='word'>for</span> <span class='word'>high-throughput</span> <span class='word'>transactions</span><span class='ignore'>,</span> <span class='word'>such</span> <span class='word'>as</span> <span class='word'>memory</span> <span class='word'>operations</span> <span class='word'>to</span> <span class='word'>global</span> <span class='word'>memory</span><span class='ignore'>,</span> <span class='word'>but</span> <span class='word'>detecting</span> <span class='word'>a</span> <span class='word'>stalled</span> <span class='word'>or</span> <span class='word'>glitched</span> <span class='word'>operation</span> <span class='word'>is</span> <span class='word'>not</span> <span class='word'>immediately</span> <span class='word'>identifiable</span><span class='ignore'>.</span> <span class='word'>If</span> <span class='word'>an</span> <span class='word'>active</span> <span class='word'>master</span> <span class='word'>stalls</span> <span class='word'>or</span> <span class='word'>glitches</span><span class='ignore'>,</span> <span class='word'>it</span> <span class='word'>may</span> <span class='word'>not</span> <span class='word'>be</span> <span class='word'>able</span> <span class='word'>to</span> <span class='word'>lower</span> <span class='word'>the</span> <span class='word'>PSEL</span> <span class='word'>line</span> <span class='word'>which</span> <span class='word'>appears</span> <span class='word'>to</span> <span class='word'>the</span> <span class='word'>arbiter</span> <span class='word'>that</span> <span class='word'>the</span> <span class='word'>transaction</span> <span class='word'>is</span> <span class='word'>still</span> <span class='word'>happening</span> <span class='word'>normally</span><span class='ignore'>.</span> <span class='word'>To</span> <span class='word'>overcome</span> <span class='word'>this</span><span class='ignore'>,</span> <span class='word'>a</span> <span class='word'>timer</span> <span class='word'>could</span> <span class='word'>be</span> <span class='word'>used</span> <span class='word'>to</span> <span class='word'>detect</span> <span class='word'>stalled</span> <span class='word'>operations</span> <span class='word'>and</span> <span class='word'>reset</span> <span class='word'>the</span> <span class='word'>affected</span> <span class='word'>peripheral</span> <span class='ignore'>(</span><span class='word'>essential</span> <span class='word'>a</span> <span class='word'>watchdog</span> <span class='word'>but</span> <span class='word'>for</span> <span class='word'>an</span> <span class='word'>interconnect</span><span class='ignore'>)</span><span class='ignore'>.</span> <br>
<br>
<span class='cmd'>\chapter</span><span class='ignore'>{</span><span class='hword'>Memory</span> <span class='hword'>Mapping</span><span class='ignore'>}</span><br>
<span class='ignore'>{</span><span class='comment'>%\hypersetup{linkcolor=black}</span><br>
<span class='cmd'>\startcontents</span><span class='option'>[chapters]</span><br>
<span class='cmd'>\printcontents</span><span class='option'>[chapters]</span><span class='ignore'>{</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='word'>1</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='ignore'>}</span><br>
<span class='ignore'>}</span><br>
<span class='cmd'>\noindent</span><span class='cmd'>\\</span><br>
<span class='word'>The</span> <span class='word'>Vmicro16</span> <span class='word'>processor</span> <span class='word'>uses</span> <span class='word'>a</span> <span class='word'>memory-mapping</span> <span class='word'>scheme</span> <span class='word'>to</span> <span class='word'>communicate</span> <span class='word'>with</span> <span class='word'>peripherals</span> <span class='word'>and</span> <span class='word'>other</span> <span class='word'>cores</span><span class='ignore'>.</span> <span class='word'>This</span> <span class='word'>chapter</span> <span class='word'>describes</span> <span class='word'>the</span> <span class='word'>design</span> <span class='word'>decisions</span> <span class='word'>and</span> <span class='word'>implementation</span> <span class='word'>of</span> <span class='word'>the</span> <span class='word'>memory-map</span> <span class='word'>used</span> <span class='word'>in</span> <span class='word'>this</span> <span class='word'>project</span><span class='ignore'>.</span><br>
<br>
<span class='cmd'>\section</span><span class='ignore'>{</span><span class='hword'>Introduction</span><span class='ignore'>}</span><br>
<span class='word'>Memory</span> <span class='word'>mapping</span> <span class='word'>is</span> <span class='word'>a</span> <span class='word'>common</span> <span class='word'>technique</span> <span class='word'>used</span> <span class='word'>by</span> <span class='word'>CPUs</span><span class='ignore'>,</span> <span class='word'>micro-controllers</span><span class='ignore'>,</span> <span class='word'>and</span> <span class='word'>other</span> <span class='word'>system-on-chip</span> <span class='word'>devices</span><span class='ignore'>,</span> <span class='word'>that</span> <span class='word'>enables</span> <span class='word'>peripherals</span> <span class='word'>and</span> <span class='word'>other</span> <span class='word'>devices</span> <span class='word'>to</span> <span class='word'>be</span> <span class='word'>accessed</span> <span class='word'>via</span> <span class='word'>a</span> <span class='word'>memory</span> <span class='word'>address</span> <span class='word'>on</span> <span class='word'>a</span> <span class='word'>common</span> <span class='word'>bus</span><span class='ignore'>.</span> <span class='word'>In</span> <span class='word'>a</span> <span class='word'>processor</span> <span class='word'>use-case</span><span class='ignore'>,</span> <span class='word'>this</span> <span class='word'>allows</span> <span class='word'>for</span> <span class='word'>the</span> <span class='word'>reuse</span> <span class='word'>of</span> <span class='word'>existing</span> <span class='word'>instructions</span> <span class='ignore'>(</span><span class='word'>commonly</span> <span class='word'>memory</span> <span class='word'>load</span><span class='ignore'>/</span><span class='word'>store</span> <span class='word'>instructions</span><span class='ignore'>)</span> <span class='word'>to</span> <span class='word'>communicate</span> <span class='word'>with</span> <span class='word'>external</span> <span class='word'>peripherals</span> <span class='word'>with</span> <span class='word'>little</span> <span class='word'>additional</span> <span class='word'>logic</span><span class='ignore'>.</span><br>
<br>
<span class='cmd'>\section</span><span class='ignore'>{</span><span class='hword'>Address</span> <span class='hword'>Decoding</span><span class='ignore'>}</span><br>
<span class='word'>An</span> <span class='word'>address</span> <span class='word'>decoder</span> <span class='word'>is</span> <span class='word'>used</span> <span class='word'>to</span> <span class='word'>determine</span> <span class='word'>the</span> <span class='word'>peripheral</span> <span class='word'>that</span> <span class='word'>the</span> <span class='word'>address</span> <span class='word'>is</span> <span class='word'>requesting</span><span class='ignore'>.</span> <span class='word'>The</span> <span class='word'>address</span> <span class='word'>decoder</span> <span class='word'>module</span><span class='ignore'>,</span> <span class='cmd'>\verb</span><span class='cmd'>|</span><span class='ignore'>addr_dec</span><span class='cmd'>|</span> <span class='word'>in</span> <span class='cmd'>\verb</span><span class='cmd'>|</span><span class='ignore'>apb_intercon.v</span><span class='cmd'>|</span><span class='ignore'>,</span> <span class='word'>takes</span> <span class='word'>the</span> <span class='word'>16-bit</span> <span class='cmd'>\verb</span><span class='cmd'>|</span><span class='ignore'>PADDR</span><span class='cmd'>|</span> <span class='word'>from</span> <span class='word'>the</span> <span class='word'>active</span> <span class='word'>APB</span> <span class='word'>interface</span> <span class='word'>and</span> <span class='word'>checks</span> <span class='word'>for</span> <span class='word'>set</span> <span class='word'>bits</span> <span class='word'>to</span> <span class='word'>determine</span> <span class='word'>which</span> <span class='word'>peripheral</span> <span class='word'>to</span> <span class='word'>select</span><span class='ignore'>.</span> <span class='word'>The</span> <span class='word'>decoder</span> <span class='word'>outputs</span> <span class='word'>a</span> <span class='word'>chip</span> <span class='word'>enable</span> <span class='word'>signal</span> <span class='cmd'>\verb</span><span class='cmd'>|</span><span class='ignore'>PSEL</span><span class='cmd'>|</span> <span class='word'>for</span> <span class='word'>the</span> <span class='word'>selected</span> <span class='word'>peripheral</span><span class='ignore'>.</span> <span class='word'>For</span> <span class='word'>example</span><span class='ignore'>,</span> <span class='word'>if</span> <span class='word'>bit</span> <span class='word'>12</span> <span class='word'>is</span> <span class='word'>set</span> <span class='word'>in</span> <span class='cmd'>\verb</span><span class='cmd'>|</span><span class='ignore'>PADDR</span><span class='cmd'>|</span> <span class='word'>then</span> <span class='word'>the</span> <span class='word'>shared</span> <span class='word'>memory</span> <span class='word'>peripheral's</span> <span class='cmd'>\verb</span><span class='cmd'>|</span><span class='ignore'>PSEL</span><span class='cmd'>|</span> <span class='word'>is</span> <span class='word'>set</span> <span class='word'>high</span> <span class='word'>and</span> <span class='word'>others</span> <span class='word'>to</span> <span class='word'>low</span><span class='ignore'>.</span> <span class='word'>A</span> <span class='word'>schematic</span> <span class='word'>for</span> <span class='word'>the</span> <span class='word'>decoder</span> <span class='word'>is</span> <span class='word'>shown</span> <span class='word'>in</span> <span class='cmd'>\cref</span><span class='ignore'>{</span><span class='word'>fig</span><span class='ignore'>:</span><span class='word'>decoder</span><span class='ignore'>}</span><span class='ignore'>.</span><br>
<br>
<span class='envir'>\begin</span><span class='envir'>{figure}</span><span class='option'>[H]</span><br>
<span class='exclcmd'>\centering</span><br>
<span class='exclcmd'>\includegraphics</span><span class='option'>[width=0.8\textwidth]</span><span class='ignore'>{</span><span class='ignore'>decoder</span><span class='ignore'>}</span><br>
<span class='cmd'>\caption</span><span class='ignore'>{</span><span class='oword'>Schematic</span> <span class='oword'>showing</span> <span class='oword'>the</span> <span class='oword'>address</span> <span class='oword'>decoder</span> <span class='ignore'>(</span><span class='oword'>addr</span><span class='cmd'>\_</span><span class='oword'>dec</span><span class='ignore'>)</span> <span class='oword'>accepting</span> <span class='oword'>the</span> <span class='oword'>active</span> <span class='oword'>PADDR</span> <span class='oword'>signal</span> <span class='oword'>and</span> <span class='oword'>outputting</span> <span class='oword'>PSEL</span> <span class='oword'>chip</span> <span class='oword'>enable</span> <span class='oword'>signals</span> <span class='oword'>to</span> <span class='oword'>each</span> <span class='oword'>peripheral</span><span class='ignore'>.</span><span class='ignore'>}</span><br>
<span class='exclcmd'>\label</span><span class='ignore'>{</span><span class='ignore'>fig</span><span class='ignore'>:</span><span class='ignore'>decoder</span><span class='ignore'>}</span><br>
<span class='envir'>\end</span><span class='envir'>{figure}</span><br>
<br>
<span class='cmd'>\subsection</span><span class='ignore'>{</span><span class='hword'>Decoder</span> <span class='hword'>Optimisations</span><span class='ignore'>}</span><br>
<span class='word'>Performing</span> <span class='word'>a</span> <span class='word'>16-bit</span> <span class='word'>equality</span> <span class='word'>comparison</span> <span class='word'>of</span> <span class='word'>the</span> <span class='cmd'>\verb</span><span class='cmd'>|</span><span class='ignore'>PADDR</span><span class='cmd'>|</span> <span class='word'>signal</span> <span class='word'>against</span> <span class='word'>each</span> <span class='word'>peripheral</span> <span class='word'>memory</span> <span class='word'>address</span> <span class='word'>consumes</span> <span class='word'>a</span> <span class='word'>significant</span> <span class='word'>amount</span> <span class='word'>of</span> <span class='word'>logic</span><span class='ignore'>.</span> <span class='word'>Depending</span> <span class='word'>on</span> <span class='word'>the</span> <span class='word'>synthesis</span> <span class='word'>tools</span> <span class='word'>and</span> <span class='word'>FPGA</span> <span class='word'>features</span><span class='ignore'>,</span> <span class='word'>a</span> <span class='word'>16-bit</span> <span class='word'>comparator</span> <span class='word'>might</span> <span class='word'>require</span> <span class='word'>a</span> <span class='word'>fixed</span> <span class='word'>16-bit</span> <span class='word'>value</span> <span class='word'>input</span> <span class='word'>to</span> <span class='word'>compare</span> <span class='word'>against</span> <span class='ignore'>(</span><span class='word'>where</span> <span class='word'>the</span> <span class='word'>0s</span> <span class='word'>are</span> <span class='word'>inverted</span><span class='ignore'>)</span> <span class='word'>and</span> <span class='word'>a</span> <span class='word'>wide-AND</span> <span class='word'>to</span> <span class='word'>reduce</span> <span class='word'>and</span> <span class='word'>compare</span> <span class='cmd'>\cite</span><span class='ignore'>{</span><span class='ignore'>palchaudhuri2015high</span><span class='ignore'>,</span><span class='ignore'>salauyou2015designing</span><span class='ignore'>}</span><span class='ignore'>.</span> <span class='word'>An</span> <span class='word'>example</span> <span class='word'>4-bit</span> <span class='word'>comparator</span> <span class='word'>is</span> <span class='word'>shown</span> <span class='word'>below</span> <span class='word'>in</span> <span class='cmd'>\cref</span><span class='ignore'>{</span><span class='word'>fig</span><span class='ignore'>:</span><span class='word'>comparator</span><span class='ignore'>}</span><span class='ignore'>.</span><br>
<br>
<span class='envir'>\begin</span><span class='envir'>{figure}</span><span class='option'>[H]</span><br>
<span class='exclcmd'>\centering</span><br>
<span class='exclcmd'>\includegraphics</span><span class='option'>[width=0.5\textwidth]</span><span class='ignore'>{</span><span class='ignore'>comparator</span><span class='ignore'>}</span><br>
<span class='cmd'>\caption</span><span class='ignore'>{</span><span class='oword'>Example</span> <span class='oword'>4-bit</span> <span class='oword'>binary</span> <span class='oword'>comparator</span> <span class='oword'>which</span> <span class='oword'>compares</span> <span class='oword'>the</span> <span class='oword'>bits</span> <span class='ignore'>(</span><span class='oword'>a</span><span class='ignore'>,</span> <span class='oword'>b</span><span class='ignore'>,</span> <span class='oword'>c</span><span class='ignore'>,</span> <span class='oword'>d</span><span class='ignore'>)</span> <span class='oword'>to</span> <span class='oword'>the</span> <span class='oword'>constant</span> <span class='oword'>value</span> <span class='oword'>1010</span><span class='ignore'>.</span> <span class='oword'>The</span> <span class='oword'>0s</span> <span class='oword'>of</span> <span class='oword'>the</span> <span class='oword'>constant</span> <span class='oword'>are</span> <span class='oword'>inverted</span> <span class='oword'>and</span> <span class='oword'>then</span> <span class='oword'>all</span> <span class='oword'>are</span> <span class='oword'>passed</span> <span class='oword'>to</span> <span class='oword'>a</span> <span class='oword'>wide-AND</span><span class='ignore'>.</span><span class='ignore'>}</span><br>
<span class='exclcmd'>\label</span><span class='ignore'>{</span><span class='ignore'>fig</span><span class='ignore'>:</span><span class='ignore'>comparator</span><span class='ignore'>}</span><br>
<span class='envir'>\end</span><span class='envir'>{figure}</span><br>
<br>
<span class='word'>As</span> <span class='word'>we</span> <span class='word'>are</span> <span class='word'>targeting</span> <span class='word'>FPGAs</span><span class='ignore'>,</span> <span class='word'>which</span> <span class='word'>use</span> <span class='word'>LUTs</span> <span class='word'>to</span> <span class='word'>implement</span> <span class='word'>combinatorial</span> <span class='word'>logic</span><span class='ignore'>,</span> <span class='word'>we</span> <span class='word'>can</span> <span class='word'>conveniently</span> <span class='word'>utilise</span> <span class='word'>Verilog's</span> <span class='cmd'>\verb</span><span class='cmd'>|</span><span class='ignore'>==</span><span class='cmd'>|</span> <span class='word'>operator</span> <span class='word'>on</span> <span class='word'>fairly</span> <span class='word'>large</span> <span class='word'>operands</span> <span class='word'>without</span> <span class='word'>worrying</span> <span class='word'>about</span> <span class='word'>consuming</span> <span class='word'>too</span> <span class='word'>many</span> <span class='word'>resources</span><span class='ignore'>.</span> <span class='word'>The</span> <span class='word'>targeted</span> <span class='word'>FPGA</span> <span class='word'>devices</span> <span class='word'>in</span> <span class='word'>this</span> <span class='word'>project</span><span class='ignore'>,</span> <span class='word'>the</span> <span class='word'>Cyclone</span> <span class='word'>V</span> <span class='word'>and</span> <span class='word'>Spartan</span> <span class='word'>6</span><span class='ignore'>,</span> <span class='word'>feature</span> <span class='word'>6-input</span> <span class='word'>LUTs</span> <span class='word'>which</span> <span class='word'>allow</span> <span class='word'>64</span> <span class='word'>different</span> <span class='word'>configurations</span> <span class='cmd'>\cite</span><span class='ignore'>{</span><span class='ignore'>s6clb</span><span class='ignore'>,</span> <span class='ignore'>cvclb</span><span class='ignore'>}</span><span class='ignore'>.</span> <span class='word'>Knowing</span> <span class='word'>this</span><span class='ignore'>,</span> <span class='word'>we</span> <span class='word'>can</span> <span class='word'>design</span> <span class='word'>the</span> <span class='word'>address</span> <span class='word'>decoder</span> <span class='word'>to</span> <span class='word'>utilise</span> <span class='word'>the</span> <span class='word'>FPGA's</span> <span class='word'>LUTs</span> <span class='word'>more</span> <span class='word'>effectively</span> <span class='word'>and</span> <span class='word'>reduce</span> <span class='word'>it's</span> <span class='word'>footprint</span> <span class='word'>significantly</span><span class='ignore'>.</span><br>
<br>
<span class='word'>We</span> <span class='word'>can</span> <span class='word'>use</span> <span class='word'>part</span> <span class='word'>of</span> <span class='word'>the</span> <span class='cmd'>\verb</span><span class='cmd'>|</span><span class='ignore'>PADDR</span><span class='cmd'>|</span> <span class='word'>signal</span> <span class='word'>as</span> <span class='word'>a</span> <span class='word'>chip</span> <span class='word'>select</span> <span class='word'>and</span> <span class='word'>the</span> <span class='word'>other</span> <span class='word'>bits</span> <span class='word'>as</span> <span class='word'>sub-addresses</span> <span class='word'>to</span> <span class='word'>interface</span> <span class='word'>with</span> <span class='word'>the</span> <span class='word'>peripheral</span><span class='ignore'>.</span> <span class='word'>The</span> <span class='word'>addressing</span> <span class='word'>bits</span> <span class='word'>are</span> <span class='word'>passed</span> <span class='word'>into</span> <span class='word'>the</span> <span class='word'>FPGA's</span> <span class='word'>6-input</span> <span class='word'>LUTs</span> <span class='word'>which</span> <span class='word'>are</span> <span class='word'>programmed</span> <span class='ignore'>(</span><span class='word'>via</span> <span class='word'>the</span> <span class='word'>bitstream</span><span class='ignore'>)</span> <span class='word'>to</span> <span class='word'>output</span> <span class='word'>1</span> <span class='word'>or</span> <span class='word'>0</span> <span class='word'>depending</span> <span class='word'>on</span> <span class='word'>the</span> <span class='word'>address</span><span class='ignore'>.</span> <span class='cmd'>\cref</span><span class='ignore'>{</span><span class='word'>fig</span><span class='ignore'>:</span><span class='word'>comparatorlut</span><span class='ignore'>}</span> <span class='word'>below</span> <span class='word'>shows</span> <span class='word'>a</span> <span class='word'>LUT</span> <span class='word'>based</span> <span class='word'>approach</span> <span class='word'>to</span> <span class='word'>address</span> <span class='word'>decoding</span> <span class='word'>which</span> <span class='word'>will</span> <span class='word'>utilise</span> <span class='word'>approximately</span> <span class='word'>one</span> <span class='word'>ALM</span><span class='ignore'>/</span><span class='word'>CLB</span> <span class='word'>module</span> <span class='word'>per</span> <span class='word'>peripheral</span> <span class='word'>chip</span> <span class='word'>select</span> <span class='ignore'>(</span><span class='cmd'>\verb</span><span class='cmd'>|</span><span class='ignore'>PSEL</span><span class='cmd'>|</span><span class='ignore'>)</span> <span class='word'>and</span> <span class='word'>one</span> <span class='word'>for</span> <span class='word'>error</span> <span class='word'>detection</span><span class='ignore'>.</span> <span class='word'>This</span> <span class='word'>method</span> <span class='word'>of</span> <span class='word'>comparison</span> <span class='ignore'>(</span><span class='word'>LUT</span> <span class='word'>based</span><span class='ignore'>)</span> <span class='word'>is</span> <span class='word'>utilised</span> <span class='word'>in</span> <span class='word'>the</span> <span class='cmd'>\verb</span><span class='cmd'>|</span><span class='ignore'>addr_dec</span><span class='cmd'>|</span> <span class='word'>module</span> <span class='word'>in</span> <span class='cmd'>\verb</span><span class='cmd'>|</span><span class='ignore'>apb_intercon.v</span><span class='cmd'>|</span><span class='ignore'>.</span><br>
<br>
<span class='envir'>\begin</span><span class='envir'>{figure}</span><span class='option'>[H]</span><br>
<span class='exclcmd'>\centering</span><br>
<span class='exclcmd'>\includegraphics</span><span class='option'>[width=0.8\textwidth]</span><span class='ignore'>{</span><span class='ignore'>comparatorlut</span><span class='ignore'>}</span><br>
<span class='cmd'>\caption</span><span class='ignore'>{</span><span class='oword'>Bits</span> <span class='ignore'>[</span><span class='oword'>7</span><span class='ignore'>:</span><span class='oword'>3</span><span class='ignore'>]</span> <span class='oword'>of</span> <span class='oword'>an</span> <span class='oword'>8-bit</span> <span class='oword'>PADDR</span> <span class='oword'>signal</span> <span class='oword'>are</span> <span class='oword'>used</span> <span class='oword'>as</span> <span class='oword'>inputs</span> <span class='oword'>to</span> <span class='oword'>5-bit</span> <span class='oword'>LUTs</span> <span class='oword'>to</span> <span class='oword'>generate</span> <span class='oword'>a</span> <span class='oword'>PSEL</span> <span class='oword'>signal</span><span class='ignore'>.</span> <span class='oword'>In</span> <span class='oword'>addition</span><span class='ignore'>,</span> <span class='oword'>a</span> <span class='oword'>default</span> <span class='oword'>error</span> <span class='oword'>case</span> <span class='oword'>is</span> <span class='oword'>shown</span> <span class='oword'>allowing</span> <span class='oword'>the</span> <span class='oword'>address</span> <span class='oword'>decoder</span> <span class='oword'>to</span> <span class='oword'>detect</span> <span class='oword'>incorrect</span> <span class='oword'>PADDR</span> <span class='oword'>values</span> <span class='ignore'>(</span><span class='oword'>e.g</span><span class='ignore'>.</span> <span class='oword'>if</span> <span class='oword'>no</span> <span class='oword'>PSEL</span> <span class='oword'>signals</span> <span class='oword'>are</span> <span class='oword'>generated</span><span class='ignore'>)</span><span class='ignore'>.</span><span class='ignore'>}</span><br>
<span class='exclcmd'>\label</span><span class='ignore'>{</span><span class='ignore'>fig</span><span class='ignore'>:</span><span class='ignore'>comparatorlut</span><span class='ignore'>}</span><br>
<span class='envir'>\end</span><span class='envir'>{figure}</span><br>
<br>
<span class='word'>The</span> <span class='word'>address</span> <span class='word'>decoding</span> <span class='word'>methods</span> <span class='word'>discussed</span> <span class='word'>above</span> <span class='word'>are</span> <span class='word'>examples</span> <span class='word'>of</span> <span class='cmd'>\textit</span><span class='ignore'>{</span><span class='word'>full-address</span><span class='ignore'>}</span> <span class='word'>decoding</span><span class='ignore'>,</span> <span class='word'>where</span> <span class='word'>each</span> <span class='word'>bit</span> <span class='ignore'>(</span><span class='word'>whether</span> <span class='word'>required</span> <span class='word'>or</span> <span class='word'>not</span><span class='ignore'>)</span> <span class='word'>is</span> <span class='word'>compared</span><span class='ignore'>.</span> <span class='word'>It</span> <span class='word'>is</span> <span class='word'>possible</span> <span class='word'>to</span> <span class='word'>further</span> <span class='word'>reduce</span> <span class='word'>the</span> <span class='word'>required</span> <span class='word'>logic</span> <span class='word'>by</span> <span class='word'>utilising</span> <span class='cmd'>\textit</span><span class='ignore'>{</span><span class='word'>partial-address</span><span class='ignore'>}</span> <span class='word'>decoding</span> <span class='cmd'>\cite</span><span class='ignore'>{</span><span class='ignore'>tanenbaum2016structured</span><span class='ignore'>}</span><span class='ignore'>.</span> <span class='word'>Partial-address</span> <span class='word'>decoding</span> <span class='word'>can</span> <span class='word'>reduce</span> <span class='word'>logic</span> <span class='word'>requirements</span> <span class='word'>by</span> <span class='word'>not</span> <span class='word'>using</span> <span class='word'>all</span> <span class='word'>bits</span><span class='ignore'>.</span> <span class='word'>For</span> <span class='word'>example</span><span class='ignore'>,</span> <span class='word'>if</span> <span class='word'>bits</span> <span class='word'>in</span> <span class='word'>address</span> <span class='cmd'>\verb</span><span class='cmd'>|</span><span class='ignore'>0x0100</span><span class='cmd'>|</span> <span class='word'>do</span> <span class='word'>not</span> <span class='word'>conflict</span> <span class='word'>with</span> <span class='word'>bits</span> <span class='word'>in</span> <span class='word'>other</span> <span class='word'>addresses</span> <span class='ignore'>(</span><span class='word'>i.e</span><span class='ignore'>.</span> <span class='word'>bit</span> <span class='word'>8</span> <span class='word'>is</span> <span class='word'>high</span> <span class='word'>in</span> <span class='word'>more</span> <span class='word'>than</span> <span class='word'>1</span> <span class='word'>address</span><span class='ignore'>)</span><span class='ignore'>,</span> <span class='word'>then</span> <span class='word'>the</span> <span class='word'>address</span> <span class='word'>decoder</span> <span class='word'>needs</span> <span class='word'>only</span> <span class='word'>concern</span> <span class='word'>bit</span> <span class='word'>8</span><span class='ignore'>,</span> <span class='word'>not</span> <span class='word'>the</span> <span class='word'>other</span> <span class='word'>bits</span><span class='ignore'>.</span> <span class='word'>This</span> <span class='word'>is</span> <span class='word'>visualised</span> <span class='word'>in</span> <span class='cmd'>\cref</span><span class='ignore'>{</span><span class='word'>fig</span><span class='ignore'>:</span><span class='word'>partial</span><span class='ignore'>}</span> <span class='word'>below</span><span class='ignore'>.</span> <span class='word'>This</span> <span class='word'>method</span> <span class='word'>is</span> <span class='word'>utilised</span> <span class='word'>in</span> <span class='word'>the</span> <span class='word'>MMU's</span> <span class='word'>address</span> <span class='word'>decoder</span> <span class='ignore'>(</span><span class='word'>module</span> <span class='cmd'>\verb</span><span class='cmd'>|</span><span class='ignore'>vmicro16_mmu</span><span class='cmd'>|</span> <span class='word'>in</span> <span class='cmd'>\verb</span><span class='cmd'>|</span><span class='ignore'>vmicro16.v:181</span><span class='cmd'>|</span><span class='ignore'>)</span><span class='ignore'>.</span> <span class='word'>As</span> <span class='word'>this</span> <span class='word'>is</span> <span class='word'>an</span> <span class='word'>optimisation</span> <span class='word'>per</span> <span class='word'>core</span><span class='ignore'>,</span> <span class='word'>significant</span> <span class='word'>resources</span> <span class='word'>can</span> <span class='word'>be</span> <span class='word'>saved</span> <span class='word'>when</span> <span class='word'>a</span> <span class='word'>large</span> <span class='word'>number</span> <span class='word'>of</span> <span class='word'>cores</span> <span class='word'>are</span> <span class='word'>used</span><span class='ignore'>.</span><br>
<br>
<span class='envir'>\begin</span><span class='envir'>{figure}</span><span class='option'>[H]</span><br>
<span class='exclcmd'>\centering</span><br>
<span class='exclcmd'>\includegraphics</span><span class='option'>[width=0.8\textwidth]</span><span class='ignore'>{</span><span class='ignore'>partial</span><span class='ignore'>}</span><br>
<span class='cmd'>\caption</span><span class='ignore'>{</span><span class='oword'>Partial</span> <span class='oword'>address</span> <span class='oword'>decoding</span> <span class='oword'>used</span> <span class='oword'>by</span> <span class='oword'>the</span> <span class='oword'>Vmicro16</span> <span class='oword'>SoC</span> <span class='oword'>design</span><span class='ignore'>.</span> <span class='oword'>Each</span> <span class='oword'>peripheral</span> <span class='oword'>shown</span> <span class='oword'>only</span> <span class='oword'>needs</span> <span class='oword'>to</span> <span class='oword'>decode</span> <span class='oword'>a</span> <span class='oword'>signal</span> <span class='oword'>bit</span> <span class='oword'>to</span> <span class='oword'>determine</span> <span class='oword'>if</span> <span class='oword'>it</span> <span class='oword'>is</span> <span class='oword'>enabled</span><span class='ignore'>.</span><span class='ignore'>}</span><br>
<span class='exclcmd'>\label</span><span class='ignore'>{</span><span class='ignore'>fig</span><span class='ignore'>:</span><span class='ignore'>partial</span><span class='ignore'>}</span><br>
<span class='envir'>\end</span><span class='envir'>{figure}</span><br>
<br>
<span class='cmd'>\section</span><span class='ignore'>{</span><span class='hword'>Memory</span> <span class='hword'>Map</span><span class='ignore'>}</span><br>
<span class='word'>The</span> <span class='word'>system-on-chip's</span> <span class='word'>memory</span> <span class='word'>map</span> <span class='word'>is</span> <span class='word'>shown</span> <span class='word'>below</span> <span class='word'>in</span> <span class='cmd'>\cref</span><span class='ignore'>{</span><span class='word'>fig</span><span class='ignore'>:</span><span class='word'>memmap</span><span class='ignore'>}</span><span class='ignore'>.</span> <span class='word'>The</span> <span class='word'>addresses</span> <span class='word'>for</span> <span class='word'>each</span> <span class='word'>peripheral</span> <span class='word'>have</span> <span class='word'>been</span> <span class='word'>carefully</span> <span class='word'>chosen</span> <span class='word'>for</span> <span class='word'>both</span><span class='ignore'>:</span><br>
<span class='envir'>\begin</span><span class='envir'>{itemize}</span><br>
<span class='cmd'>\item</span> <span class='word'>Easy</span> <span class='word'>software</span> <span class='word'>access</span> <span class='ignore'>-</span><span class='ignore'>-</span> <span class='word'>creating</span> <span class='word'>addresses</span> <span class='word'>via</span> <span class='word'>software</span> <span class='word'>requires</span> <span class='word'>few</span> <span class='word'>instructions</span> <span class='ignore'>(</span><span class='word'>normally</span> <span class='word'>one</span> <span class='word'>to</span> <span class='word'>four</span> <span class='cmd'>\verb</span><span class='cmd'>|</span><span class='ignore'>MOVI</span><span class='cmd'>|</span> <span class='word'>and</span> <span class='cmd'>\verb</span><span class='cmd'>|</span><span class='ignore'>LSHIFT</span><span class='cmd'>|</span> <span class='word'>instructions</span> <span class='word'>to</span> <span class='word'>address</span> <span class='cmd'>\verb</span><span class='cmd'>|</span><span class='ignore'>0x0000</span><span class='cmd'>|</span> <span class='word'>to</span>&nbsp; <span class='cmd'>\verb</span><span class='cmd'>|</span><span class='ignore'>0xffff</span><span class='cmd'>|</span><span class='ignore'>)</span><span class='ignore'>,</span> <span class='word'>which</span> <span class='word'>increases</span> <span class='word'>software</span> <span class='word'>performance</span><span class='ignore'>.</span><br>
<span class='cmd'>\item</span> <span class='word'>and</span> <span class='word'>Reducing</span> <span class='word'>address</span> <span class='word'>decoding</span> <span class='word'>logic</span> <span class='ignore'>-</span><span class='ignore'>-</span> <span class='word'>most</span> <span class='word'>addresses</span> <span class='word'>can</span> <span class='word'>be</span> <span class='word'>decoded</span> <span class='word'>using</span> <span class='word'>partial</span> <span class='word'>decoding</span> <span class='word'>techniques</span><span class='ignore'>.</span><br>
<span class='envir'>\end</span><span class='envir'>{itemize}</span><br>
<br>
<span class='envir'>\begin</span><span class='envir'>{figure}</span><span class='option'>[H]</span><br>
<span class='exclcmd'>\centering</span><br>
<span class='exclenv'>\begin</span><span class='exclenv'>{bytefield}</span><span class='ignore'>{</span><span class='ignore'>24</span><span class='ignore'>}</span><br>
	<span class='exclcmd'>\memsection</span><span class='ignore'>{</span><span class='ignore'>1FFF</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='ignore'>1000</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='ignore'>8</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='ignore'>Shared</span> <span class='ignore'>Memory</span> <span class='ignore'>with</span> <span class='ignore'>Global</span> <span class='ignore'>Monitor</span> <span class='exclcmd'>\\</span> <span class='exclcmd'>\vspace</span><span class='ignore'>{</span><span class='ignore'>.</span><span class='ignore'>5cm</span><span class='ignore'>}</span> <span class='exclcmd'>\tiny</span> <span class='ignore'>See</span> <span class='ignore'>vmicro16</span><span class='exclcmd'>\_</span><span class='ignore'>soc</span><span class='exclcmd'>\_</span><span class='ignore'>config.v</span><span class='ignore'>}</span><span class='exclcmd'>\\</span><br>
	<span class='exclcmd'>\bitbox</span><span class='option'>[]</span><span class='ignore'>{</span><span class='ignore'>16</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='ignore'>}</span> <span class='ignore'>&amp;</span> <span class='exclcmd'>\bitbox</span><span class='option'>[]</span><span class='ignore'>{</span><span class='ignore'>16</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='exclmath'>$</span><span class='mathcmd'>\vdots</span><span class='exclmath'>$</span> <span class='exclcmd'>\\</span><span class='option'>[1ex]</span><span class='ignore'>}</span> <span class='exclcmd'>\\</span><br>
	<br>
	<span class='exclenv'>\begin</span><span class='exclenv'>{rightwordgroup}</span><span class='ignore'>{</span><span class='ignore'>Shared</span> <span class='ignore'>peripherals</span><span class='ignore'>}</span><br>
	<span class='exclcmd'>\memsection</span><span class='ignore'>{</span><span class='ignore'>0202</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='ignore'>0200</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='ignore'>3</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='exclcmd'>\nameref</span><span class='ignore'>{</span><span class='ignore'>sect</span><span class='ignore'>:</span><span class='ignore'>timer</span><span class='ignore'>}</span><span class='ignore'>}</span><br>
	<span class='exclenv'>\end</span><span class='exclenv'>{rightwordgroup}</span><span class='exclcmd'>\\</span><br>
	<span class='exclcmd'>\bitbox</span><span class='option'>[]</span><span class='ignore'>{</span><span class='ignore'>16</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='ignore'>}</span> <span class='ignore'>&amp;</span> <span class='exclcmd'>\bitbox</span><span class='option'>[]</span><span class='ignore'>{</span><span class='ignore'>16</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='exclmath'>$</span><span class='mathcmd'>\vdots</span><span class='exclmath'>$</span> <span class='exclcmd'>\\</span><span class='option'>[1ex]</span><span class='ignore'>}</span> <span class='exclcmd'>\\</span><br>
	<br>
	<span class='exclenv'>\begin</span><span class='exclenv'>{rightwordgroup}</span><span class='ignore'>{</span><span class='ignore'>Per-core</span> <span class='ignore'>instances</span><span class='ignore'>}</span><br>
	<span class='exclcmd'>\memsection</span><span class='ignore'>{</span><span class='ignore'>0108</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='ignore'>1</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='exclcmd'>\nameref</span><span class='ignore'>{</span><span class='ignore'>sect</span><span class='ignore'>:</span><span class='ignore'>interrupts</span><span class='ignore'>}</span> <span class='ignore'>Mask</span><span class='ignore'>}</span><span class='exclcmd'>\\</span><br>
	<span class='exclcmd'>\memsection</span><span class='ignore'>{</span><span class='ignore'>0107</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='ignore'>0100</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='ignore'>3</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='exclcmd'>\nameref</span><span class='ignore'>{</span><span class='ignore'>sect</span><span class='ignore'>:</span><span class='ignore'>interrupts</span><span class='ignore'>}</span> <span class='ignore'>Vector</span><span class='ignore'>}</span><br>
	<span class='exclenv'>\end</span><span class='exclenv'>{rightwordgroup}</span><span class='exclcmd'>\\</span><br>
	<br>
	<span class='exclcmd'>\bitbox</span><span class='option'>[]</span><span class='ignore'>{</span><span class='ignore'>16</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='ignore'>}</span> <span class='ignore'>&amp;</span> <span class='exclcmd'>\bitbox</span><span class='option'>[]</span><span class='ignore'>{</span><span class='ignore'>16</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='exclmath'>$</span><span class='mathcmd'>\vdots</span><span class='exclmath'>$</span> <span class='exclcmd'>\\</span><span class='option'>[1ex]</span><span class='ignore'>}</span> <span class='exclcmd'>\\</span><br>
	<br>
	<span class='exclenv'>\begin</span><span class='exclenv'>{rightwordgroup}</span><span class='ignore'>{</span><span class='ignore'>Shared</span> <span class='ignore'>peripherals</span><span class='ignore'>}</span><br>
	<span class='exclcmd'>\memsection</span><span class='ignore'>{</span><span class='ignore'>00B8</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='ignore'>1</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='exclcmd'>\nameref</span><span class='ignore'>{</span><span class='ignore'>sect</span><span class='ignore'>:</span><span class='ignore'>watchdog</span><span class='ignore'>}</span><span class='ignore'>}</span><span class='exclcmd'>\\</span><br>
	<span class='exclcmd'>\memsection</span><span class='ignore'>{</span><span class='ignore'>00B7</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='ignore'>00B0</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='ignore'>3</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='ignore'>REGS0</span><span class='ignore'>}</span><span class='exclcmd'>\\</span><br>
	<span class='exclcmd'>\bitbox</span><span class='option'>[]</span><span class='ignore'>{</span><span class='ignore'>16</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='ignore'>}</span> <span class='ignore'>&amp;</span> <span class='exclcmd'>\bitbox</span><span class='option'>[]</span><span class='ignore'>{</span><span class='ignore'>16</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='exclmath'>$</span><span class='mathcmd'>\vdots</span><span class='exclmath'>$</span> <span class='exclcmd'>\\</span><span class='option'>[1ex]</span><span class='ignore'>}</span> <span class='exclcmd'>\\</span><br>
	<span class='exclcmd'>\memsection</span><span class='ignore'>{</span><span class='ignore'>00A1</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='ignore'>00A0</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='ignore'>2</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='ignore'>UART0</span><span class='ignore'>}</span><span class='exclcmd'>\\</span><br>
	<span class='exclcmd'>\bitbox</span><span class='option'>[]</span><span class='ignore'>{</span><span class='ignore'>16</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='ignore'>}</span> <span class='ignore'>&amp;</span> <span class='exclcmd'>\bitbox</span><span class='option'>[]</span><span class='ignore'>{</span><span class='ignore'>16</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='exclmath'>$</span><span class='mathcmd'>\vdots</span><span class='exclmath'>$</span> <span class='exclcmd'>\\</span><span class='option'>[1ex]</span><span class='ignore'>}</span> <span class='exclcmd'>\\</span><br>
	<span class='exclcmd'>\memsection</span><span class='ignore'>{</span><span class='ignore'>0092</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='ignore'>1</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='ignore'>GPIO2</span><span class='ignore'>}</span><span class='exclcmd'>\\</span><br>
	<span class='exclcmd'>\memsection</span><span class='ignore'>{</span><span class='ignore'>0091</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='ignore'>1</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='ignore'>GPIO1</span><span class='ignore'>}</span><span class='exclcmd'>\\</span><br>
	<span class='exclcmd'>\memsection</span><span class='ignore'>{</span><span class='ignore'>0090</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='ignore'>1</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='ignore'>GPIO0</span><span class='ignore'>}</span><br>
	<span class='exclenv'>\end</span><span class='exclenv'>{rightwordgroup}</span><span class='exclcmd'>\\</span><br>
	<span class='exclcmd'>\bitbox</span><span class='option'>[]</span><span class='ignore'>{</span><span class='ignore'>16</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='ignore'>}</span> <span class='ignore'>&amp;</span> <span class='exclcmd'>\bitbox</span><span class='option'>[]</span><span class='ignore'>{</span><span class='ignore'>16</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='exclmath'>$</span><span class='mathcmd'>\vdots</span><span class='exclmath'>$</span> <span class='exclcmd'>\\</span><span class='option'>[1ex]</span><span class='ignore'>}</span> <span class='exclcmd'>\\</span><br>
	<br>
	<span class='exclenv'>\begin</span><span class='exclenv'>{rightwordgroup}</span><span class='ignore'>{</span><span class='ignore'>Per-core</span> <span class='ignore'>instances</span><span class='ignore'>}</span><br>
	<span class='exclcmd'>\memsection</span><span class='ignore'>{</span><span class='ignore'>008F</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='ignore'>0080</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='ignore'>3</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='ignore'>16</span> <span class='ignore'>Special</span> <span class='ignore'>Registers</span><span class='ignore'>}</span><span class='exclcmd'>\\</span><br>
	<span class='exclcmd'>\memsection</span><span class='ignore'>{</span><span class='ignore'>007F</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='ignore'>0000</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='ignore'>8</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='ignore'>Scratch</span> <span class='ignore'>Memory</span> <span class='exclcmd'>\\</span> <span class='exclcmd'>\vspace</span><span class='ignore'>{</span><span class='ignore'>.</span><span class='ignore'>5cm</span><span class='ignore'>}</span> <span class='exclcmd'>\tiny</span> <span class='ignore'>See</span> <span class='ignore'>vmicro16</span><span class='exclcmd'>\_</span><span class='ignore'>soc</span><span class='exclcmd'>\_</span><span class='ignore'>config.v</span><span class='ignore'>}</span><br>
	<span class='exclenv'>\end</span><span class='exclenv'>{rightwordgroup}</span><span class='exclcmd'>\\</span><br>
	<br>
<span class='exclenv'>\end</span><span class='exclenv'>{bytefield}</span><br>
<span class='cmd'>\caption</span><span class='ignore'>{</span><span class='oword'>Memory</span> <span class='oword'>map</span> <span class='oword'>showing</span> <span class='oword'>addresses</span> <span class='oword'>of</span> <span class='oword'>various</span> <span class='oword'>memory</span> <span class='oword'>sections</span><span class='ignore'>.</span><span class='ignore'>}</span><br>
<span class='exclcmd'>\label</span><span class='ignore'>{</span><span class='ignore'>fig</span><span class='ignore'>:</span><span class='ignore'>memmap</span><span class='ignore'>}</span><br>
<span class='envir'>\end</span><span class='envir'>{figure}</span><br>
<br>
</p></div>
<div class='count'>
<ul class='count'>
<li class='header'>Included file: ./chapter_design.tex</li>
<li>Encoding: ascii</li>
<li>Words in text: 1720</li>
<li>Words in headers: 36</li>
<li>Words outside text (captions, etc.): 143</li>
<li>Number of headers: 17</li>
<li>Number of floats/tables/figures: 11</li>
<li>Number of math inlines: 0</li>
<li>Number of math displayed: 0</li>
<li>Subcounts:</li>
<span class='subcount'>
<li class='fielddesc'>&nbsp; text+headers+captions (#headers/#floats/#inlines/#displayed)</li>
  <li>1+1+0 (1/0/0/0) Chapter: Interconnect</li>
  <li>172+1+0 (1/0/0/0) Section: Introduction</li>
  <li>100+4+6 (1/1/0/0) Subsection: Comparison of On-chip Buses</li>
  <li>32+1+6 (1/1/0/0) Section: Overview</li>
  <li>100+2+0 (1/0/0/0) Subsection: Design Considerations</li>
  <li>0+1+0 (1/1/0/0) Section: Interfaces</li>
  <li>0+4+0 (1/1/0/0) Subsection: Master to Slave Interface</li>
  <li>337+3+1 (2/2/0/0) Subsection: Multi-master Support</li>
  <li>416+10+0 (3/0/0/0) Section: Further Work</li>
  <li>30+2+0 (1/0/0/0) Chapter: Memory Mapping</li>
  <li>57+1+0 (1/0/0/0) Section: Introduction</li>
  <li>79+2+21 (1/1/0/0) Section: Address Decoding</li>
  <li>338+2+101 (1/3/0/0) Subsection: Decoder Optimisations</li>
  <li>58+2+8 (1/1/0/0) Section: Memory Map</li>
</span>
</ul>
</div>
<h2>File: ./chapter_software.tex</h2>
<div class='parse'><p>
<br>
<span class='cmd'>\chapter</span><span class='ignore'>{</span><span class='hword'>Multi-core</span> <span class='hword'>Communication</span><span class='ignore'>}</span><br>
<span class='cmd'>\startcontents</span><span class='option'>[chapters]</span><br>
<span class='cmd'>\printcontents</span><span class='option'>[chapters]</span><span class='ignore'>{</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='word'>1</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='ignore'>}</span><br>
<br>
<span class='cmd'>\noindent</span><span class='cmd'>\\</span><br>
<span class='word'>So</span> <span class='word'>far</span> <span class='word'>we</span> <span class='word'>have</span> <span class='word'>discussed</span> <span class='word'>the</span> <span class='word'>features</span> <span class='word'>and</span> <span class='word'>design</span> <span class='word'>of</span> <span class='word'>the</span> <span class='word'>Vmicro16</span> <span class='word'>system-on-chip</span><span class='ignore'>.</span> <span class='word'>This</span> <span class='word'>section</span> <span class='word'>will</span> <span class='word'>discuss</span> <span class='word'>the</span> <span class='word'>multi-processing</span> <span class='word'>functionality</span> <span class='word'>and</span> <span class='word'>how</span> <span class='word'>to</span> <span class='word'>use</span> <span class='word'>it</span><span class='ignore'>.</span><br>
<br>
<span class='cmd'>\section</span><span class='ignore'>{</span><span class='hword'>Introduction</span><span class='ignore'>}</span><br>
<span class='word'>Multi-processing</span> <span class='word'>functionality</span> <span class='word'>is</span> <span class='word'>the</span> <span class='word'>primary</span> <span class='word'>deliverable</span> <span class='word'>of</span> <span class='word'>this</span> <span class='word'>project</span><span class='ignore'>.</span><br>
<br>
<span class='cmd'>\subsection</span><span class='ignore'>{</span><span class='hword'>Design</span> <span class='hword'>Goals</span><span class='ignore'>}</span><br>
<span class='envir'>\begin</span><span class='envir'>{itemize}</span><br>
<span class='cmd'>\item</span> <span class='cmd'>\textbf</span><span class='ignore'>{</span><span class='word'>Support</span> <span class='word'>common</span> <span class='word'>synchronisation</span> <span class='word'>primitives</span><span class='ignore'>.</span><span class='ignore'>}</span><span class='cmd'>\\</span><br>
<span class='word'>Software</span> <span class='word'>should</span> <span class='word'>be</span> <span class='word'>able</span> <span class='word'>to</span> <span class='word'>implement</span> <span class='word'>common</span> <span class='word'>synchronisation</span> <span class='word'>primitives</span><span class='ignore'>,</span> <span class='word'>such</span> <span class='word'>as</span> <span class='word'>mutexes</span><span class='ignore'>,</span> <span class='word'>semaphores</span><span class='ignore'>,</span> <span class='word'>and</span> <span class='word'>memory</span> <span class='word'>barriers</span><span class='ignore'>,</span> <span class='word'>to</span> <span class='word'>perform</span> <span class='word'>atomic</span> <span class='word'>operations</span> <span class='word'>and</span> <span class='word'>avoid</span> <span class='word'>race</span> <span class='word'>conditions</span><span class='ignore'>,</span> <span class='word'>which</span> <span class='word'>are</span> <span class='word'>critical</span> <span class='word'>in</span> <span class='word'>parallel</span> <span class='word'>and</span> <span class='word'>concurrent</span> <span class='word'>software</span> <span class='word'>applications</span><span class='ignore'>.</span><br>
<br>
<span class='cmd'>\item</span> <span class='cmd'>\textbf</span><span class='ignore'>{</span><span class='word'>Context</span> <span class='word'>identification</span><span class='ignore'>.</span><span class='ignore'>}</span><span class='cmd'>\\</span><br>
<span class='word'>The</span> <span class='word'>SoC</span> <span class='word'>should</span> <span class='word'>expose</span> <span class='word'>configuration</span> <span class='word'>information</span> <span class='word'>such</span> <span class='word'>as</span><span class='ignore'>:</span> <span class='word'>the</span> <span class='word'>number</span> <span class='word'>of</span> <span class='word'>processing</span> <span class='word'>cores</span><span class='ignore'>,</span> <span class='word'>amount</span> <span class='word'>of</span> <span class='word'>shared</span> <span class='word'>and</span> <span class='word'>scratch</span> <span class='word'>memory</span><span class='ignore'>,</span> <span class='word'>and</span> <span class='word'>the</span> <span class='cmd'>\verb</span><span class='cmd'>|</span><span class='ignore'>CORE_ID</span><span class='cmd'>|</span><span class='ignore'>,</span> <span class='word'>to</span> <span class='word'>each</span> <span class='word'>thread</span><span class='ignore'>.</span><br>
<br>
<span class='envir'>\end</span><span class='envir'>{itemize}</span><br>
<br>
<br>
<span class='envir'>\begin</span><span class='envir'>{figure}</span><span class='option'>[h]</span><br>
<span class='exclcmd'>\centering</span><br>
<span class='exclcmd'>\includegraphics</span><span class='option'>[width=0.7\textwidth]</span><span class='ignore'>{</span><span class='ignore'>multicore</span><span class='ignore'>}</span><br>
<span class='cmd'>\caption</span><span class='ignore'>{</span><span class='oword'>Block</span> <span class='oword'>digram</span> <span class='oword'>showing</span> <span class='oword'>the</span> <span class='oword'>main</span> <span class='oword'>multi-processing</span> <span class='oword'>components</span><span class='ignore'>:</span> <span class='oword'>the</span> <span class='oword'>CPU</span> <span class='oword'>array</span> <span class='oword'>and</span> <span class='oword'>a</span> <span class='oword'>peripheral</span> <span class='oword'>interconnect</span> <span class='oword'>used</span> <span class='oword'>for</span> <span class='oword'>core</span> <span class='oword'>synchronisation</span><span class='ignore'>.</span><span class='ignore'>}</span><br>
<span class='exclcmd'>\label</span><span class='ignore'>{</span><span class='ignore'>fig</span><span class='ignore'>:</span><span class='ignore'>multicore</span><span class='ignore'>}</span><br>
<span class='envir'>\end</span><span class='envir'>{figure}</span><br>
<br>
<span class='cmd'>\subsection</span><span class='ignore'>{</span><span class='hword'>Context</span> <span class='hword'>Identification</span><span class='ignore'>}</span><br>
<span class='word'>A</span> <span class='word'>goal</span> <span class='word'>of</span> <span class='word'>the</span> <span class='word'>multi-processing</span> <span class='word'>functionality</span> <span class='word'>of</span> <span class='word'>this</span> <span class='word'>project</span> <span class='word'>is</span> <span class='word'>allow</span> <span class='word'>software</span> <span class='word'>written</span> <span class='word'>for</span> <span class='word'>it</span> <span class='word'>to</span> <span class='word'>be</span> <span class='word'>run</span> <span class='word'>on</span> <span class='word'>any</span> <span class='word'>number</span> <span class='word'>of</span> <span class='word'>cores</span><span class='ignore'>.</span> <span class='word'>This</span> <span class='word'>means</span> <span class='word'>that</span> <span class='word'>a</span> <span class='word'>software</span> <span class='word'>program</span> <span class='word'>will</span> <span class='word'>scale</span> <span class='word'>to</span> <span class='word'>use</span> <span class='word'>all</span> <span class='word'>cores</span> <span class='word'>in</span> <span class='word'>the</span> <span class='word'>SoC</span> <span class='word'>without</span> <span class='word'>needing</span> <span class='word'>to</span> <span class='word'>rewrite</span> <span class='word'>the</span> <span class='word'>software</span><span class='ignore'>.</span> <span class='word'>To</span> <span class='word'>enable</span> <span class='word'>this</span> <span class='word'>functionality</span><span class='ignore'>,</span> <span class='word'>the</span> <span class='word'>software</span> <span class='word'>must</span> <span class='word'>be</span> <span class='word'>able</span> <span class='word'>to</span> <span class='word'>read</span> <span class='word'>contextual</span> <span class='word'>information</span> <span class='word'>about</span> <span class='word'>the</span> <span class='word'>SoC</span><span class='ignore'>,</span> <span class='word'>such</span> <span class='word'>as</span> <span class='word'>the</span> <span class='word'>number</span> <span class='word'>of</span> <span class='word'>cores</span><span class='ignore'>,</span> <span class='word'>how</span> <span class='word'>much</span> <span class='word'>global</span> <span class='word'>and</span> <span class='word'>scratch</span> <span class='word'>memory</span> <span class='word'>is</span> <span class='word'>available</span><span class='ignore'>,</span> <span class='word'>and</span> <span class='word'>what</span> <span class='word'>the</span> <span class='cmd'>\verb</span><span class='cmd'>|</span><span class='ignore'>CORE_ID</span><span class='cmd'>|</span> <span class='word'>of</span> <span class='word'>the</span> <span class='word'>current</span> <span class='word'>core</span> <span class='word'>is</span><span class='ignore'>.</span> <br>
<br>
<span class='word'>This</span> <span class='word'>information</span> <span class='word'>is</span> <span class='word'>provided</span> <span class='word'>through</span> <span class='word'>the</span> <span class='word'>Special</span> <span class='word'>Registers</span> <span class='word'>peripheral</span> <span class='ignore'>(</span><span class='word'>0x0080</span> <span class='ignore'>-</span> <span class='word'>0x008F</span><span class='ignore'>)</span><span class='ignore'>,</span> <span class='word'>shown</span> <span class='word'>in</span> <span class='cmd'>\cref</span><span class='ignore'>{</span><span class='word'>fig</span><span class='ignore'>:</span><span class='word'>multicore</span><span class='ignore'>}</span><span class='ignore'>.</span> <span class='word'>This</span> <span class='word'>register</span> <span class='word'>set</span> <span class='word'>provides</span> <span class='word'>relevant</span> <span class='word'>information</span> <span class='word'>for</span> <span class='word'>writing</span> <span class='word'>software</span> <span class='word'>that</span> <span class='word'>can</span> <span class='word'>dynamically</span> <span class='word'>scale</span> <span class='word'>for</span> <span class='word'>various</span> <span class='word'>SoC</span> <span class='word'>configurations</span><span class='ignore'>.</span><br>
<br>
<span class='envir'>\begin</span><span class='envir'>{figure}</span><span class='option'>[H]</span><br>
<span class='exclcmd'>\centering</span><br>
<span class='exclenv'>\begin</span><span class='exclenv'>{bytefield}</span><span class='option'>[bitwidth=4ex, rightcurly=., rightcurlyspace=0pt]</span><span class='ignore'>{</span><span class='ignore'>16</span><span class='ignore'>}</span><br>
<span class='exclcmd'>\bitheader</span><span class='option'>[endianness=big]</span><span class='ignore'>{</span><span class='ignore'>0-15</span><span class='ignore'>}</span> <span class='exclcmd'>\\</span><br>
<span class='exclenv'>\begin</span><span class='exclenv'>{rightwordgroup}</span><span class='ignore'>{</span><span class='ignore'>0080</span> <span class='ignore'>R</span><span class='ignore'>}</span><br>
<span class='exclcmd'>\bitbox</span><span class='ignore'>{</span><span class='ignore'>8</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='exclcmd'>\color</span><span class='ignore'>{</span><span class='ignore'>lightgray</span><span class='ignore'>}</span><span class='exclcmd'>\rule</span><span class='ignore'>{</span><span class='exclcmd'>\width</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='exclcmd'>\height</span><span class='ignore'>}</span><span class='ignore'>}</span> <span class='ignore'>&amp;</span> <span class='exclcmd'>\bitbox</span><span class='ignore'>{</span><span class='ignore'>8</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='ignore'>CORE</span><span class='exclcmd'>\_</span><span class='ignore'>ID</span><span class='ignore'>}</span><br>
<span class='exclenv'>\end</span><span class='exclenv'>{rightwordgroup}</span><span class='exclcmd'>\\</span><br>
<span class='exclenv'>\begin</span><span class='exclenv'>{rightwordgroup}</span><span class='ignore'>{</span><span class='ignore'>0081</span> <span class='ignore'>R</span><span class='ignore'>}</span><br>
<span class='exclcmd'>\bitbox</span><span class='ignore'>{</span><span class='ignore'>8</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='exclcmd'>\color</span><span class='ignore'>{</span><span class='ignore'>lightgray</span><span class='ignore'>}</span><span class='exclcmd'>\rule</span><span class='ignore'>{</span><span class='exclcmd'>\width</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='exclcmd'>\height</span><span class='ignore'>}</span><span class='ignore'>}</span> <span class='ignore'>&amp;</span> <span class='exclcmd'>\bitbox</span><span class='ignore'>{</span><span class='ignore'>8</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='ignore'>NUM</span><span class='exclcmd'>\_</span><span class='ignore'>CORES</span><span class='ignore'>}</span><br>
<span class='exclenv'>\end</span><span class='exclenv'>{rightwordgroup}</span><span class='exclcmd'>\\</span><br>
<span class='exclenv'>\begin</span><span class='exclenv'>{rightwordgroup}</span><span class='ignore'>{</span><span class='ignore'>0082</span> <span class='ignore'>R</span><span class='ignore'>}</span><br>
<span class='exclcmd'>\bitbox</span><span class='ignore'>{</span><span class='ignore'>16</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='ignore'>SHARED</span><span class='exclcmd'>\_</span><span class='ignore'>MEMORY</span> <span class='ignore'>cells</span> <span class='exclcmd'>\tiny</span><span class='ignore'>(</span><span class='ignore'>default</span> <span class='ignore'>4096</span><span class='ignore'>)</span><span class='ignore'>}</span><br>
<span class='exclenv'>\end</span><span class='exclenv'>{rightwordgroup}</span><span class='exclcmd'>\\</span><br>
<span class='exclenv'>\begin</span><span class='exclenv'>{rightwordgroup}</span><span class='ignore'>{</span><span class='ignore'>0083</span> <span class='ignore'>R</span><span class='ignore'>}</span><br>
<span class='exclcmd'>\bitbox</span><span class='ignore'>{</span><span class='ignore'>8</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='exclcmd'>\color</span><span class='ignore'>{</span><span class='ignore'>lightgray</span><span class='ignore'>}</span><span class='exclcmd'>\rule</span><span class='ignore'>{</span><span class='exclcmd'>\width</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='exclcmd'>\height</span><span class='ignore'>}</span><span class='ignore'>}</span> <span class='ignore'>&amp;</span> <span class='exclcmd'>\bitbox</span><span class='ignore'>{</span><span class='ignore'>8</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='ignore'>NUM</span><span class='exclcmd'>\_</span><span class='ignore'>PERIPHERALS</span><span class='ignore'>}</span><br>
<span class='exclenv'>\end</span><span class='exclenv'>{rightwordgroup}</span><span class='exclcmd'>\\</span><br>
<span class='exclenv'>\begin</span><span class='exclenv'>{rightwordgroup}</span><span class='ignore'>{</span><span class='ignore'>0084</span> <span class='ignore'>RW</span><span class='ignore'>}</span><br>
<span class='exclcmd'>\bitbox</span><span class='ignore'>{</span><span class='ignore'>16</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='ignore'>SCRATCH</span><span class='exclcmd'>\_</span><span class='ignore'>MEMORY</span> <span class='ignore'>cells</span> <span class='exclcmd'>\tiny</span><span class='ignore'>(</span><span class='ignore'>default</span> <span class='ignore'>64</span><span class='ignore'>)</span><span class='ignore'>}</span><br>
<span class='exclenv'>\end</span><span class='exclenv'>{rightwordgroup}</span><span class='exclcmd'>\\</span><br>
<span class='exclenv'>\begin</span><span class='exclenv'>{rightwordgroup}</span><span class='ignore'>{</span><span class='ignore'>0085</span> <span class='ignore'>RW</span><span class='ignore'>}</span><br>
<span class='exclcmd'>\bitbox</span><span class='ignore'>{</span><span class='ignore'>16</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='ignore'>User</span> <span class='ignore'>defined</span><span class='ignore'>}</span><br>
<span class='exclenv'>\end</span><span class='exclenv'>{rightwordgroup}</span><span class='exclcmd'>\\</span><br>
<span class='exclcmd'>\bitbox</span><span class='option'>[]</span><span class='ignore'>{</span><span class='ignore'>16</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='exclmath'>$</span><span class='mathcmd'>\vdots</span><span class='exclmath'>$</span> <span class='exclcmd'>\\</span><span class='option'>[1ex]</span><span class='ignore'>}</span> <span class='exclcmd'>\\</span><br>
<span class='exclenv'>\begin</span><span class='exclenv'>{rightwordgroup}</span><span class='ignore'>{</span><span class='ignore'>008F</span> <span class='ignore'>RW</span><span class='ignore'>}</span><br>
<span class='exclcmd'>\bitbox</span><span class='ignore'>{</span><span class='ignore'>16</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='ignore'>User</span> <span class='ignore'>defined</span><span class='ignore'>}</span><br>
<span class='exclenv'>\end</span><span class='exclenv'>{rightwordgroup}</span><br>
<span class='exclenv'>\end</span><span class='exclenv'>{bytefield}</span><br>
<span class='cmd'>\caption</span><span class='ignore'>{</span><span class='oword'>Vmicro16</span> <span class='oword'>Special</span> <span class='oword'>Registers</span> <span class='oword'>layout</span> <span class='ignore'>(</span><span class='oword'>0x0080</span> <span class='ignore'>-</span> <span class='oword'>0x008F</span><span class='ignore'>)</span><span class='ignore'>.</span><span class='ignore'>}</span><br>
<span class='envir'>\end</span><span class='envir'>{figure}</span><br>
<br>
<span class='cmd'>\subsection</span><span class='ignore'>{</span><span class='hword'>Thread</span> <span class='hword'>Synchronisation</span><span class='ignore'>}</span><br>
<span class='word'>In</span> <span class='word'>multi-threaded</span> <span class='word'>software</span> <span class='word'>it</span> <span class='word'>is</span> <span class='word'>important</span> <br>
<br>
<span class='word'>The</span> <span class='word'>mutex</span> <span class='word'>functionality</span> <span class='word'>is</span> <span class='word'>implemented</span> <span class='word'>using</span> <span class='word'>a</span> <span class='word'>similar</span> <span class='word'>scheme</span> <span class='word'>to</span> <span class='word'>that</span> <span class='word'>of</span> <span class='word'>ARM's</span> <span class='cmd'>\textit</span><span class='ignore'>{</span><span class='word'>Global</span> <span class='word'>Monitor</span><span class='ignore'>}</span> <span class='cmd'>\cite</span><span class='ignore'>{</span><span class='ignore'>armgmonitor</span><span class='ignore'>}</span><span class='ignore'>.</span><br>
<br>
<span class='cmd'>\subsubsection</span><span class='ignore'>{</span><span class='hword'>Mutexes</span><span class='ignore'>}</span><br>
<span class='word'>In</span> <span class='word'>software</span><span class='ignore'>,</span> <span class='word'>a</span> <span class='word'>mutex</span> <span class='word'>is</span> <span class='word'>an</span> <span class='word'>object</span> <span class='word'>used</span> <span class='word'>to</span> <span class='word'>control</span> <span class='word'>access</span> <span class='word'>to</span> <span class='word'>a</span> <span class='word'>shared</span> <span class='word'>resource</span><span class='ignore'>.</span> <span class='word'>The</span> <span class='word'>term</span> <span class='cmd'>\textit</span><span class='ignore'>{</span><span class='word'>object</span><span class='ignore'>}</span> <span class='word'>is</span> <span class='word'>used</span> <span class='word'>as</span> <span class='word'>it's</span> <span class='word'>implementation</span> <span class='word'>is</span> <span class='word'>normally</span> <span class='word'>platform</span> <span class='word'>dependant</span><span class='ignore'>,</span> <span class='word'>meaning</span> <span class='word'>that</span> <span class='word'>the</span> <span class='word'>processor</span> <span class='word'>may</span> <span class='word'>provide</span> <span class='word'>a</span> <span class='word'>hardware</span> <span class='word'>mechanism</span> <span class='word'>or</span> <span class='word'>is</span> <span class='word'>left</span> <span class='word'>for</span> <span class='word'>the</span> <span class='word'>operating</span> <span class='word'>system</span> <span class='word'>to</span> <span class='word'>provide</span><span class='ignore'>.</span><br>
<br>
<span class='word'>In</span> <span class='word'>this</span> <span class='word'>project</span><span class='ignore'>,</span> <span class='word'>mutexes</span> <span class='word'>are</span> <span class='word'>provided</span> <span class='word'>by</span> <span class='word'>the</span> <span class='word'>processor</span> <span class='word'>through</span> <span class='word'>the</span> <span class='word'>Shared</span> <span class='word'>Memory</span> <span class='word'>Peripheral</span> <span class='ignore'>(</span><span class='word'>0x1000</span> <span class='word'>to</span> <span class='word'>0x1FFF</span><span class='ignore'>)</span> <span class='word'>which</span> <span class='word'>provides</span> <span class='word'>a</span> <span class='word'>large</span> <span class='word'>RAM-style</span> <span class='word'>memory</span> <span class='word'>accessible</span> <span class='word'>by</span> <span class='word'>all</span> <span class='word'>cores</span> <span class='word'>through</span> <span class='word'>the</span> <span class='word'>peripheral</span> <span class='word'>interconnect</span> <span class='word'>bus</span><span class='ignore'>.</span> <span class='word'>This</span> <span class='word'>large</span> <span class='word'>memory</span> <span class='word'>is</span> <span class='word'>explicitly</span> <span class='word'>defined</span> <span class='word'>to</span> <span class='word'>use</span> <span class='word'>the</span> <span class='word'>FPGA's</span> <span class='word'>BRAM</span> <span class='word'>blocks</span> <span class='word'>using</span> <span class='word'>Xilinx's</span> <span class='word'>Verilog</span> <span class='cmd'>\verb</span><span class='cmd'>|</span><span class='ignore'>ram_style="block"</span><span class='cmd'>|</span> <span class='word'>attribute</span> <span class='word'>to</span> <span class='word'>avoid</span> <span class='word'>wasting</span> <span class='word'>LUTs</span> <span class='word'>when</span> <span class='word'>using</span> <span class='word'>high</span> <span class='word'>core</span> <span class='word'>counts</span><span class='ignore'>.</span> <span class='word'>The</span> <span class='word'>peripheral</span> <span class='word'>allows</span> <span class='word'>each</span> <span class='word'>memory</span> <span class='word'>cell</span> <span class='word'>to</span> <span class='word'>be</span> <span class='cmd'>\textit</span><span class='ignore'>{</span><span class='word'>locked</span><span class='ignore'>}</span><span class='ignore'>,</span> <span class='word'>meaning</span> <span class='word'>that</span> <span class='word'>only</span> <span class='word'>the</span> <span class='word'>cell</span> <span class='word'>owner</span> <span class='word'>can</span> <span class='word'>modify</span> <span class='word'>it's</span> <span class='word'>contents</span><span class='ignore'>.</span> <span class='word'>This</span> <span class='word'>is</span> <span class='word'>implemented</span> <span class='word'>by</span> <span class='word'>using</span> <span class='word'>another</span> <span class='word'>large</span> <span class='word'>memory</span><span class='ignore'>,</span> <span class='cmd'>\verb</span><span class='cmd'>|</span><span class='ignore'>locks</span><span class='cmd'>|</span><span class='ignore'>,</span> <span class='word'>to</span> <span class='word'>store</span> <span class='word'>the</span> <span class='mathgroup'>$</span><span class='mathcmd'>\verb</span><span class='cmd'>|</span><span class='ignore'>CORE_ID</span><span class='cmd'>|</span> <span class='math'>+</span> <span class='math'>1</span><span class='mathgroup'>$</span> <span class='word'>of</span> <span class='word'>the</span> <span class='word'>owner</span><span class='ignore'>,</span> <span class='word'>as</span> <span class='word'>shown</span> <span class='word'>in</span> <span class='cmd'>\cref</span><span class='ignore'>{</span><span class='word'>fig</span><span class='ignore'>:</span><span class='word'>lock</span><span class='ignore'>}</span><span class='ignore'>.</span> <span class='word'>In</span> <span class='word'>this</span> <span class='word'>system</span><span class='ignore'>,</span> <span class='word'>a</span> <span class='word'>lock</span> <span class='word'>containing</span> <span class='word'>the</span> <span class='word'>value</span> <span class='word'>0</span> <span class='word'>indicates</span> <span class='word'>an</span> <span class='word'>unlocked</span> <span class='word'>cell</span><span class='ignore'>.</span> <span class='word'>As</span> <span class='cmd'>\verb</span><span class='cmd'>|</span><span class='ignore'>CORE_ID</span><span class='cmd'>|</span><span class='word'>s</span> <span class='word'>are</span> <span class='word'>indexed</span> <span class='word'>from</span> <span class='word'>zero</span><span class='ignore'>,</span> <span class='word'>1</span> <span class='word'>is</span> <span class='word'>arithmetically</span> <span class='word'>added</span> <span class='word'>to</span> <span class='word'>each</span> <span class='word'>cell</span><span class='ignore'>.</span> <span class='word'>For</span> <span class='word'>example</span><span class='ignore'>,</span> <span class='word'>if</span> <span class='word'>core</span> <span class='cmd'>\#</span><span class='word'>2</span> <span class='word'>wants</span> <span class='word'>to</span> <span class='word'>lock</span> <span class='word'>a</span> <span class='word'>memory</span> <span class='word'>cell</span><span class='ignore'>,</span> <span class='word'>the</span> <span class='word'>value</span> <span class='word'>3</span> <span class='word'>is</span> <span class='word'>written</span> <span class='word'>to</span> <span class='word'>the</span> <span class='word'>lock</span><span class='ignore'>.</span><br>
<br>
<span class='envir'>\begin</span><span class='envir'>{listing}</span><span class='option'>[h]</span><br>
<span class='cmd'>\centering</span><br>
<span class='envir'>\begin</span><span class='envir'>{minted}</span><span class='ignore'>{</span><span class='word'>verilog</span><span class='ignore'>}</span><br>
<span class='word'>reg</span> <span class='ignore'>[</span><span class='word'>15</span><span class='ignore'>:</span><span class='word'>0</span><span class='ignore'>]</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  <span class='word'>ram</span>&nbsp;  <span class='ignore'>[</span><span class='word'>0</span><span class='ignore'>:</span><span class='word'>8191</span><span class='ignore'>]</span><span class='ignore'>;</span> <span class='ignore'>/</span><span class='ignore'>/</span> <span class='word'>16KB</span> <span class='word'>large</span> <span class='word'>RAM</span> <span class='word'>memory</span><br>
<span class='word'>reg</span> <span class='ignore'>[</span><span class='word'>clog2</span><span class='ignore'>(</span><span class='word'>CORES</span><span class='ignore'>)</span><span class='ignore'>:</span><span class='word'>0</span><span class='ignore'>]</span> <span class='word'>locks</span> <span class='ignore'>[</span><span class='word'>0</span><span class='ignore'>:</span><span class='word'>8181</span><span class='ignore'>]</span><span class='ignore'>;</span> <span class='ignore'>/</span><span class='ignore'>/</span> <span class='word'>memory</span> <span class='word'>cell</span> <span class='word'>owner</span><br>
<span class='envir'>\end</span><span class='envir'>{minted}</span><br>
<span class='cmd'>\caption</span><span class='ignore'>{</span><span class='oword'>RAM</span> <span class='oword'>and</span> <span class='oword'>lock</span> <span class='oword'>memories</span> <span class='oword'>instantiated</span> <span class='oword'>by</span> <span class='oword'>the</span> <span class='oword'>shared</span> <span class='oword'>memory</span> <span class='oword'>peripheral</span><span class='ignore'>.</span><span class='ignore'>}</span><br>
<span class='cmd'>\label</span><span class='ignore'>{</span><span class='ignore'>fig</span><span class='ignore'>:</span><span class='ignore'>lock</span><span class='ignore'>}</span><br>
<span class='envir'>\end</span><span class='envir'>{listing}</span><br>
<br>
<span class='word'>To</span> <span class='word'>lock</span> <span class='word'>and</span> <span class='word'>unlock</span> <span class='word'>cells</span><span class='ignore'>,</span> <span class='word'>the</span> <span class='word'>instructions</span> <span class='cmd'>\verb</span><span class='cmd'>|</span><span class='ignore'>LWEX</span><span class='cmd'>|</span> <span class='word'>and</span> <span class='cmd'>\verb</span><span class='cmd'>|</span><span class='ignore'>SWEX</span><span class='cmd'>|</span> <span class='word'>instructions</span> <span class='word'>are</span> <span class='word'>used</span><span class='ignore'>.</span> <span class='word'>These</span> <span class='word'>instructions</span> <span class='word'>are</span> <span class='word'>similar</span> <span class='word'>to</span> <span class='word'>the</span> <span class='cmd'>\verb</span><span class='cmd'>|</span><span class='ignore'>LW/SW</span><span class='cmd'>|</span> <span class='word'>instructions</span> <span class='word'>but</span> <span class='word'>provide</span> <span class='word'>locking</span> <span class='word'>functionality</span><span class='ignore'>.</span> <span class='word'>The</span> <span class='cmd'>\textit</span><span class='ignore'>{</span><span class='word'>EX</span><span class='ignore'>}</span> <span class='word'>in</span> <span class='word'>the</span> <span class='word'>instruction</span> <span class='word'>names</span> <span class='word'>indicate</span> <span class='cmd'>\textit</span><span class='ignore'>{</span><span class='word'>exclusive</span> <span class='word'>access</span><span class='ignore'>}</span><span class='ignore'>.</span> <span class='cmd'>\verb</span><span class='cmd'>|</span><span class='ignore'>LWEX</span><span class='cmd'>|</span> <span class='word'>is</span> <span class='word'>used</span> <span class='word'>to</span> <span class='word'>read</span> <span class='word'>memory</span> <span class='word'>contents</span>&nbsp; <span class='ignore'>(</span><span class='word'>like</span> <span class='cmd'>\verb</span><span class='cmd'>|</span><span class='ignore'>LW</span><span class='cmd'>|</span><span class='ignore'>)</span> <span class='word'>and</span> <span class='word'>also</span> <span class='word'>lock</span> <span class='word'>the</span> <span class='word'>cell</span> <span class='word'>if</span> <span class='word'>not</span> <span class='word'>already</span> <span class='word'>locked</span><span class='ignore'>.</span> <span class='word'>If</span> <span class='word'>a</span> <span class='word'>core</span> <span class='word'>attempts</span> <span class='word'>to</span> <span class='word'>lock</span> <span class='word'>an</span> <span class='word'>already</span> <span class='word'>locked</span> <span class='word'>cell</span><span class='ignore'>,</span> <span class='word'>the</span> <span class='word'>lock</span> <span class='word'>does</span> <span class='word'>not</span> <span class='word'>change</span><span class='ignore'>.</span> <span class='word'>Unlocking</span> <span class='word'>is</span> <span class='word'>done</span> <span class='word'>by</span> <span class='word'>the</span> <span class='cmd'>\verb</span><span class='cmd'>|</span><span class='ignore'>SWEX</span><span class='cmd'>|</span> <span class='word'>instruction</span><span class='ignore'>,</span> <span class='word'>which</span> <span class='word'>conditionally</span> <span class='word'>writes</span> <span class='word'>to</span> <span class='word'>the</span> <span class='word'>memory</span> <span class='word'>cell</span> <span class='word'>if</span> <span class='word'>it</span> <span class='word'>is</span> <span class='word'>locked</span> <span class='word'>by</span> <span class='word'>the</span> <span class='word'>same</span> <span class='word'>core</span><span class='ignore'>.</span> <span class='word'>Unlike</span> <span class='cmd'>\verb</span><span class='cmd'>|</span><span class='ignore'>SW</span><span class='cmd'>|</span><span class='ignore'>,</span> <span class='cmd'>\verb</span><span class='cmd'>|</span><span class='ignore'>SWEX</span><span class='cmd'>|</span> <span class='word'>returns</span> <span class='word'>a</span> <span class='word'>zero</span> <span class='word'>for</span> <span class='word'>success</span> <span class='word'>and</span> <span class='word'>one</span> <span class='word'>for</span> <span class='word'>failure</span> <span class='word'>if</span> <span class='word'>it</span> <span class='word'>is</span> <span class='word'>locked</span> <span class='word'>by</span> <span class='word'>another</span> <span class='word'>core</span><span class='ignore'>.</span><br>
<br>
<span class='envir'>\begin</span><span class='envir'>{wrapfigure}</span><span class='ignore'>{</span><span class='ignore'>L</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='ignore'>0.5</span><span class='exclcmd'>\textwidth</span><span class='ignore'>}</span><br>
<span class='exclcmd'>\centering</span><br>
<span class='exclenv'>\begin</span><span class='exclenv'>{minted}</span><span class='ignore'>[</span><span class='ignore'>fontsize</span><span class='ignore'>=</span><span class='exclcmd'>\footnotesize</span><span class='ignore'>,</span><br>
&nbsp; &nbsp; <span class='ignore'>baselinestretch</span><span class='ignore'>=</span><span class='ignore'>0.8</span><span class='ignore'>,</span><span class='ignore'>]</span><span class='ignore'>{</span><span class='ignore'>arm</span><span class='ignore'>}</span><br>
<span class='ignore'>lock</span><span class='ignore'>_</span><span class='ignore'>mutex</span><span class='ignore'>:</span><br>
	<span class='ignore'>/</span><span class='ignore'>/</span> <span class='ignore'>attempt</span> <span class='ignore'>lock</span><br>
	<span class='ignore'>lwex</span> <span class='ignore'>r0</span><span class='ignore'>,</span> <span class='ignore'>r1</span><br>
	<span class='ignore'>/</span><span class='ignore'>/</span> <span class='ignore'>check</span> <span class='ignore'>success</span><br>
	<span class='ignore'>swex</span> <span class='ignore'>r0</span><span class='ignore'>,</span> <span class='ignore'>r1</span><br>
	<span class='ignore'>cmp</span>&nbsp; <span class='ignore'>r0</span><span class='ignore'>,</span> <span class='ignore'>r3</span><br>
	<span class='ignore'>/</span><span class='ignore'>/</span> <span class='ignore'>if</span> <span class='ignore'>not</span> <span class='ignore'>equal</span> <span class='ignore'>(</span><span class='ignore'>NE</span><span class='ignore'>)</span><span class='ignore'>,</span> <span class='ignore'>retry</span><br>
	<span class='ignore'>movi</span> <span class='ignore'>r4</span><span class='ignore'>,</span> <span class='ignore'>lock</span><span class='ignore'>_</span><span class='ignore'>mutex</span><br>
	<span class='ignore'>br</span>&nbsp;  <span class='ignore'>r4</span><span class='ignore'>,</span> <span class='ignore'>BR</span><span class='ignore'>_</span><span class='ignore'>NE</span><br>
<span class='ignore'>critical</span><span class='ignore'>:</span><br>
&nbsp; &nbsp; <span class='ignore'>/</span><span class='ignore'>/</span> <span class='ignore'>core</span> <span class='ignore'>has</span> <span class='ignore'>the</span> <span class='ignore'>mutex</span><br>
<span class='exclenv'>\end</span><span class='exclenv'>{minted}</span><br>
<span class='cmd'>\caption</span><span class='ignore'>{</span><span class='oword'>Assembly</span> <span class='oword'>code</span> <span class='oword'>for</span> <span class='oword'>locking</span> <span class='oword'>a</span> <span class='oword'>mutex</span><span class='ignore'>.</span> <span class='oword'>r1</span> <span class='oword'>is</span> <span class='oword'>the</span> <span class='oword'>address</span> <span class='oword'>to</span> <span class='oword'>lock</span><span class='ignore'>.</span> <span class='oword'>r3</span> <span class='oword'>is</span> <span class='oword'>zero</span><span class='ignore'>.</span> <span class='oword'>r4</span> <span class='oword'>is</span> <span class='oword'>the</span> <span class='oword'>branch</span> <span class='oword'>address</span><span class='ignore'>.</span><span class='ignore'>}</span><br>
<span class='exclcmd'>\label</span><span class='ignore'>{</span><span class='ignore'>fig</span><span class='ignore'>:</span><span class='ignore'>codemutex</span><span class='ignore'>}</span><br>
<span class='envir'>\end</span><span class='envir'>{wrapfigure}</span><br>
<br>
<span class='cmd'>\cref</span><span class='ignore'>{</span><span class='word'>fig</span><span class='ignore'>:</span><span class='word'>codemutex</span><span class='ignore'>}</span> <span class='word'>shows</span> <span class='word'>a</span> <span class='word'>simple</span> <span class='word'>assembly</span> <span class='word'>function</span> <span class='word'>to</span> <span class='word'>lock</span> <span class='word'>a</span> <span class='word'>memory</span> <span class='word'>cell</span><span class='ignore'>.</span><br>
<br>
<span class='cmd'>\if</span> <span class='word'>0</span><br>
<span class='envir'>\begin</span><span class='envir'>{figure}</span><span class='option'>[h]</span><br>
<span class='exclcmd'>\centering</span><br>
<span class='exclcmd'>\includegraphics</span><span class='option'>[width=\textwidth]</span><span class='ignore'>{</span><span class='ignore'>bram</span><span class='ignore'>_</span><span class='ignore'>ex</span><span class='ignore'>}</span><br>
<span class='cmd'>\caption</span><span class='ignore'>{</span><span class='oword'>Shared</span> <span class='oword'>Memory</span> <span class='oword'>Peripheral</span> <span class='oword'>schematic</span> <span class='oword'>showing</span> <span class='oword'>RAM</span> <span class='oword'>memory</span> <span class='oword'>and</span> <span class='oword'>lock</span> <span class='oword'>memories</span><span class='ignore'>.</span><span class='ignore'>}</span><br>
<span class='exclcmd'>\label</span><span class='ignore'>{</span><span class='ignore'>fig</span><span class='ignore'>:</span><span class='ignore'>bram</span><span class='ignore'>_</span><span class='ignore'>ex</span><span class='ignore'>}</span><br>
<span class='envir'>\end</span><span class='envir'>{figure}</span><br>
<span class='cmd'>\fi</span><br>
<br>
<br>
<span class='cmd'>\subsubsection</span><span class='ignore'>{</span><span class='hword'>Barriers</span><span class='ignore'>}</span><br>
<span class='word'>Barriers</span> <span class='word'>are</span> <span class='word'>a</span> <span class='word'>useful</span> <span class='word'>software</span> <span class='word'>sequence</span> <span class='word'>used</span> <span class='word'>to</span> <span class='word'>block</span> <span class='word'>execution</span> <span class='word'>until</span> <span class='word'>all</span> <span class='word'>other</span> <span class='word'>threads</span> <span class='ignore'>(</span><span class='word'>or</span> <span class='word'>a</span> <span class='word'>subset</span><span class='ignore'>)</span> <span class='word'>have</span> <span class='word'>reached</span> <span class='word'>the</span> <span class='word'>same</span> <span class='word'>point</span><span class='ignore'>.</span> <span class='word'>Barriers</span> <span class='word'>are</span> <span class='word'>often</span> <span class='word'>used</span> <span class='word'>for</span> <span class='word'>broadcast</span> <span class='word'>and</span> <span class='word'>gather</span> <span class='word'>actions</span> <span class='ignore'>(</span><span class='word'>sending</span> <span class='word'>values</span> <span class='word'>to</span> <span class='word'>each</span> <span class='word'>core</span> <span class='word'>or</span> <span class='word'>receiving</span> <span class='word'>them</span><span class='ignore'>)</span><span class='ignore'>.</span> <span class='word'>They</span> <span class='word'>are</span> <span class='word'>also</span> <span class='word'>used</span> <span class='word'>to</span> <span class='word'>synchronise</span> <span class='word'>program</span> <span class='word'>execution</span> <span class='word'>if</span> <span class='word'>some</span> <span class='word'>threads</span> <span class='word'>have</span> <span class='word'>more</span> <span class='word'>work</span> <span class='word'>to</span> <span class='word'>do</span> <span class='word'>than</span> <span class='word'>others</span><span class='ignore'>.</span><br>
<br>
<span class='envir'>\begin</span><span class='envir'>{listing}</span><span class='option'>[h]</span><br>
<span class='cmd'>\centering</span><br>
<span class='envir'>\begin</span><span class='envir'>{minted}</span><span class='ignore'>[</span><span class='word'>fontsize</span><span class='ignore'>=</span><span class='cmd'>\footnotesize</span><span class='ignore'>,</span><br>
&nbsp; &nbsp; <span class='word'>baselinestretch</span><span class='ignore'>=</span><span class='word'>0.8</span><span class='ignore'>,</span><span class='ignore'>]</span><span class='ignore'>{</span><span class='word'>arm</span><span class='ignore'>}</span><br>
<span class='word'>barrier</span><span class='ignore'>_</span><span class='word'>reached</span><span class='ignore'>:</span><br>
&nbsp; &nbsp; <span class='ignore'>/</span><span class='ignore'>/</span> <span class='word'>load</span> <span class='word'>latest</span> <span class='word'>count</span><br>
&nbsp; &nbsp; <span class='word'>lwex</span>&nbsp; &nbsp; <span class='word'>r0</span><span class='ignore'>,</span> <span class='word'>r5</span><br>
&nbsp; &nbsp; <span class='ignore'>/</span><span class='ignore'>/</span> <span class='word'>try</span> <span class='word'>increment</span> <span class='word'>count</span><br>
&nbsp; &nbsp; <span class='ignore'>/</span><span class='ignore'>/</span> <span class='word'>increment</span> <span class='word'>by</span> <span class='word'>1</span><br>
&nbsp; &nbsp; <span class='word'>addi</span>&nbsp; &nbsp; <span class='word'>r0</span><span class='ignore'>,</span> <span class='word'>r3</span> <span class='ignore'>+</span> <span class='ignore'>#</span><span class='word'>0x01</span><br>
&nbsp; &nbsp; <span class='ignore'>/</span><span class='ignore'>/</span> <span class='word'>attempt</span> <span class='word'>store</span><br>
&nbsp; &nbsp; <span class='word'>swex</span>&nbsp; &nbsp; <span class='word'>r0</span><span class='ignore'>,</span> <span class='word'>r5</span><br>
<br>
&nbsp; &nbsp; <span class='ignore'>/</span><span class='ignore'>/</span> <span class='word'>check</span> <span class='word'>success</span> <span class='ignore'>(</span><span class='ignore'>=</span><span class='ignore'>=</span> <span class='word'>0</span><span class='ignore'>)</span><br>
&nbsp; &nbsp; <span class='word'>cmp</span>&nbsp; &nbsp;  <span class='word'>r0</span><span class='ignore'>,</span> <span class='word'>r3</span><br>
&nbsp; &nbsp; <span class='ignore'>/</span><span class='ignore'>/</span> <span class='word'>branch</span> <span class='word'>if</span> <span class='word'>failed</span><br>
&nbsp; &nbsp; <span class='word'>movi</span>&nbsp; &nbsp; <span class='word'>r4</span><span class='ignore'>,</span> <span class='word'>barrier</span><span class='ignore'>_</span><span class='word'>reached</span><br>
&nbsp; &nbsp; <span class='word'>br</span>&nbsp; &nbsp; &nbsp; <span class='word'>r4</span><span class='ignore'>,</span> <span class='word'>BR</span><span class='ignore'>_</span><span class='word'>NE</span><br>
<br>
<span class='word'>barrier</span><span class='ignore'>_</span><span class='word'>wait</span><span class='ignore'>:</span><br>
&nbsp; &nbsp; <span class='ignore'>/</span><span class='ignore'>/</span> <span class='word'>load</span> <span class='word'>the</span> <span class='word'>count</span><br>
&nbsp; &nbsp; <span class='word'>lw</span>&nbsp; &nbsp; &nbsp; <span class='word'>r0</span><span class='ignore'>,</span> <span class='word'>r5</span><br>
&nbsp; &nbsp; <span class='ignore'>/</span><span class='ignore'>/</span> <span class='word'>compare</span> <span class='word'>with</span> <span class='word'>number</span> <span class='word'>of</span> <span class='word'>threads</span><br>
&nbsp; &nbsp; <span class='word'>cmp</span>&nbsp; &nbsp;  <span class='word'>r0</span><span class='ignore'>,</span> <span class='word'>r7</span><br>
&nbsp; &nbsp; <span class='ignore'>/</span><span class='ignore'>/</span> <span class='word'>jump</span> <span class='word'>back</span> <span class='word'>to</span> <span class='word'>barrier</span> <span class='word'>if</span> <span class='word'>not</span> <span class='word'>equal</span><br>
&nbsp; &nbsp; <span class='word'>movi</span>&nbsp; &nbsp; <span class='word'>r4</span><span class='ignore'>,</span> <span class='word'>barrier</span><span class='ignore'>_</span><span class='word'>wait</span><br>
&nbsp; &nbsp; <span class='word'>br</span>&nbsp; &nbsp; &nbsp; <span class='word'>r4</span><span class='ignore'>,</span> <span class='word'>BR</span><span class='ignore'>_</span><span class='word'>NE</span><br>
<span class='envir'>\end</span><span class='envir'>{minted}</span><br>
<span class='cmd'>\caption</span><span class='ignore'>{</span><span class='oword'>Assembly</span> <span class='oword'>code</span> <span class='oword'>for</span> <span class='oword'>a</span> <span class='oword'>memory</span> <span class='oword'>barrier</span><span class='ignore'>.</span> <span class='oword'>Threads</span> <span class='oword'>will</span> <span class='oword'>wait</span> <span class='oword'>in</span> <span class='oword'>the</span> <span class='oword'>barrier</span><span class='cmd'>\_</span><span class='oword'>wait</span> <span class='oword'>function</span> <span class='oword'>until</span> <span class='oword'>all</span> <span class='oword'>other</span> <span class='oword'>threads</span> <span class='oword'>have</span> <span class='oword'>reached</span> <span class='oword'>that</span> <span class='oword'>code</span> <span class='oword'>point</span><span class='ignore'>.</span><span class='ignore'>}</span><br>
<span class='cmd'>\label</span><span class='ignore'>{</span><span class='ignore'>fig</span><span class='ignore'>:</span><span class='ignore'>codebarrier</span><span class='ignore'>}</span><br>
<span class='envir'>\end</span><span class='envir'>{listing}</span><br>
<br>
<span class='word'>The</span> <span class='word'>Vmicro16</span> <span class='word'>processor</span> <span class='word'>provides</span> <span class='word'>barrier</span> <span class='word'>synchronisation</span> <span class='word'>through</span> <span class='word'>the</span> <span class='word'>Shared</span> <span class='word'>Memory</span> <span class='word'>Peripheral</span><span class='ignore'>.</span> <span class='word'>Like</span> <span class='word'>the</span> <span class='word'>mutex</span> <span class='word'>code</span><span class='ignore'>,</span> <span class='word'>the</span> <span class='word'>barrier</span> <span class='word'>code</span> <span class='word'>uses</span> <span class='word'>the</span> <span class='cmd'>\verb</span><span class='cmd'>|</span><span class='ignore'>LWEX</span><span class='cmd'>|</span> <span class='word'>and</span> <span class='cmd'>\verb</span><span class='cmd'>|</span><span class='ignore'>SWEX</span><span class='cmd'>|</span> <span class='word'>instructions</span> <span class='word'>to</span> <span class='word'>lock</span> <span class='word'>a</span> <span class='word'>memory</span> <span class='word'>cell</span><span class='ignore'>.</span> <span class='word'>Instead</span> <span class='word'>of</span> <span class='word'>immediately</span> <span class='word'>checking</span> <span class='word'>the</span> <span class='word'>lock</span> <span class='word'>as</span> <span class='word'>an</span> <span class='word'>abstract</span> <span class='word'>object</span><span class='ignore'>,</span> <span class='word'>the</span> <span class='word'>barrier</span> <span class='word'>code</span> <span class='word'>treats</span> <span class='word'>the</span> <span class='word'>cell</span> <span class='word'>as</span> <span class='word'>a</span> <span class='word'>normal</span> <span class='word'>memory</span> <span class='word'>cell</span> <span class='word'>containing</span> <span class='word'>a</span> <span class='word'>numeric</span> <span class='word'>value</span><span class='ignore'>.</span> <span class='cmd'>\cref</span><span class='ignore'>{</span><span class='word'>fig</span><span class='ignore'>:</span><span class='word'>codebarrier</span><span class='ignore'>}</span> <span class='word'>shows</span> <span class='word'>a</span> <span class='word'>software</span> <span class='word'>example</span> <span class='word'>of</span> <span class='word'>this</span><span class='ignore'>.</span> <span class='word'>When</span> <span class='word'>the</span> <span class='cmd'>\verb</span><span class='cmd'>|</span><span class='ignore'>barrier_reached</span><span class='cmd'>|</span> <span class='word'>code</span> <span class='word'>is</span> <span class='word'>reached</span><span class='ignore'>,</span> <span class='word'>the</span> <span class='word'>code</span> <span class='word'>will</span> <span class='word'>increment</span> <span class='word'>the</span> <span class='word'>shared</span> <span class='word'>memory</span> <span class='word'>value</span> <span class='word'>by</span> <span class='word'>1</span><span class='ignore'>,</span> <span class='word'>indicating</span> <span class='word'>that</span> <span class='word'>the</span> <span class='word'>number</span> <span class='word'>of</span> <span class='word'>threads</span> <span class='word'>that</span> <span class='word'>have</span> <span class='word'>reached</span> <span class='word'>this</span> <span class='word'>point</span> <span class='word'>has</span> <span class='word'>increased</span> <span class='word'>by</span> <span class='word'>one</span> <span class='ignore'>(</span><span class='word'>r5</span><span class='ignore'>)</span><span class='ignore'>.</span> <span class='word'>The</span> <span class='cmd'>\verb</span><span class='cmd'>|</span><span class='ignore'>barrier_wait</span><span class='cmd'>|</span> <span class='word'>function</span> <span class='word'>is</span> <span class='word'>then</span> <span class='word'>entered</span> <span class='word'>which</span> <span class='word'>waits</span> <span class='word'>until</span> <span class='word'>this</span> <span class='word'>numeric</span> <span class='word'>value</span> <span class='ignore'>(</span><span class='word'>r5</span><span class='ignore'>)</span> <span class='word'>is</span> <span class='word'>equal</span> <span class='word'>to</span> <span class='word'>the</span> <span class='word'>number</span> <span class='word'>of</span> <span class='word'>threads</span> <span class='ignore'>(</span><span class='word'>r7</span><span class='ignore'>)</span> <span class='word'>in</span> <span class='word'>the</span> <span class='word'>system</span><span class='ignore'>.</span> <span class='word'>If</span> <span class='word'>this</span> <span class='word'>is</span> <span class='word'>true</span><span class='ignore'>,</span> <span class='word'>then</span> <span class='word'>all</span> <span class='word'>threads</span> <span class='word'>have</span> <span class='word'>reached</span> <span class='word'>the</span> <span class='cmd'>\verb</span><span class='cmd'>|</span><span class='ignore'>barrier_wait</span><span class='cmd'>|</span> <span class='word'>function</span> <span class='word'>and</span> <span class='word'>can</span> <span class='word'>continue</span> <span class='word'>with</span> <span class='word'>normal</span> <span class='word'>program</span> <span class='word'>execution</span><span class='ignore'>.</span><br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
</p></div>
<div class='count'>
<ul class='count'>
<li class='header'>Included file: ./chapter_software.tex</li>
<li>Encoding: ascii</li>
<li>Words in text: 816</li>
<li>Words in headers: 11</li>
<li>Words outside text (captions, etc.): 87</li>
<li>Number of headers: 7</li>
<li>Number of floats/tables/figures: 4</li>
<li>Number of math inlines: 1</li>
<li>Number of math displayed: 0</li>
<li>Subcounts:</li>
<span class='subcount'>
<li class='fielddesc'>&nbsp; text+headers+captions (#headers/#floats/#inlines/#displayed)</li>
  <li>26+2+0 (1/0/0/0) Chapter: Multi-core Communication</li>
  <li>9+1+0 (1/0/0/0) Section: Introduction</li>
  <li>63+2+18 (1/1/0/0) Subsection: Design Goals</li>
  <li>114+2+6 (1/1/0/0) Subsection: Context Identification</li>
  <li>604+4+63 (3/2/1/0) Subsection: Thread Synchronisation</li>
</span>
</ul>
</div>
<h2>File: ./chapter_results.tex</h2>
<div class='parse'><p>
<span class='cmd'>\chapter</span><span class='ignore'>{</span><span class='hword'>Analysis</span> <span class='cmd'>\&amp;</span> <span class='hword'>Results</span><span class='ignore'>}</span><br>
<span class='cmd'>\startcontents</span><span class='option'>[chapters]</span><br>
<span class='cmd'>\printcontents</span><span class='option'>[chapters]</span><span class='ignore'>{</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='word'>1</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='ignore'>}</span><br>
<span class='cmd'>\noindent</span><span class='cmd'>\\</span><br>
<span class='word'>So</span> <span class='word'>far</span> <span class='word'>the</span> <span class='word'>system's</span> <span class='word'>design</span><span class='ignore'>,</span> <span class='word'>implementation</span><span class='ignore'>,</span> <span class='word'>and</span> <span class='word'>example</span> <span class='word'>usage</span><span class='ignore'>,</span> <span class='word'>has</span> <span class='word'>been</span> <span class='word'>presented</span> <span class='word'>and</span> <span class='word'>discussed</span><span class='ignore'>.</span><br>
<br>
<span class='cmd'>\section</span><span class='ignore'>{</span><span class='hword'>Introduction</span><span class='ignore'>}</span><br>
<span class='word'>This</span> <span class='word'>chapter</span> <span class='word'>presents</span> <span class='word'>analytic</span> <span class='word'>information</span><br>
<br>
<span class='cmd'>\section</span><span class='ignore'>{</span><span class='hword'>Implementation</span> <span class='hword'>Analysis</span><span class='ignore'>}</span><br>
<span class='word'>This</span> <span class='word'>section</span> <span class='word'>analysis</span> <span class='word'>the</span> <span class='word'>synthesised</span> <span class='word'>and</span> <span class='word'>implemented</span> <span class='word'>system-on-chip</span> <span class='word'>design</span> <span class='word'>to</span> <span class='word'>see</span> <span class='word'>the</span> <span class='word'>effect</span> <span class='word'>of</span> <span class='word'>increasing</span> <span class='word'>core</span> <span class='word'>counts</span><span class='ignore'>.</span><br>
<br>
<span class='cmd'>\subsection</span><span class='ignore'>{</span><span class='hword'>Design</span> <span class='hword'>Size</span><span class='ignore'>}</span><br>
<span class='cmd'>\subsubsection</span><span class='ignore'>{</span><span class='hword'>Implementation</span><span class='ignore'>}</span><br>
<span class='word'>On</span> <span class='word'>a</span> <span class='word'>minimal</span> <span class='word'>system-on-chip</span> <span class='word'>configuration</span><span class='ignore'>,</span> <span class='word'>with</span> <span class='word'>one</span> <span class='word'>core</span> <span class='word'>and</span> <span class='word'>minimal</span> <span class='word'>peripherals</span> <span class='word'>and</span> <span class='word'>features</span> <span class='ignore'>(</span><span class='word'>no</span> <span class='word'>reprogramming</span><span class='ignore'>,</span> <span class='word'>no</span> <span class='word'>interrupts</span><span class='ignore'>,</span> <span class='word'>no</span> <span class='word'>UART</span><span class='ignore'>)</span><span class='ignore'>,</span> <span class='word'>the</span> <span class='word'>design</span> <span class='word'>requires</span> <span class='word'>as</span> <span class='word'>few</span> <span class='word'>as</span> <span class='word'>700</span> <span class='word'>LUTs</span> <span class='word'>with</span> <span class='word'>the</span> <span class='word'>processor</span> <span class='word'>core</span> <span class='word'>requiring</span> <span class='word'>approximately</span> <span class='word'>300-400</span> <span class='word'>LUTs</span><span class='ignore'>.</span><br>
<br>
<span class='cmd'>\subsubsection</span><span class='ignore'>{</span><span class='hword'>Memory</span> <span class='hword'>Constraints</span><span class='ignore'>}</span><br>
<span class='word'>As</span> <span class='word'>discussed</span> <span class='word'>in</span> <span class='cmd'>\cref</span><span class='ignore'>{</span><span class='word'>sec</span><span class='ignore'>:</span><span class='word'>singlecore</span><span class='ignore'>}</span> <span class='cmd'>\nameref</span><span class='ignore'>{</span><span class='word'>sec</span><span class='ignore'>:</span><span class='word'>singlecore</span><span class='ignore'>}</span><span class='ignore'>,</span> <span class='word'>each</span> <span class='word'>processor</span> <span class='word'>core</span> <span class='word'>features</span> <span class='word'>two</span> <span class='word'>memories</span><span class='ignore'>:</span> <span class='word'>instruction</span> <span class='word'>and</span> <span class='word'>scratch</span> <span class='word'>memory</span><span class='ignore'>,</span> <span class='word'>which</span> <span class='word'>can</span> <span class='word'>both</span> <span class='word'>map</span> <span class='word'>onto</span> <span class='word'>synchronous</span><span class='ignore'>,</span> <span class='word'>single-port</span><span class='ignore'>,</span> <span class='word'>FPGA</span> <span class='word'>BRAM</span> <span class='word'>blocks</span><span class='ignore'>.</span> <span class='word'>While</span> <span class='word'>this</span> <span class='word'>will</span> <span class='word'>reduce</span> <span class='word'>LUT</span> <span class='word'>requirements</span> <span class='word'>in</span> <span class='word'>designs</span> <span class='word'>with</span> <span class='word'>few</span> <span class='word'>cores</span><span class='ignore'>,</span> <span class='word'>it</span> <span class='word'>becomes</span> <span class='word'>a</span> <span class='word'>non-trivial</span> <span class='word'>problem</span> <span class='word'>as</span> <span class='word'>the</span> <span class='word'>core</span> <span class='word'>counts</span> <span class='word'>increase</span><span class='ignore'>.</span> <span class='word'>FPGAs</span> <span class='word'>have</span> <span class='word'>a</span> <span class='word'>fixed</span> <span class='word'>number</span> <span class='word'>of</span> <span class='word'>hard-BRAM</span> <span class='word'>blocks</span> <span class='word'>available</span> <span class='word'>for</span> <span class='word'>inference</span> <span class='word'>by</span> <span class='word'>the</span> <span class='word'>HDL</span> <span class='word'>compiler</span><span class='ignore'>,</span> <span class='word'>for</span> <span class='word'>example</span> <span class='word'>the</span> <span class='word'>low-end</span> <span class='word'>Xilinx</span> <span class='word'>Spartan-6</span> <span class='word'>XC6SLX9</span> <span class='word'>FGPA</span> <span class='word'>features</span> <span class='word'>32</span> <span class='word'>18</span> <span class='word'>Kb</span> <span class='word'>BRAM</span> <span class='word'>blocks</span> <span class='cmd'>\cite</span><span class='optparm'>[</span><span class='word'>p</span><span class='ignore'>.</span><span class='ignore'>~</span><span class='word'>2</span><span class='optparm'>]</span><span class='ignore'>{</span><span class='ignore'>s6fam</span><span class='ignore'>}</span><span class='ignore'>,</span> <span class='word'>and</span> <span class='word'>the</span> <span class='word'>Cyclone</span> <span class='word'>V</span> <span class='word'>5CSEMA5F31C6N</span> <span class='ignore'>(</span><span class='word'>used</span> <span class='word'>in</span> <span class='word'>the</span> <span class='word'>DE1-SoC</span><span class='ignore'>)</span> <span class='word'>has</span> <span class='word'>397</span> <span class='word'>10</span> <span class='word'>Kb</span> <span class='word'>blocks</span> <span class='cmd'>\cite</span><span class='optparm'>[</span><span class='word'>p</span><span class='ignore'>.</span><span class='ignore'>~</span><span class='word'>22</span><span class='optparm'>]</span><span class='ignore'>{</span><span class='ignore'>cvfam</span><span class='ignore'>}</span><span class='ignore'>.</span><br>
<br>
<span class='envir'>\begin</span><span class='envir'>{figure}</span><span class='option'>[h]</span><br>
<span class='exclenv'>\begin</span><span class='exclenv'>{subfigure}</span><span class='ignore'>{</span><span class='ignore'>.</span><span class='ignore'>5</span><span class='exclcmd'>\textwidth</span><span class='ignore'>}</span><br>
&nbsp; <span class='exclcmd'>\centering</span><br>
&nbsp;<span class='exclcmd'>\includegraphics</span><span class='option'>[width=.7\linewidth]</span><span class='ignore'>{</span><span class='ignore'>bram</span><span class='ignore'>_</span><span class='ignore'>limit</span><span class='ignore'>}</span><br>
&nbsp; <span class='cmd'>\caption</span><span class='ignore'>{</span><span class='oword'>A</span> <span class='oword'>theoretical</span> <span class='oword'>FPGA</span> <span class='oword'>device</span> <span class='oword'>with</span> <span class='oword'>3</span> <span class='oword'>BRAM</span> <span class='oword'>blocks</span> <span class='oword'>running</span> <span class='oword'>a</span> <span class='oword'>4-core</span> <span class='oword'>design</span><span class='ignore'>.</span> <span class='oword'>Each</span> <span class='oword'>core</span> <span class='oword'>can</span> <span class='oword'>map</span> <span class='oword'>onto</span> <span class='oword'>a</span> <span class='oword'>BRAM</span> <span class='oword'>block</span><span class='ignore'>,</span> <span class='oword'>however</span> <span class='oword'>as</span> <span class='oword'>there</span> <span class='oword'>are</span> <span class='oword'>more</span> <span class='oword'>cores</span> <span class='oword'>than</span> <span class='oword'>BRAM</span> <span class='oword'>blocks</span> <span class='oword'>available</span><span class='ignore'>,</span> <span class='oword'>some</span> <span class='oword'>core</span> <span class='oword'>memories</span> <span class='oword'>will</span> <span class='oword'>be</span> <span class='oword'>implemented</span> <span class='oword'>as</span> <span class='oword'>distributed</span> <span class='oword'>RAM</span><span class='ignore'>,</span> <span class='oword'>or</span> <span class='oword'>in</span> <span class='oword'>the</span> <span class='oword'>worse</span> <span class='oword'>case</span> <span class='oword'>using</span> <span class='oword'>ALMs</span><span class='ignore'>.</span><span class='ignore'>}</span><br>
&nbsp;<span class='exclcmd'>\label</span><span class='ignore'>{</span><span class='ignore'>fig</span><span class='ignore'>:</span><span class='ignore'>bram</span><span class='ignore'>_</span><span class='ignore'>limita</span><span class='ignore'>}</span><br>
<span class='exclenv'>\end</span><span class='exclenv'>{subfigure}</span><span class='comment'>%</span><br>
<span class='exclenv'>\begin</span><span class='exclenv'>{subfigure}</span><span class='ignore'>{</span><span class='ignore'>.</span><span class='ignore'>5</span><span class='exclcmd'>\textwidth</span><span class='ignore'>}</span><br>
&nbsp; <span class='exclcmd'>\centering</span><br>
&nbsp;<span class='exclcmd'>\includegraphics</span><span class='option'>[width=1.2\linewidth]</span><span class='ignore'>{</span><span class='ignore'>sizes</span><span class='ignore'>_</span><span class='ignore'>regs</span><span class='ignore'>}</span><br>
&nbsp; <span class='cmd'>\caption</span><span class='ignore'>{</span><span class='oword'>DE1-SoC</span> <span class='ignore'>(</span><span class='oword'>Cyclone</span> <span class='oword'>V</span><span class='ignore'>)</span> <span class='oword'>resource</span> <span class='oword'>utilisation</span> <span class='oword'>with</span> <span class='oword'>various</span> <span class='oword'>core</span> <span class='oword'>counts</span><span class='ignore'>.</span><span class='ignore'>}</span><br>
&nbsp;<span class='exclcmd'>\label</span><span class='ignore'>{</span><span class='ignore'>fig</span><span class='ignore'>:</span><span class='ignore'>bram</span><span class='ignore'>_</span><span class='ignore'>limitb</span><span class='ignore'>}</span><br>
<span class='exclenv'>\end</span><span class='exclenv'>{subfigure}</span><br>
<span class='cmd'>\caption</span><span class='ignore'>{</span><span class='ignore'>}</span><br>
<span class='exclcmd'>\label</span><span class='ignore'>{</span><span class='ignore'>fig</span><span class='ignore'>:</span><span class='ignore'>bram</span><span class='ignore'>_</span><span class='ignore'>limit</span><span class='ignore'>}</span><br>
<span class='envir'>\end</span><span class='envir'>{figure}</span><br>
<br>
<span class='word'>As</span> <span class='word'>shown</span> <span class='word'>in</span> <span class='cmd'>\cref</span><span class='ignore'>{</span><span class='word'>fig</span><span class='ignore'>:</span><span class='word'>bram</span><span class='ignore'>_</span><span class='word'>limita</span><span class='ignore'>}</span><span class='ignore'>,</span> <span class='word'>as</span> <span class='word'>the</span> <span class='word'>number</span> <span class='word'>of</span> <span class='word'>processor</span> <span class='word'>cores</span> <span class='word'>increases</span><span class='ignore'>,</span> <span class='word'>they</span> <span class='word'>eventually</span> <span class='word'>outnumber</span> <span class='word'>the</span> <span class='word'>available</span> <span class='word'>BRAM</span> <span class='word'>blocks</span> <span class='word'>resulting</span> <span class='word'>in</span> <span class='word'>their</span> <span class='word'>memories</span> <span class='word'>being</span> <span class='word'>implemented</span> <span class='word'>in</span> <span class='word'>either</span> <span class='word'>distributed</span> <span class='word'>RAMs</span> <span class='word'>or</span> <span class='word'>ALMs</span><span class='ignore'>,</span> <span class='word'>both</span> <span class='word'>of</span> <span class='word'>which</span> <span class='word'>can</span> <span class='word'>consume</span> <span class='word'>significant</span> <span class='word'>logic</span> <span class='word'>resources</span> <span class='word'>of</span> <span class='word'>the</span> <span class='word'>FPGA</span> <span class='word'>which</span> <span class='word'>reduces</span> <span class='word'>the</span> <span class='word'>maximum</span> <span class='word'>possible</span> <span class='word'>core</span> <span class='word'>count</span><span class='ignore'>.</span><br>
<br>
<span class='word'>Figure</span> <span class='cmd'>\cref</span><span class='ignore'>{</span><span class='word'>fig</span><span class='ignore'>:</span><span class='word'>bram</span><span class='ignore'>_</span><span class='word'>limitb</span><span class='ignore'>}</span> <span class='word'>shows</span> <span class='word'>the</span> <span class='word'>FPGA</span> <span class='word'>resource</span> <span class='word'>requirements</span> <span class='word'>for</span> <span class='word'>the</span> <span class='word'>DE1-SoC</span> <span class='word'>board</span> <span class='word'>featuring</span> <span class='word'>the</span> <span class='word'>Cyclone</span> <span class='word'>V</span> <span class='word'>FPGA</span><span class='ignore'>.</span> <span class='word'>Approximately</span> <span class='word'>32</span> <span class='word'>cores</span> <span class='word'>can</span> <span class='word'>be</span> <span class='word'>instantiated</span> <span class='word'>before</span> <span class='word'>the</span> <span class='word'>all</span> <span class='word'>the</span> <span class='word'>available</span> <span class='word'>registers</span> <span class='word'>and</span> <span class='word'>ALMs</span> <span class='word'>are</span> <span class='word'>consumed</span><span class='ignore'>.</span><br>
<br>
<span class='cmd'>\subsubsection</span><span class='ignore'>{</span><span class='hword'>Reducing</span> <span class='hword'>Memory</span> <span class='hword'>Requirements</span><span class='ignore'>}</span><br>
<span class='cmd'>\label</span><span class='ignore'>{</span><span class='ignore'>sec</span><span class='ignore'>:</span><span class='ignore'>anal</span><span class='ignore'>_</span><span class='ignore'>memory</span><span class='ignore'>}</span><br>
<span class='word'>As</span> <span class='word'>shown</span> <span class='word'>in</span> <span class='cmd'>\cref</span><span class='ignore'>{</span><span class='word'>fig</span><span class='ignore'>:</span><span class='word'>bram</span><span class='ignore'>_</span><span class='word'>limita</span><span class='ignore'>}</span><span class='ignore'>,</span> <span class='word'>each</span> <span class='word'>core</span> <span class='word'>has</span> <span class='word'>it's</span> <span class='word'>own</span> <span class='word'>instruction</span> <span class='word'>read-only</span> <span class='word'>memory</span><span class='ignore'>.</span> <span class='word'>These</span> <span class='word'>memories</span> <span class='word'>have</span> <span class='word'>identical</span> <span class='word'>contents</span> <span class='word'>which</span> <span class='word'>presents</span> <span class='word'>an</span> <span class='word'>opportunity</span> <span class='word'>for</span> <span class='word'>optimisation</span><span class='ignore'>.</span> <span class='word'>In</span> <span class='word'>the</span> <span class='word'>proposed</span> <span class='word'>design</span> <span class='word'>in</span> <span class='cmd'>\cref</span><span class='ignore'>{</span><span class='word'>fig</span><span class='ignore'>:</span><span class='word'>bram</span><span class='ignore'>_</span><span class='word'>limit</span><span class='ignore'>_</span><span class='word'>sola</span><span class='ignore'>}</span><span class='ignore'>,</span> <span class='word'>this</span> <span class='word'>memory</span> <span class='word'>is</span> <span class='word'>removed</span> <span class='word'>from</span> <span class='word'>each</span> <span class='word'>core</span> <span class='word'>and</span> <span class='word'>is</span> <span class='word'>instead</span> <span class='word'>available</span> <span class='word'>through</span> <span class='word'>a</span> <span class='word'>dedicated</span> <span class='word'>shared</span> <span class='word'>bus</span><span class='ignore'>.</span> <span class='word'>This</span> <span class='word'>approach</span> <span class='word'>can</span> <span class='word'>be</span> <span class='word'>configured</span> <span class='word'>to</span> <span class='word'>be</span> <span class='word'>used</span> <span class='word'>in</span> <span class='word'>the</span> <span class='word'>Vmicro16</span> <span class='word'>SoC</span> <span class='word'>through</span> <span class='word'>the</span> <span class='cmd'>\verb</span><span class='cmd'>|</span><span class='ignore'>DEF_CORE_HAS_INSTR_MEM</span><span class='cmd'>|</span> <span class='word'>parameter</span> <span class='word'>in</span> <span class='cmd'>\verb</span><span class='cmd'>|</span><span class='ignore'>vmicro16_soc_config.v</span><span class='cmd'>|</span><span class='ignore'>,</span> <span class='word'>which</span> <span class='word'>enables</span> <span class='word'>the</span> <span class='cmd'>\textit</span><span class='ignore'>{</span><span class='word'>Instruction</span> <span class='word'>Memory</span> <span class='word'>Interconnect</span><span class='ignore'>}</span> <span class='word'>shown</span> <span class='word'>in</span> <span class='cmd'>\cref</span><span class='ignore'>{</span><span class='word'>fig</span><span class='ignore'>:</span><span class='word'>watchdog</span><span class='ignore'>}</span><span class='ignore'>.</span><br>
<br>
<span class='word'>As</span> <span class='word'>shown</span> <span class='word'>in</span> <span class='cmd'>\cref</span><span class='ignore'>{</span><span class='word'>fig</span><span class='ignore'>:</span><span class='word'>bram</span><span class='ignore'>_</span><span class='word'>limit</span><span class='ignore'>_</span><span class='word'>solb</span><span class='ignore'>}</span><span class='ignore'>,</span> <span class='word'>the</span> <span class='word'>resource</span> <span class='word'>requirements</span> <span class='word'>using</span> <span class='word'>this</span> <span class='word'>shared</span> <span class='word'>memory</span> <span class='word'>approach</span> <span class='word'>is</span> <span class='word'>significantly</span> <span class='word'>less</span> <span class='word'>than</span> <span class='word'>having</span> <span class='word'>an</span> <span class='word'>instruction</span> <span class='word'>memory</span> <span class='word'>per-core</span><span class='ignore'>.</span> <span class='word'>On</span> <span class='word'>the</span> <span class='word'>DE1-SoC</span><span class='ignore'>,</span> <span class='word'>64</span> <span class='word'>cores</span> <span class='word'>can</span> <span class='word'>now</span> <span class='word'>be</span> <span class='word'>instantiated</span> <span class='word'>with</span> <span class='word'>a</span> <span class='word'>few</span> <span class='word'>thousand</span> <span class='word'>regs</span> <span class='word'>and</span> <span class='word'>ALMs</span> <span class='word'>left</span> <span class='word'>for</span> <span class='word'>other</span> <span class='word'>logic</span><span class='ignore'>.</span><br>
<br>
<br>
<span class='envir'>\begin</span><span class='envir'>{figure}</span><span class='option'>[H]</span><br>
<span class='exclenv'>\begin</span><span class='exclenv'>{subfigure}</span><span class='ignore'>{</span><span class='ignore'>.</span><span class='ignore'>5</span><span class='exclcmd'>\textwidth</span><span class='ignore'>}</span><br>
&nbsp; <span class='exclcmd'>\centering</span><br>
&nbsp;<span class='exclcmd'>\includegraphics</span><span class='option'>[width=.7\linewidth]</span><span class='ignore'>{</span><span class='ignore'>bram</span><span class='ignore'>_</span><span class='ignore'>limit</span><span class='ignore'>_</span><span class='ignore'>sol</span><span class='ignore'>}</span><br>
&nbsp; <span class='cmd'>\caption</span><span class='ignore'>{</span><span class='oword'>A</span> <span class='oword'>multi-core</span> <span class='oword'>architecture</span> <span class='oword'>where</span> <span class='oword'>each</span> <span class='oword'>core</span> <span class='oword'>must</span> <span class='oword'>fetch</span> <span class='oword'>instructions</span> <span class='oword'>externally</span> <span class='oword'>from</span> <span class='oword'>a</span> <span class='oword'>global</span> <span class='oword'>memory</span><span class='ignore'>.</span><span class='ignore'>}</span><br>
&nbsp;<span class='exclcmd'>\label</span><span class='ignore'>{</span><span class='ignore'>fig</span><span class='ignore'>:</span><span class='ignore'>bram</span><span class='ignore'>_</span><span class='ignore'>limit</span><span class='ignore'>_</span><span class='ignore'>sola</span><span class='ignore'>}</span><br>
<span class='exclenv'>\end</span><span class='exclenv'>{subfigure}</span><span class='comment'>%</span><br>
<span class='exclenv'>\begin</span><span class='exclenv'>{subfigure}</span><span class='ignore'>{</span><span class='ignore'>.</span><span class='ignore'>5</span><span class='exclcmd'>\textwidth</span><span class='ignore'>}</span><br>
&nbsp; <span class='exclcmd'>\centering</span><br>
&nbsp;<span class='exclcmd'>\includegraphics</span><span class='option'>[width=1.2\linewidth]</span><span class='ignore'>{</span><span class='ignore'>sizes</span><span class='ignore'>_</span><span class='ignore'>regs</span><span class='ignore'>_</span><span class='ignore'>shared</span><span class='ignore'>}</span><br>
&nbsp; <span class='cmd'>\caption</span><span class='ignore'>{</span><span class='oword'>DE1-SoC</span> <span class='ignore'>(</span><span class='oword'>Cyclone</span> <span class='oword'>V</span><span class='ignore'>)</span> <span class='oword'>resource</span> <span class='oword'>utilisation</span> <span class='oword'>with</span> <span class='oword'>various</span> <span class='oword'>core</span> <span class='oword'>counts</span> <span class='oword'>using</span> <span class='oword'>shared</span> <span class='oword'>instruction</span> <span class='oword'>memory</span><span class='ignore'>.</span><span class='ignore'>}</span><br>
&nbsp;<span class='exclcmd'>\label</span><span class='ignore'>{</span><span class='ignore'>fig</span><span class='ignore'>:</span><span class='ignore'>bram</span><span class='ignore'>_</span><span class='ignore'>limit</span><span class='ignore'>_</span><span class='ignore'>solb</span><span class='ignore'>}</span><br>
<span class='exclenv'>\end</span><span class='exclenv'>{subfigure}</span><br>
<span class='cmd'>\caption</span><span class='ignore'>{</span><span class='ignore'>}</span><br>
<span class='exclcmd'>\label</span><span class='ignore'>{</span><span class='ignore'>fig</span><span class='ignore'>:</span><span class='ignore'>bram</span><span class='ignore'>_</span><span class='ignore'>limit</span><span class='ignore'>_</span><span class='ignore'>sol</span><span class='ignore'>}</span><br>
<span class='envir'>\end</span><span class='envir'>{figure}</span><br>
<br>
<span class='word'>Whilst</span> <span class='word'>this</span> <span class='word'>is</span> <span class='word'>a</span> <span class='word'>significant</span> <span class='word'>resource</span> <span class='word'>saving</span> <span class='word'>opportunity</span><span class='ignore'>,</span> <span class='word'>it</span> <span class='word'>does</span> <span class='word'>have</span> <span class='word'>significant</span> <span class='word'>drawbacks</span><span class='ignore'>.</span> <span class='word'>In</span> <span class='word'>the</span> <span class='word'>shared</span> <span class='word'>instruction</span> <span class='word'>memory</span> <span class='word'>approach</span><span class='ignore'>,</span> <span class='word'>each</span> <span class='word'>core</span> <span class='word'>must</span> <span class='word'>now</span> <span class='word'>fetch</span> <span class='word'>it's</span> <span class='word'>instruction</span> <span class='word'>from</span> <span class='word'>the</span> <span class='word'>instruction</span> <span class='word'>memory</span> <span class='word'>interconnect</span> <span class='word'>which</span> <span class='word'>is</span> <span class='word'>subject</span> <span class='word'>to</span> <span class='word'>the</span> <span class='word'>arbiter</span> <span class='word'>and</span> <span class='word'>it's</span> <span class='word'>scheduling</span> <span class='word'>algorithm</span><span class='ignore'>.</span> <span class='word'>The</span> <span class='word'>arbiter</span> <span class='word'>uses</span> <span class='word'>the</span> <span class='word'>same</span> <span class='word'>algorithm</span> <span class='word'>as</span> <span class='word'>the</span> <span class='word'>peripheral</span> <span class='word'>interconnect</span> <span class='word'>arbiter</span> <span class='word'>meaning</span> <span class='word'>that</span> <span class='word'>cores</span> <span class='word'>receive</span> <span class='word'>access</span> <span class='word'>incrementally</span><span class='ignore'>,</span> <span class='word'>and</span> <span class='word'>as</span> <span class='word'>discussed</span> <span class='word'>in</span> <span class='cmd'>\cref</span><span class='ignore'>{</span><span class='word'>sec</span><span class='ignore'>:</span><span class='word'>multimaster</span><span class='ignore'>}</span><span class='ignore'>,</span> <span class='word'>this</span> <span class='word'>results</span> <span class='word'>in</span> <span class='word'>significant</span> <span class='word'>delays</span> <span class='word'>in</span> <span class='word'>many-core</span> <span class='word'>designs</span><span class='ignore'>.</span> <span class='word'>This</span> <span class='word'>drawback</span> <span class='word'>is</span> <span class='word'>further</span> <span class='word'>explained</span> <span class='word'>in</span> <span class='cmd'>\cref</span><span class='ignore'>{</span><span class='word'>sec</span><span class='ignore'>:</span><span class='word'>result</span><span class='ignore'>_</span><span class='word'>results</span><span class='ignore'>}</span><span class='ignore'>.</span><br>
<br>
<br>
<br>
<span class='cmd'>\subsection</span><span class='ignore'>{</span><span class='hword'>Maximum</span> <span class='hword'>Frequency</span><span class='ignore'>}</span><br>
<span class='cmd'>\cref</span><span class='ignore'>{</span><span class='word'>fig</span><span class='ignore'>:</span><span class='word'>sizes</span><span class='ignore'>_</span><span class='word'>fmax</span><span class='ignore'>}</span> <span class='word'>below</span> <span class='word'>shows</span> <span class='word'>the</span> <span class='word'>maximum</span> <span class='word'>clock</span> <span class='word'>frequency</span> <span class='word'>for</span> <span class='word'>the</span> <span class='word'>design</span> <span class='ignore'>(</span><span class='word'>Fmax</span><span class='ignore'>)</span> <span class='word'>on</span> <span class='word'>the</span> <span class='word'>Cyclone</span> <span class='word'>V</span> <span class='word'>on</span> <span class='word'>the</span> <span class='word'>DE1-SoC</span><span class='ignore'>.</span> <span class='word'>As</span> <span class='word'>expected</span><span class='ignore'>,</span> <span class='word'>having</span> <span class='word'>more</span> <span class='word'>cores</span> <span class='word'>results</span> <span class='word'>in</span> <span class='word'>more</span> <span class='word'>logic</span> <span class='word'>and</span> <span class='word'>thus</span> <span class='word'>a</span> <span class='word'>longer</span>&nbsp; <span class='word'>propagation</span> <span class='word'>delays</span> <span class='word'>to</span> <span class='word'>each</span> <span class='word'>core</span><span class='ignore'>.</span> <span class='word'>System</span> <span class='word'>designers</span> <span class='word'>should</span> <span class='word'>consider</span> <span class='word'>the</span> <span class='word'>number</span> <span class='word'>of</span> <span class='word'>cores</span> <span class='word'>in</span> <span class='word'>their</span> <span class='word'>design</span> <span class='word'>as</span> <span class='word'>having</span> <span class='word'>fewer</span><span class='ignore'>,</span> <span class='word'>faster</span><span class='ignore'>,</span> <span class='word'>cores</span> <span class='word'>may</span> <span class='word'>outperform</span> <span class='word'>having</span> <span class='word'>more</span><span class='ignore'>,</span> <span class='word'>slower</span><span class='ignore'>,</span> <span class='word'>cores</span> <span class='word'>in</span> <span class='word'>some</span> <span class='word'>use-cases</span><span class='ignore'>.</span><br>
<br>
<span class='envir'>\begin</span><span class='envir'>{figure}</span><span class='option'>[h]</span><br>
<span class='exclcmd'>\centering</span><br>
<span class='exclcmd'>\includegraphics</span><span class='option'>[width=0.6\textwidth]</span><span class='ignore'>{</span><span class='ignore'>sizes</span><span class='ignore'>_</span><span class='ignore'>fmax</span><span class='ignore'>}</span><br>
<span class='cmd'>\caption</span><span class='ignore'>{</span><span class='oword'>Cyclone</span> <span class='oword'>V</span> <span class='oword'>maximum</span> <span class='oword'>design</span> <span class='oword'>frequency</span> <span class='oword'>for</span> <span class='oword'>various</span> <span class='oword'>core</span> <span class='oword'>count</span> <span class='oword'>configurations</span><span class='ignore'>.</span><span class='ignore'>}</span><br>
<span class='exclcmd'>\label</span><span class='ignore'>{</span><span class='ignore'>fig</span><span class='ignore'>:</span><span class='ignore'>sizes</span><span class='ignore'>_</span><span class='ignore'>fmax</span><span class='ignore'>}</span><br>
<span class='envir'>\end</span><span class='envir'>{figure}</span><br>
<br>
<span class='cmd'>\section</span><span class='ignore'>{</span><span class='hword'>Scenario</span> <span class='hword'>Performance</span><span class='ignore'>}</span><br>
<span class='word'>To</span> <span class='word'>evaluate</span> <span class='word'>the</span> <span class='word'>performance</span> <span class='word'>of</span> <span class='word'>the</span> <span class='word'>system-on-chip</span><span class='ignore'>,</span> <span class='word'>scenarios</span> <span class='word'>encompassing</span> <span class='word'>computational</span> <span class='word'>problems</span> <span class='word'>that</span> <span class='word'>are</span> <span class='word'>reflective</span> <span class='word'>of</span> <span class='word'>real-world</span> <span class='word'>applications</span> <span class='word'>are</span> <span class='word'>compiled</span> <span class='word'>and</span> <span class='word'>ran</span> <span class='word'>on</span> <span class='word'>the</span> <span class='word'>design</span><span class='ignore'>.</span><br>
<br>
<span class='cmd'>\subsection</span><span class='ignore'>{</span><span class='hword'>Scenario</span> <span class='hword'>Overview</span><span class='ignore'>}</span><br>
<span class='cmd'>\label</span><span class='ignore'>{</span><span class='ignore'>sec</span><span class='ignore'>:</span><span class='ignore'>scenario</span><span class='ignore'>}</span><br>
<span class='word'>The</span> <span class='word'>scenario</span> <span class='word'>is</span> <span class='word'>a</span> <span class='word'>software</span> <span class='word'>program</span> <span class='word'>that</span> <span class='word'>runs</span> <span class='word'>a</span> <span class='word'>parallel</span> <span class='word'>implementation</span> <span class='word'>of</span> <span class='word'>the</span> <span class='word'>summation</span> <span class='word'>function</span><span class='ignore'>,</span> <span class='word'>i.e</span><span class='ignore'>.</span> <span class='cmd'>\verb</span><span class='cmd'>|</span><span class='ignore'>sum [1..10]</span><span class='cmd'>|</span> <span class='word'>which</span> <span class='word'>returns</span> <span class='word'>55</span><span class='ignore'>.</span> <span class='word'>While</span> <span class='word'>this</span> <span class='word'>may</span> <span class='word'>seem</span> <span class='word'>too</span> <span class='word'>simple</span> <span class='word'>at</span> <span class='word'>first</span> <span class='word'>to</span> <span class='word'>measure</span> <span class='word'>performance</span> <span class='word'>of</span> <span class='word'>a</span> <span class='word'>multi-core</span> <span class='word'>system-on-chip</span><span class='ignore'>,</span> <span class='word'>the</span> <span class='word'>function</span> <span class='word'>is</span> <span class='word'>actually</span> <span class='word'>quite</span> <span class='word'>appropriate</span> <span class='word'>as</span> <span class='word'>it</span> <span class='word'>encompasses</span> <span class='word'>various</span> <span class='word'>parallel</span> <span class='word'>problems</span><span class='ignore'>,</span> <span class='word'>such</span> <span class='word'>as</span><span class='ignore'>:</span> <span class='word'>a</span> <span class='word'>fixed</span> <span class='word'>time</span><span class='ignore'>/</span><span class='word'>size</span> <span class='word'>serial</span> <span class='word'>part</span><span class='ignore'>;</span> <span class='word'>broadcasting</span> <span class='word'>of</span> <span class='word'>the</span> <span class='word'>data</span> <span class='word'>set</span> <span class='ignore'>(</span><span class='word'>in</span> <span class='word'>this</span> <span class='word'>case</span> <span class='word'>the</span> <span class='word'>range</span> <span class='word'>of</span> <span class='word'>the</span> <span class='word'>summation</span><span class='ignore'>)</span><span class='ignore'>;</span> <span class='word'>thread</span> <span class='word'>synchronisation</span> <span class='ignore'>(</span><span class='word'>to</span> <span class='word'>know</span> <span class='word'>when</span> <span class='word'>the</span> <span class='word'>data</span> <span class='word'>is</span> <span class='word'>ready</span> <span class='word'>and</span> <span class='word'>to</span> <span class='word'>schedule</span> <span class='word'>gathering</span> <span class='word'>of</span> <span class='word'>intermediary</span> <span class='word'>results</span><span class='ignore'>)</span><span class='ignore'>;</span> <span class='word'>and</span> <span class='word'>is</span> <span class='word'>highly</span> <span class='word'>scalable</span><span class='ignore'>.</span><br>
<span class='cmd'>\\</span><span class='cmd'>\\</span><br>
<span class='word'>The</span> <span class='word'>summation</span> <span class='word'>task</span> <span class='word'>flow</span> <span class='word'>is</span> <span class='word'>as</span> <span class='word'>follows</span><span class='ignore'>:</span><br>
<span class='envir'>\begin</span><span class='envir'>{enumerate}</span><br>
<span class='cmd'>\item</span> <span class='word'>Root</span> <span class='ignore'>(</span><span class='word'>core</span> <span class='cmd'>\#</span><span class='word'>0</span><span class='ignore'>)</span> <span class='word'>broadcasts</span> <span class='word'>the</span> <span class='word'>range</span> <span class='word'>of</span> <span class='word'>the</span> <span class='word'>summation</span> <span class='ignore'>(</span><span class='word'>i.e</span><span class='ignore'>.</span> <span class='word'>sum</span> <span class='word'>1</span> <span class='word'>to</span> <span class='word'>10</span><span class='ignore'>)</span> <span class='word'>to</span> <span class='word'>all</span> <span class='word'>cores</span> <span class='word'>via</span> <span class='word'>the</span> <span class='word'>global</span> <span class='word'>shared</span> <span class='word'>memory</span><span class='ignore'>.</span><br>
<span class='cmd'>\item</span> <span class='word'>Non-root</span> <span class='word'>cores</span> <span class='word'>wait</span> <span class='word'>for</span> <span class='word'>this</span> <span class='word'>broadcast</span> <span class='word'>to</span> <span class='word'>finish</span> <span class='ignore'>(</span><span class='word'>memory</span> <span class='word'>barrier</span><span class='ignore'>)</span><span class='ignore'>,</span> <span class='word'>then</span> <span class='word'>calculate</span> <span class='word'>their</span> <span class='word'>own</span> <span class='word'>subset</span> <span class='word'>of</span> <span class='word'>the</span> <span class='word'>range</span> <span class='word'>to</span> <span class='word'>sum</span><span class='ignore'>.</span> <span class='word'>For</span> <span class='word'>example</span><span class='ignore'>,</span> <span class='word'>if</span> <span class='word'>Root</span> <span class='word'>broadcasts</span> <span class='word'>that</span> <span class='word'>there</span> <span class='word'>are</span> <span class='word'>240</span> <span class='word'>samples</span> <span class='word'>and</span> <span class='word'>10</span> <span class='word'>cores</span> <span class='word'>in</span> <span class='word'>the</span> <span class='word'>system</span><span class='ignore'>,</span> <span class='word'>each</span> <span class='word'>core</span> <span class='word'>calculates</span> <span class='word'>the</span> <span class='word'>subset</span> <span class='word'>size</span><span class='ignore'>:</span><br>
<br>
<span class='envir'>\begin</span><span class='envir'>{equation}</span><br>
<span class='math'>240</span><span class='math'>/</span><span class='math'>10</span> <span class='math'>=</span> <span class='math'>24</span><br>
<span class='envir'>\end</span><span class='envir'>{equation}</span><span class='word'>calculations</span> <span class='word'>starting</span> <span class='word'>from</span><span class='ignore'>:</span><br>
<span class='envir'>\begin</span><span class='envir'>{equation}</span><br>
<span class='ignore'>{</span><span class='math'>ID</span><span class='math'>_</span><span class='ignore'>{</span><span class='math'>CORE</span><span class='ignore'>}</span><span class='ignore'>}</span> <span class='math'>*</span> <span class='math'>24</span><br>
<span class='envir'>\end</span><span class='envir'>{equation}</span><br>
<span class='word'>For</span> <span class='word'>example</span><span class='ignore'>,</span> <span class='word'>Core</span> <span class='cmd'>\#</span><span class='word'>5</span> <span class='word'>will</span> <span class='word'>start</span> <span class='word'>its</span> <span class='word'>24</span> <span class='word'>sample</span> <span class='word'>subset</span> <span class='word'>summation</span> <span class='word'>from</span><br>
<span class='envir'>\begin</span><span class='envir'>{equation}</span><br>
<span class='math'>5</span> <span class='math'>*</span> <span class='math'>24</span> <span class='math'>=</span> <span class='math'>120</span><br>
<span class='envir'>\end</span><span class='envir'>{equation}</span><br>
<span class='word'>effectively</span> <span class='word'>performing</span> <span class='cmd'>\verb</span><span class='cmd'>|</span><span class='ignore'>sum [120..123]</span><span class='cmd'>|</span><span class='ignore'>.</span><br>
<br>
<span class='cmd'>\item</span> <span class='word'>All</span> <span class='word'>cores</span> <span class='word'>perform</span> <span class='word'>an</span> <span class='word'>intermediary</span> <span class='word'>summation</span> <span class='word'>over</span> <span class='word'>their</span> <span class='word'>subset</span> <span class='word'>of</span> <span class='word'>the</span> <span class='word'>range</span> <span class='ignore'>(</span><span class='word'>serial</span> <span class='word'>part</span><span class='ignore'>)</span><span class='ignore'>.</span><br>
<span class='cmd'>\item</span> <span class='word'>All</span> <span class='word'>cores</span> <span class='word'>attempt</span> <span class='word'>to</span> <span class='word'>add</span> <span class='word'>their</span> <span class='word'>intermediary</span> <span class='word'>result</span> <span class='word'>to</span> <span class='word'>a</span> <span class='word'>global</span> <span class='word'>sum</span> <span class='word'>value</span> <span class='word'>in</span> <span class='word'>global</span> <span class='word'>shared</span> <span class='word'>memory</span> <span class='ignore'>(</span><span class='word'>mutex</span><span class='ignore'>)</span><span class='ignore'>.</span><br>
<span class='cmd'>\item</span> <span class='word'>All</span> <span class='word'>cores</span> <span class='word'>halt</span><span class='ignore'>,</span> <span class='word'>signalling</span> <span class='word'>that</span> <span class='word'>their</span> <span class='word'>work</span> <span class='word'>has</span> <span class='word'>been</span> <span class='word'>committed</span> <span class='word'>to</span> <span class='word'>the</span> <span class='word'>global</span> <span class='word'>shared</span> <span class='word'>memory</span> <span class='word'>and</span> <span class='word'>have</span> <span class='word'>finished</span> <span class='word'>the</span> <span class='word'>program</span><span class='ignore'>.</span><br>
<span class='envir'>\end</span><span class='envir'>{enumerate}</span><br>
<br>
<span class='word'>This</span> <span class='word'>program</span> <span class='word'>is</span> <span class='word'>written</span> <span class='word'>in</span> <span class='word'>assembly</span> <span class='word'>in</span> <span class='word'>the</span> <span class='word'>file</span> <span class='cmd'>\verb</span><span class='cmd'>|</span><span class='ignore'>sw/demos/asm/sum64.s</span><span class='cmd'>|</span> <span class='word'>and</span> <span class='word'>can</span> <span class='word'>be</span> <span class='word'>compiled</span> <span class='word'>using</span> <span class='word'>the</span> <span class='word'>assembly</span> <span class='word'>compiler</span> <span class='ignore'>(</span><span class='word'>developed</span> <span class='word'>for</span> <span class='word'>deliverable</span> <span class='cmd'>\ref</span><span class='ignore'>{</span><span class='ignore'>ed</span><span class='ignore'>:</span><span class='ignore'>compiler</span><span class='ignore'>}</span><span class='ignore'>)</span> <span class='word'>using</span> <span class='word'>the</span> <span class='word'>command</span> <span class='word'>below</span><span class='ignore'>.</span> <span class='word'>The</span> <span class='word'>assembly</span> <span class='word'>compiler</span> <span class='word'>outputs</span> <span class='word'>the</span> <span class='word'>file</span> <span class='cmd'>\verb</span><span class='cmd'>|</span><span class='ignore'>asm.s.hex</span><span class='cmd'>|</span> <span class='word'>containing</span> <span class='word'>hex</span> <span class='word'>instruction</span> <span class='word'>words</span> <span class='word'>for</span> <span class='word'>use</span> <span class='word'>in</span> <span class='word'>Verilog's</span> <span class='cmd'>\verb</span><span class='cmd'>|</span><span class='ignore'>$readmemh</span><span class='cmd'>|</span> <span class='word'>function</span><span class='ignore'>.</span> <span class='word'>This</span> <span class='word'>data</span> <span class='word'>is</span> <span class='word'>used</span> <span class='word'>for</span> <span class='word'>each</span> <span class='word'>core's</span> <span class='word'>instruction</span> <span class='word'>memory</span><span class='ignore'>.</span> <span class='word'>The</span> <span class='word'>assembly</span> <span class='word'>program</span> <span class='word'>is</span> <span class='word'>also</span> <span class='word'>shown</span> <span class='word'>in</span> <span class='cmd'>\cref</span><span class='ignore'>{</span><span class='word'>sec</span><span class='ignore'>:</span><span class='word'>64coresum</span><span class='ignore'>}</span><span class='ignore'>.</span><br>
<span class='cmd'>\\</span><br>
<span class='cmd'>\mintinline</span><span class='ignore'>{</span><span class='word'>bash</span><span class='ignore'>}</span><span class='ignore'>{</span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class='word'>python</span> <span class='word'>sw</span><span class='ignore'>/</span><span class='word'>asm.py</span> <span class='word'>sw</span><span class='ignore'>/</span><span class='word'>demos</span><span class='ignore'>/</span><span class='word'>asm</span><span class='ignore'>/</span><span class='word'>sum64.s</span><span class='ignore'>}</span><br>
<br>
<span class='cmd'>\subsection</span><span class='ignore'>{</span><span class='hword'>Performance</span> <span class='hword'>Measurements</span><span class='ignore'>}</span><br>
<span class='word'>Behavioural</span> <span class='word'>simulation</span> <span class='word'>is</span> <span class='word'>used</span> <span class='word'>to</span> <span class='word'>measure</span> <span class='word'>the</span> <span class='word'>following</span> <span class='word'>metrics</span> <span class='word'>to</span> <span class='word'>estimate</span> <span class='word'>general</span> <span class='word'>performance</span> <span class='word'>of</span> <span class='word'>the</span> <span class='word'>system-on-chip</span><span class='ignore'>:</span><br>
<span class='envir'>\begin</span><span class='envir'>{itemize}</span><br>
<span class='cmd'>\item</span> <span class='word'>Total</span> <span class='word'>program</span> <span class='word'>run-time</span><span class='ignore'>.</span><span class='cmd'>\\</span><span class='word'>This</span> <span class='word'>is</span> <span class='word'>the</span> <span class='word'>time</span> <span class='word'>from</span> <span class='word'>when</span> <span class='word'>the</span> <span class='word'>reset</span> <span class='word'>signal</span> <span class='word'>is</span> <span class='word'>de-asserted</span> <span class='word'>to</span> <span class='word'>when</span> <span class='word'>all</span> <span class='word'>cores</span> <span class='word'>have</span> <span class='word'>halted</span><span class='ignore'>.</span> <span class='word'>Each</span> <span class='word'>core</span> <span class='word'>has</span> <span class='word'>an</span> <span class='word'>output</span> <span class='cmd'>\verb</span><span class='cmd'>|</span><span class='ignore'>halt</span><span class='cmd'>|</span> <span class='word'>signal</span> <span class='word'>which</span> <span class='word'>the</span> <span class='word'>SoC</span> <span class='word'>can</span> <span class='word'>use</span> <span class='word'>to</span> <span class='word'>determine</span> <span class='word'>if</span> <span class='word'>all</span> <span class='word'>cores</span> <span class='word'>have</span> <span class='word'>halted</span> <span class='word'>using</span> <span class='cmd'>\verb</span><span class='cmd'>|</span><span class='ignore'>wire all_halted = &amp;core_halts;</span><span class='cmd'>|</span><span class='ignore'>.</span> <br>
<br>
<span class='cmd'>\item</span> <span class='word'>Time</span> <span class='word'>spent</span> <span class='word'>on</span> <span class='word'>the</span> <span class='word'>serial</span> <span class='word'>part</span><span class='ignore'>.</span><span class='cmd'>\\</span><span class='word'>The</span> <span class='word'>serial</span> <span class='word'>part</span> <span class='word'>of</span> <span class='word'>this</span> <span class='word'>scenario</span> <span class='word'>consists</span> <span class='word'>of</span> <span class='word'>the</span> <span class='word'>intermediary</span> <span class='word'>summation</span> <span class='word'>of</span> <span class='word'>it's</span> <span class='word'>subset</span> <span class='word'>range</span><span class='ignore'>.</span> <span class='word'>As</span> <span class='word'>each</span> <span class='word'>core</span> <span class='word'>is</span> <span class='word'>performing</span> <span class='word'>this</span> <span class='word'>task</span><span class='ignore'>,</span> <span class='word'>the</span> <span class='word'>average</span> <span class='word'>will</span> <span class='word'>be</span> <span class='word'>used</span><span class='ignore'>.</span><br>
<br>
<span class='cmd'>\item</span> <span class='word'>Time</span> <span class='word'>spent</span> <span class='word'>on</span> <span class='word'>communication</span><span class='ignore'>.</span><span class='cmd'>\\</span><span class='word'>This</span> <span class='word'>includes</span> <span class='word'>time</span> <span class='word'>spent</span> <span class='word'>on</span> <span class='word'>thread</span> <span class='word'>synchronisation</span><span class='ignore'>,</span> <span class='word'>i.e</span><span class='ignore'>.</span> <span class='word'>waiting</span> <span class='word'>for</span> <span class='word'>the</span> <span class='word'>global</span> <span class='word'>memory</span> <span class='word'>to</span> <span class='word'>become</span> <span class='word'>available</span> <span class='word'>and</span> <span class='word'>waiting</span> <span class='word'>on</span> <span class='word'>the</span> <span class='word'>root</span> <span class='word'>to</span> <span class='word'>finish</span> <span class='word'>broadcast</span><span class='ignore'>.</span> <span class='word'>Again</span><span class='ignore'>,</span> <span class='word'>the</span> <span class='word'>average</span> <span class='word'>time</span> <span class='word'>will</span> <span class='word'>be</span> <span class='word'>used</span><span class='ignore'>.</span><br>
<br>
<span class='cmd'>\item</span> <span class='word'>Time</span> <span class='word'>spent</span> <span class='word'>fetching</span> <span class='word'>instructions</span><span class='ignore'>.</span><span class='cmd'>\\</span><span class='word'>Instruction</span> <span class='word'>fetches</span> <span class='word'>occur</span> <span class='word'>during</span> <span class='word'>stage</span> <span class='cmd'>\verb</span><span class='cmd'>|</span><span class='ignore'>STAGE_IF</span><span class='cmd'>|</span> <span class='word'>of</span> <span class='word'>the</span> <span class='word'>pipeline</span><span class='ignore'>.</span> <span class='word'>The</span> <span class='word'>behavioural</span> <span class='word'>test</span> <span class='word'>bench</span> <span class='word'>will</span> <span class='word'>record</span> <span class='word'>the</span> <span class='word'>number</span> <span class='word'>of</span> <span class='word'>clock</span> <span class='word'>cycles</span> <span class='word'>each</span> <span class='word'>core</span> <span class='word'>spends</span> <span class='word'>in</span> <span class='word'>this</span> <span class='word'>state</span><span class='ignore'>,</span> <span class='word'>then</span> <span class='word'>calculate</span> <span class='word'>the</span> <span class='word'>average</span> <span class='word'>time</span> <span class='word'>spent</span> <span class='word'>fetching</span> <span class='word'>instructions</span><span class='ignore'>.</span> <br>
<span class='envir'>\end</span><span class='envir'>{itemize}</span><br>
<br>
<span class='word'>These</span> <span class='word'>measurements</span> <span class='word'>are</span> <span class='word'>recorded</span> <span class='word'>using</span> <span class='word'>non-synthesisable</span> <span class='word'>Verilog</span> <span class='word'>code</span> <span class='word'>in</span> <span class='word'>both</span> <span class='word'>the</span> <span class='word'>testbench</span> <span class='word'>and</span> <span class='word'>module</span> <span class='word'>code</span> <span class='ignore'>(</span><span class='cmd'>\verb</span><span class='cmd'>|</span><span class='ignore'>vmicro16_soc.v</span><span class='cmd'>|</span><span class='ignore'>)</span><span class='ignore'>.</span><br>
<br>
<span class='cmd'>\subsection</span><span class='ignore'>{</span><span class='hword'>Performance</span> <span class='hword'>Results</span><span class='ignore'>}</span><br>
<span class='cmd'>\label</span><span class='ignore'>{</span><span class='ignore'>sec</span><span class='ignore'>:</span><span class='ignore'>result</span><span class='ignore'>_</span><span class='ignore'>results</span><span class='ignore'>}</span><br>
<span class='word'>The</span> <span class='word'>scenario</span> <span class='word'>program</span> <span class='word'>was</span> <span class='word'>simulated</span> <span class='word'>on</span> <span class='word'>system</span> <span class='word'>configuration</span> <span class='word'>with</span> <span class='word'>1</span> <span class='word'>to</span> <span class='word'>30</span> <span class='word'>cores</span> <span class='word'>with</span> <span class='word'>a</span> <span class='word'>50</span> <span class='word'>MHz</span> <span class='word'>clock</span><span class='ignore'>.</span><br>
<span class='cmd'>\cref</span><span class='ignore'>{</span><span class='word'>fig</span><span class='ignore'>:</span><span class='word'>alg</span><span class='ignore'>_</span><span class='word'>time</span><span class='ignore'>}</span> <span class='word'>shows</span> <span class='word'>the</span> <span class='word'>time</span> <span class='word'>breakdown</span> <span class='word'>of</span> <span class='word'>the</span> <span class='word'>multi-core</span> <span class='word'>system-on-chip</span> <span class='word'>running</span> <span class='word'>the</span> <span class='word'>scenario</span> <span class='word'>problem</span> <span class='word'>with</span> <span class='word'>various</span> <span class='word'>core</span> <span class='word'>counts</span><span class='ignore'>.</span> <span class='word'>In</span> <span class='word'>these</span> <span class='word'>measurements</span> <span class='word'>all</span> <span class='word'>cores</span> <span class='word'>feature</span> <span class='word'>a</span> <span class='word'>small</span> <span class='word'>instruction</span> <span class='word'>memory</span> <span class='word'>which</span> <span class='word'>is</span> <span class='word'>accessed</span> <span class='word'>in</span> <span class='word'>constant</span> <span class='word'>time</span> <span class='ignore'>(</span><span class='word'>one</span> <span class='word'>clock</span><span class='ignore'>)</span><span class='ignore'>,</span> <span class='word'>and</span> <span class='word'>so</span> <span class='word'>this</span> <span class='word'>fetch</span> <span class='word'>time</span> <span class='word'>is</span> <span class='word'>not</span> <span class='word'>shown</span> <span class='word'>in</span> <span class='word'>the</span> <span class='word'>chart</span><span class='ignore'>.</span> <br>
<br>
<span class='envir'>\begin</span><span class='envir'>{figure}</span><span class='option'>[h]</span><br>
<span class='exclcmd'>\centering</span><br>
<span class='exclcmd'>\includegraphics</span><span class='option'>[width=0.7\textwidth]</span><span class='ignore'>{</span><span class='ignore'>alg</span><span class='ignore'>_</span><span class='ignore'>time</span><span class='ignore'>}</span><br>
<span class='cmd'>\caption</span><span class='ignore'>{</span><span class='oword'>Chart</span> <span class='oword'>showing</span> <span class='oword'>how</span> <span class='oword'>the</span> <span class='oword'>communication</span> <span class='oword'>times</span> <span class='ignore'>(</span><span class='oword'>Tbus</span><span class='ignore'>)</span> <span class='oword'>and</span> <span class='oword'>serial</span> <span class='oword'>times</span> <span class='ignore'>(</span><span class='oword'>Tsum</span><span class='ignore'>)</span> <span class='oword'>changes</span> <span class='oword'>with</span> <span class='oword'>core</span> <span class='oword'>count</span><span class='ignore'>.</span><span class='ignore'>}</span><br>
<span class='exclcmd'>\label</span><span class='ignore'>{</span><span class='ignore'>fig</span><span class='ignore'>:</span><span class='ignore'>alg</span><span class='ignore'>_</span><span class='ignore'>time</span><span class='ignore'>}</span><br>
<span class='envir'>\end</span><span class='envir'>{figure}</span><br>
<br>
<span class='word'>The</span> <span class='word'>chart</span> <span class='word'>shows</span> <span class='word'>the</span> <span class='word'>expected</span> <span class='word'>shape</span> <span class='word'>for</span> <span class='word'>software</span> <span class='word'>parallel</span> <span class='word'>performance</span> <span class='ignore'>-</span><span class='ignore'>-</span> <span class='word'>as</span> <span class='word'>the</span> <span class='word'>number</span> <span class='word'>of</span> <span class='word'>cores</span> <span class='word'>increase</span><span class='ignore'>,</span> <span class='word'>each</span> <span class='word'>core's</span> <span class='word'>problem</span> <span class='word'>space</span> <span class='word'>is</span> <span class='word'>reduced</span> <span class='word'>resulting</span> <span class='word'>in</span> <span class='word'>faster</span> <span class='word'>completion</span> <span class='word'>of</span> <span class='word'>the</span> <span class='word'>summation</span> <span class='word'>part</span><span class='ignore'>,</span> <span class='word'>and</span> <span class='word'>an</span> <span class='word'>increasing</span> <span class='word'>amount</span> <span class='word'>of</span> <span class='word'>time</span> <span class='word'>is</span> <span class='word'>spent</span> <span class='word'>on</span> <span class='word'>thread</span> <span class='word'>communication</span><span class='ignore'>.</span> <span class='word'>This</span> <span class='word'>result</span> <span class='word'>matches</span> <span class='word'>my</span> <span class='word'>CUDA</span> <span class='word'>and</span> <span class='word'>MPI</span> <span class='word'>parallelism</span> <span class='word'>performance</span> <span class='word'>analysis</span> <span class='word'>results</span> <span class='word'>conducted</span> <span class='word'>in</span> <span class='word'>2018</span> <span class='cmd'>\cite</span><span class='ignore'>{</span><span class='ignore'>soft354</span><span class='ignore'>}</span><span class='ignore'>.</span><br>
<br>
<span class='word'>It</span> <span class='word'>can</span> <span class='word'>be</span> <span class='word'>seen</span> <span class='word'>that</span> <span class='word'>the</span> <span class='word'>total</span> <span class='word'>run-time</span> <span class='word'>is</span> <span class='word'>fastest</span> <span class='word'>near</span> <span class='word'>8</span> <span class='word'>cores</span> <span class='word'>and</span> <span class='word'>increases</span> <span class='word'>at</span> <span class='word'>this</span> <span class='word'>point</span> <span class='word'>when</span> <span class='word'>using</span> <span class='word'>more</span> <span class='word'>cores</span><span class='ignore'>.</span> <span class='word'>This</span> <span class='word'>is</span> <span class='word'>likely</span> <span class='word'>due</span> <span class='word'>to</span> <span class='word'>the</span> <span class='word'>small</span> <span class='word'>summation</span> <span class='word'>range</span> <span class='word'>per</span> <span class='word'>core</span> <span class='ignore'>-</span><span class='ignore'>-</span> <span class='word'>with</span> <span class='word'>30</span> <span class='word'>cores</span> <span class='word'>just</span> <span class='word'>8</span> <span class='word'>samples</span> <span class='word'>per</span> <span class='word'>core</span> <span class='word'>are</span> <span class='word'>summed</span><span class='ignore'>,</span> <span class='word'>which</span> <span class='word'>is</span> <span class='word'>extremely</span> <span class='word'>overkill</span> <span class='word'>and</span> <span class='word'>not</span> <span class='word'>representative</span> <span class='word'>of</span> <span class='word'>what</span> <span class='word'>a</span> <span class='word'>30-core</span> <span class='word'>plus</span> <span class='word'>system</span> <span class='word'>should</span> <span class='word'>be</span> <span class='word'>used</span> <span class='word'>for</span><span class='ignore'>.</span><br>
<br>
<span class='word'>If</span> <span class='word'>a</span> <span class='word'>much</span> <span class='word'>larger</span> <span class='word'>summation</span> <span class='word'>range</span> <span class='word'>was</span> <span class='word'>used</span> <span class='ignore'>(</span><span class='word'>effectively</span> <span class='word'>representing</span> <span class='word'>a</span> <span class='word'>more</span> <span class='word'>appropriate</span> <span class='word'>scenario</span> <span class='word'>for</span> <span class='word'>systems</span> <span class='word'>with</span> <span class='word'>high</span> <span class='word'>core</span> <span class='word'>counts</span><span class='ignore'>)</span><span class='ignore'>,</span> <span class='word'>the</span> <span class='word'>chart</span> <span class='word'>shape</span> <span class='word'>would</span> <span class='word'>stretch</span> <span class='word'>horizontally</span><span class='ignore'>,</span> <span class='word'>resulting</span> <span class='word'>in</span> <span class='word'>the</span> <span class='word'>fastest</span> <span class='word'>time</span> <span class='word'>being</span> <span class='word'>on</span> <span class='word'>a</span> <span class='word'>higher</span> <span class='word'>core</span> <span class='word'>count</span> <span class='word'>than</span> <span class='word'>8</span><span class='ignore'>.</span><br>
<br>
<span class='word'>With</span> <span class='word'>high-core</span> <span class='word'>counts</span> <span class='ignore'>(</span><span class='word'>16</span><span class='ignore'>+</span><span class='ignore'>)</span> <span class='word'>it</span> <span class='word'>can</span> <span class='word'>be</span> <span class='word'>seen</span> <span class='word'>that</span> <span class='word'>the</span> <span class='word'>communication</span> <span class='word'>time</span> <span class='ignore'>(</span><span class='word'>Tbus</span><span class='cmd'>\_</span><span class='word'>T</span><span class='ignore'>)</span> <span class='word'>increases</span> <span class='word'>significantly</span><span class='ignore'>.</span> <span class='word'>This</span> <span class='word'>is</span> <span class='word'>likely</span> <span class='word'>due</span> <span class='word'>to</span> <span class='word'>the</span> <span class='word'>rotating</span> <span class='word'>arbiter</span> <span class='word'>design</span><span class='ignore'>.</span> <span class='word'>As</span> <span class='word'>discussed</span> <span class='word'>in</span> <span class='cmd'>\cref</span><span class='ignore'>{</span><span class='word'>sec</span><span class='ignore'>:</span><span class='word'>multimaster</span><span class='ignore'>}</span><span class='ignore'>,</span> <span class='word'>the</span> <span class='word'>arbiter</span> <span class='word'>grants</span> <span class='word'>bus</span> <span class='word'>access</span> <span class='word'>to</span> <span class='word'>the</span> <span class='word'>next</span> <span class='word'>core</span> <span class='word'>incrementally</span> <span class='word'>after</span> <span class='word'>the</span> <span class='word'>previous</span> <span class='word'>core</span> <span class='word'>finishes</span><span class='ignore'>.</span> <span class='word'>For</span> <span class='word'>large</span> <span class='word'>core</span> <span class='word'>systems</span><span class='ignore'>,</span> <span class='word'>this</span> <span class='word'>can</span> <span class='word'>result</span> <span class='word'>in</span> <span class='word'>large</span> <span class='word'>time</span> <span class='word'>penalties</span><span class='ignore'>.</span> <span class='word'>For</span> <span class='word'>example</span><span class='ignore'>,</span> <span class='word'>if</span> <span class='word'>core</span> <span class='cmd'>\#</span><span class='word'>30</span> <span class='word'>is</span> <span class='word'>blocking</span> <span class='word'>all</span> <span class='word'>other</span> <span class='word'>cores</span> <span class='word'>and</span> <span class='word'>the</span> <span class='word'>arbiter</span> <span class='word'>is</span> <span class='word'>lagging</span> <span class='word'>behind</span> <span class='word'>granting</span> <span class='word'>access</span> <span class='word'>to</span> <span class='word'>core</span> <span class='cmd'>\#</span><span class='word'>5</span><span class='ignore'>,</span> <span class='word'>it</span> <span class='word'>will</span> <span class='word'>take</span> <span class='word'>a</span> <span class='word'>significant</span> <span class='word'>amount</span> <span class='word'>of</span> <span class='word'>time</span> <span class='word'>for</span> <span class='word'>the</span> <span class='word'>arbiter</span> <span class='word'>to</span> <span class='word'>reach</span> <span class='word'>core</span> <span class='cmd'>\#</span><span class='word'>30</span> <span class='word'>to</span> <span class='word'>unblock</span> <span class='word'>the</span> <span class='word'>system</span><span class='ignore'>.</span><br>
<br>
<span class='cmd'>\subsection</span><span class='ignore'>{</span><span class='hword'>Shared</span> <span class='hword'>Instruction</span> <span class='hword'>Memory</span> <span class='hword'>Impact</span><span class='ignore'>}</span><br>
<span class='word'>As</span> <span class='word'>previous</span> <span class='word'>discussed</span> <span class='word'>in</span> <span class='cmd'>\cref</span><span class='ignore'>{</span><span class='word'>sec</span><span class='ignore'>:</span><span class='word'>anal</span><span class='ignore'>_</span><span class='word'>memory</span><span class='ignore'>}</span><span class='ignore'>,</span> <span class='word'>using</span> <span class='word'>a</span> <span class='word'>shared</span> <span class='word'>instruction</span> <span class='word'>memory</span> <span class='word'>approach</span> <span class='word'>reduces</span> <span class='word'>the</span> <span class='word'>size</span> <span class='word'>of</span> <span class='word'>the</span> <span class='word'>design</span> <span class='word'>but</span> <span class='word'>will</span> <span class='word'>result</span> <span class='word'>in</span> <span class='word'>increasingly</span> <span class='word'>long</span> <span class='word'>instruction</span> <span class='word'>fetches</span> <span class='word'>as</span> <span class='word'>the</span> <span class='word'>core</span> <span class='word'>count</span> <span class='word'>increases</span><span class='ignore'>.</span> <span class='cmd'>\cref</span><span class='ignore'>{</span><span class='word'>fig</span><span class='ignore'>:</span><span class='word'>alg</span><span class='ignore'>_</span><span class='word'>time</span><span class='ignore'>_</span><span class='word'>shared</span><span class='ignore'>}</span> <span class='word'>below</span> <span class='word'>shows</span> <span class='word'>the</span> <span class='word'>same</span> <span class='word'>scenario</span> <span class='word'>but</span> <span class='word'>using</span> <span class='word'>shared</span> <span class='word'>instruction</span> <span class='word'>memory</span><span class='ignore'>.</span> <span class='word'>The</span> <span class='word'>shape</span> <span class='word'>of</span> <span class='word'>the</span> <span class='word'>chart</span> <span class='word'>remains</span> <span class='word'>similar</span><span class='ignore'>,</span> <span class='word'>however</span> <span class='word'>the</span> <span class='word'>total</span> <span class='word'>run-time</span> <span class='word'>is</span> <span class='word'>close</span> <span class='word'>to</span> <span class='word'>double</span> <span class='word'>the</span> <span class='word'>time</span> <span class='word'>of</span> <span class='word'>the</span> <span class='word'>per-core</span> <span class='word'>instruction</span> <span class='word'>memory</span> <span class='word'>results</span><span class='ignore'>,</span> <span class='word'>and</span> <span class='word'>increases</span> <span class='word'>significantly</span> <span class='word'>with</span> <span class='word'>more</span> <span class='word'>cores</span><span class='ignore'>.</span><br>
<br>
<span class='envir'>\begin</span><span class='envir'>{figure}</span><span class='option'>[h]</span><br>
<span class='exclcmd'>\centering</span><br>
<span class='exclcmd'>\includegraphics</span><span class='option'>[width=0.7\textwidth]</span><span class='ignore'>{</span><span class='ignore'>alg</span><span class='ignore'>_</span><span class='ignore'>time</span><span class='ignore'>_</span><span class='ignore'>shared</span><span class='ignore'>}</span><br>
<span class='cmd'>\caption</span><span class='ignore'>{</span><span class='oword'>Similar</span> <span class='oword'>to</span> <span class='cmd'>\cref</span><span class='ignore'>{</span><span class='oword'>fig</span><span class='ignore'>:</span><span class='oword'>alg</span><span class='ignore'>_</span><span class='oword'>time</span><span class='ignore'>}</span> <span class='oword'>but</span> <span class='oword'>using</span> <span class='oword'>shared</span> <span class='oword'>instruction</span> <span class='oword'>memory</span> <span class='oword'>to</span> <span class='oword'>reduce</span> <span class='oword'>block</span> <span class='oword'>memory</span> <span class='oword'>requirements</span> <span class='oword'>per</span> <span class='oword'>core</span><span class='ignore'>.</span><span class='ignore'>}</span><br>
<span class='exclcmd'>\label</span><span class='ignore'>{</span><span class='ignore'>fig</span><span class='ignore'>:</span><span class='ignore'>alg</span><span class='ignore'>_</span><span class='ignore'>time</span><span class='ignore'>_</span><span class='ignore'>shared</span><span class='ignore'>}</span><br>
<span class='envir'>\end</span><span class='envir'>{figure}</span><br>
<br>
<span class='word'>As</span> <span class='word'>with</span> <span class='word'>Figure</span> <span class='cmd'>\ref</span><span class='ignore'>{</span><span class='ignore'>fig</span><span class='ignore'>:</span><span class='ignore'>alg</span><span class='ignore'>_</span><span class='ignore'>time</span><span class='ignore'>}</span><span class='ignore'>,</span> <span class='word'>using</span> <span class='word'>too</span> <span class='word'>many</span> <span class='word'>cores</span> <span class='word'>for</span> <span class='word'>a</span> <span class='word'>small</span> <span class='word'>data</span> <span class='word'>set</span> <span class='word'>can</span> <span class='word'>result</span> <span class='word'>in</span> <span class='word'>the</span> <span class='word'>scenario</span> <span class='word'>taking</span> <span class='word'>longer</span> <span class='word'>than</span> <span class='word'>a</span> <span class='word'>single</span> <span class='word'>core</span><span class='ignore'>.</span><br>
<br>
<span class='cmd'>\section</span><span class='ignore'>{</span><span class='hword'>Analysis</span> <span class='hword'>Review</span><span class='ignore'>}</span><br>
<span class='word'>There</span> <span class='word'>are</span> <span class='word'>several</span> <span class='word'>takeaways</span> <span class='word'>from</span> <span class='word'>these</span> <span class='word'>results</span><span class='ignore'>:</span><br>
<span class='envir'>\begin</span><span class='envir'>{enumerate}</span><br>
<span class='cmd'>\item</span> <span class='word'>Use</span> <span class='word'>an</span> <span class='word'>appropriate</span> <span class='word'>number</span> <span class='word'>of</span> <span class='word'>cores</span> <span class='word'>for</span> <span class='word'>the</span> <span class='word'>dataset</span> <span class='word'>size</span><span class='ignore'>.</span><span class='cmd'>\\</span><span class='word'>Too</span> <span class='word'>few</span> <span class='word'>cores</span> <span class='word'>result</span> <span class='word'>in</span> <span class='word'>longer</span> <span class='word'>work</span> <span class='word'>times</span> <span class='word'>and</span> <span class='word'>shorter</span> <span class='word'>communication</span> <span class='word'>times</span><span class='ignore'>,</span> <span class='word'>and</span> <span class='word'>too</span> <span class='word'>many</span> <span class='word'>cores</span> <span class='word'>results</span> <span class='word'>in</span> <span class='word'>shorter</span> <span class='word'>work</span> <span class='word'>times</span> <span class='word'>and</span> <span class='word'>longer</span> <span class='word'>communication</span> <span class='word'>times</span><span class='ignore'>.</span><br>
<br>
<span class='cmd'>\item</span> <span class='word'>Use</span> <span class='word'>an</span> <span class='word'>appropriate</span> <span class='word'>arbitration</span> <span class='word'>scheme</span> <span class='word'>to</span> <span class='word'>prevent</span> <span class='word'>blocking</span> <span class='word'>the</span> <span class='word'>system</span> <span class='word'>for</span> <span class='word'>too</span> <span class='word'>long</span><span class='ignore'>.</span><span class='cmd'>\\</span><br>
<span class='word'>In</span> <span class='word'>this</span> <span class='word'>design</span><span class='ignore'>,</span> <span class='word'>and</span> <span class='word'>likely</span> <span class='word'>others</span><span class='ignore'>,</span> <span class='word'>the</span> <span class='word'>blocking</span> <span class='word'>core</span> <span class='word'>is</span> <span class='word'>known</span> <span class='word'>by</span> <span class='word'>the</span> <span class='word'>global</span> <span class='word'>shared</span> <span class='word'>memory</span> <span class='ignore'>(</span><span class='word'>via</span> <span class='word'>the</span> <span class='word'>locking</span> <span class='word'>cells</span><span class='ignore'>)</span> <span class='word'>meaning</span> <span class='word'>that</span> <span class='word'>this</span> <span class='word'>information</span> <span class='word'>can</span> <span class='word'>be</span> <span class='word'>passed</span> <span class='word'>to</span> <span class='word'>the</span> <span class='word'>arbiter</span> <span class='word'>to</span> <span class='word'>give</span> <span class='word'>priority</span><span class='ignore'>,</span> <span class='word'>while</span> <span class='word'>still</span> <span class='word'>avoiding</span> <span class='word'>deadlocks</span><span class='ignore'>,</span> <span class='word'>to</span> <span class='word'>the</span> <span class='word'>blocking</span> <span class='word'>core</span><span class='ignore'>.</span><br>
<br>
<span class='cmd'>\item</span> <span class='word'>Use</span> <span class='word'>an</span> <span class='word'>appropriate</span> <span class='word'>number</span> <span class='word'>of</span> <span class='word'>cores</span> <span class='word'>and</span> <span class='word'>still</span> <span class='word'>have</span> <span class='word'>space</span> <span class='word'>for</span> <span class='word'>other</span> <span class='word'>business</span> <span class='word'>logic</span><span class='ignore'>.</span><br>
<br>
<span class='cmd'>\item</span> <span class='word'>More</span> <span class='word'>cores</span> <span class='word'>may</span> <span class='word'>result</span> <span class='word'>in</span> <span class='word'>lower</span> <span class='word'>clock</span> <span class='word'>frequencies</span><span class='ignore'>.</span><span class='cmd'>\\</span><span class='word'>From</span> <span class='cmd'>\cref</span><span class='ignore'>{</span><span class='word'>fig</span><span class='ignore'>:</span><span class='word'>sizes</span><span class='ignore'>_</span><span class='word'>fmax</span><span class='ignore'>}</span><span class='ignore'>,</span> <span class='word'>the</span> <span class='word'>single-core</span> <span class='word'>design</span> <span class='word'>can</span> <span class='word'>be</span> <span class='word'>ran</span> <span class='word'>at</span> <span class='mathgroup'>$</span><span class='mathcmd'>\approx</span><span class='mathgroup'>$</span><span class='word'>95</span> <span class='word'>MHz</span> <span class='word'>while</span> <span class='word'>the</span> <span class='word'>4-core</span> <span class='word'>design</span> <span class='word'>only</span> <span class='mathgroup'>$</span><span class='mathcmd'>\approx</span><span class='mathgroup'>$</span><span class='word'>65</span> <span class='word'>MHz</span> <span class='ignore'>(</span><span class='word'>a</span> <span class='mathgroup'>$</span><span class='mathcmd'>\approx</span><span class='mathgroup'>$</span><span class='word'>30</span><span class='ignore'>\%</span> <span class='word'>decrease</span><span class='ignore'>)</span><span class='ignore'>.</span> <span class='word'>The</span> <span class='word'>parallel</span> <span class='word'>speed</span> <span class='word'>improvements</span> <span class='word'>from</span> <span class='word'>having</span> <span class='word'>more</span> <span class='word'>cores</span> <span class='word'>may</span> <span class='word'>be</span> <span class='word'>less</span> <span class='word'>than</span> <span class='word'>a</span> <span class='word'>single</span> <span class='word'>fast</span> <span class='word'>core</span><span class='ignore'>.</span><br>
<span class='envir'>\end</span><span class='envir'>{enumerate}</span><br>
<br>
<span class='word'>System</span> <span class='word'>designers</span> <span class='word'>should</span> <span class='word'>experiment</span> <span class='word'>with</span> <span class='word'>their</span> <span class='word'>algorithm</span> <span class='word'>and</span> <span class='word'>these</span> <span class='word'>takeaways</span> <span class='word'>to</span> <span class='word'>determine</span> <span class='word'>the</span> <span class='word'>approximate</span> <span class='word'>number</span> <span class='word'>of</span> <span class='word'>processor</span> <span class='word'>cores</span> <span class='word'>for</span> <span class='word'>their</span> <span class='word'>requirements</span><span class='ignore'>,</span> <span class='word'>be</span> <span class='word'>that</span> <span class='word'>algorithm</span> <span class='word'>time</span><span class='ignore'>,</span> <span class='word'>size</span><span class='ignore'>,</span> <span class='word'>clock</span> <span class='word'>frequency</span><span class='ignore'>,</span> <span class='word'>or</span> <span class='word'>compilation</span> <span class='word'>time</span><span class='ignore'>.</span><br>
<br>
<br>
<br>
<span class='cmd'>\chapter</span><span class='ignore'>{</span><span class='hword'>Conclusion</span><span class='ignore'>}</span><br>
<span class='cmd'>\startcontents</span><span class='option'>[chapters]</span><br>
<span class='cmd'>\printcontents</span><span class='option'>[chapters]</span><span class='ignore'>{</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='word'>1</span><span class='ignore'>}</span><span class='ignore'>{</span><span class='ignore'>}</span><br>
<br>
<span class='cmd'>\section</span><span class='ignore'>{</span><span class='hword'>Overview</span><span class='ignore'>}</span><br>
<br>
<span class='cmd'>\section</span><span class='ignore'>{</span><span class='hword'>Review</span> <span class='hword'>Against</span> <span class='hword'>Project</span> <span class='hword'>Deliverables</span><span class='ignore'>}</span><br>
<span class='cmd'>\subsection</span><span class='ignore'>{</span><span class='hword'>Core</span> <span class='hword'>Deliverables</span><span class='ignore'>}</span><br>
<span class='word'>This</span> <span class='word'>project</span> <span class='word'>has</span> <span class='word'>achieved</span> <span class='word'>all</span> <span class='word'>core</span> <span class='word'>deliverables</span> <span class='word'>outlined</span> <span class='word'>in</span> <span class='cmd'>\cref</span><span class='ignore'>{</span><span class='word'>sect</span><span class='ignore'>:</span><span class='word'>goals</span><span class='ignore'>}</span> <span class='cmd'>\nameref</span><span class='ignore'>{</span><span class='word'>sect</span><span class='ignore'>:</span><span class='word'>goals</span><span class='ignore'>}</span><span class='ignore'>.</span><br>
<br>
<span class='envir'>\begin</span><span class='envir'>{enumerate}</span><span class='option'>[leftmargin=2\parindent, label=\bfseries CD\arabic*]</span><br>
<span class='cmd'>\item</span><span class='ignore'>{</span><span class='cmd'>\textbf</span><span class='ignore'>{</span><span class='word'>Design</span> <span class='word'>a</span> <span class='word'>compact</span> <span class='word'>16-bit</span> <span class='word'>RISC</span> <span class='word'>instruction</span> <span class='word'>set</span> <span class='word'>architecture</span><span class='ignore'>.</span><span class='ignore'>}</span><span class='cmd'>\\</span><br>
<span class='cmd'>\textit</span><span class='ignore'>{</span><span class='word'>Achieved</span><span class='ignore'>}</span><span class='ignore'>.</span> <span class='word'>A</span> <span class='word'>new</span> <span class='word'>16-bit</span> <span class='word'>instruction</span> <span class='word'>set</span> <span class='word'>has</span> <span class='word'>been</span> <span class='word'>designed</span> <span class='word'>and</span> <span class='word'>implemented</span><span class='ignore'>,</span> <span class='word'>nicknamed</span> <span class='cmd'>\textit</span><span class='ignore'>{</span><span class='word'>Vmicro16</span><span class='ignore'>}</span> <span class='ignore'>(</span><span class='word'>Verilog</span> <span class='word'>microprocessor</span> <span class='word'>16-bits</span><span class='ignore'>)</span><span class='ignore'>.</span><br>
<span class='ignore'>}</span><br>
<br>
<span class='cmd'>\item</span><span class='ignore'>{</span><span class='cmd'>\textbf</span><span class='ignore'>{</span><span class='word'>Design</span> <span class='word'>and</span> <span class='word'>implement</span> <span class='word'>a</span> <span class='word'>Verilog</span> <span class='word'>RISC</span> <span class='word'>core</span> <span class='word'>that</span> <span class='word'>implements</span> <span class='word'>the</span> <span class='word'>ISA</span> <span class='word'>in</span> <span class='cmd'>\ref</span><span class='ignore'>{</span><span class='ignore'>cd</span><span class='ignore'>:</span><span class='ignore'>isa</span><span class='ignore'>}</span><span class='ignore'>.</span><span class='ignore'>}</span><span class='cmd'>\\</span><br>
<span class='cmd'>\textit</span><span class='ignore'>{</span><span class='word'>Achieved</span><span class='ignore'>}</span><span class='ignore'>.</span> <span class='word'>The</span> <span class='word'>implementation</span> <span class='word'>is</span> <span class='word'>found</span> <span class='word'>in</span> <span class='cmd'>\verb</span><span class='cmd'>|</span><span class='ignore'>vmicro16.v</span><span class='cmd'>|</span><span class='ignore'>.</span><br>
<span class='ignore'>}</span><br>
<br>
<span class='cmd'>\item</span><span class='ignore'>{</span><span class='cmd'>\textbf</span><span class='ignore'>{</span><span class='word'>Design</span> <span class='word'>and</span> <span class='word'>implement</span> <span class='word'>an</span> <span class='word'>on-chip</span> <span class='word'>interconnect</span> <span class='word'>for</span> <span class='word'>multi-core</span> <span class='word'>processing</span> <span class='ignore'>(</span><span class='word'>2</span> <span class='word'>to</span> <span class='word'>32</span> <span class='word'>cores</span><span class='ignore'>)</span> <span class='word'>using</span> <span class='word'>the</span> <span class='word'>RISC</span> <span class='word'>core</span> <span class='word'>from</span> <span class='cmd'>\ref</span><span class='ignore'>{</span><span class='ignore'>cd</span><span class='ignore'>:</span><span class='ignore'>core</span><span class='ignore'>}</span><span class='ignore'>.</span><span class='ignore'>}</span><span class='cmd'>\\</span><br>
<span class='cmd'>\textit</span><span class='ignore'>{</span><span class='word'>Achieved</span><span class='ignore'>}</span><span class='ignore'>.</span> <span class='word'>The</span> <span class='word'>AMBA</span> <span class='word'>APB</span> <span class='word'>bus</span> <span class='word'>was</span> <span class='word'>chosen</span> <span class='word'>and</span> <span class='word'>adapted</span> <span class='word'>for</span> <span class='word'>multi-master</span> <span class='word'>support</span><span class='ignore'>.</span> <span class='word'>While</span> <span class='word'>the</span> <span class='word'>design</span> <span class='word'>is</span> <span class='word'>simple</span> <span class='word'>and</span> <span class='word'>lacks</span> <span class='word'>in</span> <span class='word'>performance</span><span class='ignore'>,</span> <span class='word'>it</span> <span class='word'>does</span> <span class='word'>not</span> <span class='word'>consume</span> <span class='word'>a</span> <span class='word'>significant</span> <span class='word'>amount</span> <span class='word'>of</span> <span class='word'>area</span><span class='ignore'>,</span> <span class='word'>leaving</span> <span class='word'>space</span> <span class='word'>for</span> <span class='word'>more</span> <span class='word'>cores</span> <span class='word'>and</span> <span class='word'>peripherals</span><span class='ignore'>.</span><br>
<span class='ignore'>}</span><br>
<br>
<span class='cmd'>\item</span><span class='ignore'>{</span><span class='cmd'>\textbf</span><span class='ignore'>{</span><span class='word'>Analyse</span> <span class='word'>performance</span> <span class='word'>of</span> <span class='word'>serial</span> <span class='word'>and</span> <span class='word'>parallel</span> <span class='word'>software</span> <span class='word'>algorithms</span><span class='ignore'>,</span> <span class='word'>such</span> <span class='word'>as</span> <span class='word'>parallel</span> <span class='word'>DFT</span><span class='ignore'>,</span> <span class='word'>on</span> <span class='word'>the</span> <span class='word'>processor</span><span class='ignore'>.</span><span class='ignore'>}</span><span class='cmd'>\\</span><br>
<span class='cmd'>\textit</span><span class='ignore'>{</span><span class='word'>Achieved</span><span class='ignore'>}</span><span class='ignore'>.</span> <span class='word'>A</span> <span class='word'>summation</span> <span class='word'>computation</span> <span class='word'>was</span> <span class='word'>chosen</span> <span class='word'>to</span> <span class='word'>demonstrate</span> <span class='word'>effectiveness</span> <span class='word'>in</span> <span class='word'>various</span> <span class='word'>parallel</span> <span class='word'>computational</span> <span class='word'>problems</span><span class='ignore'>,</span> <span class='word'>such</span> <span class='word'>as</span> <span class='word'>subset</span> <span class='word'>calculation</span><span class='ignore'>,</span> <span class='word'>thread</span> <span class='word'>communication</span><span class='ignore'>,</span> <span class='word'>and</span> <span class='word'>broadcast</span><span class='ignore'>/</span><span class='word'>gather</span> <span class='word'>procedures</span><span class='ignore'>.</span><br>
<span class='ignore'>}</span><br>
<br>
<span class='cmd'>\item</span><span class='ignore'>{</span><span class='cmd'>\textbf</span><span class='ignore'>{</span><span class='word'>Allow</span> <span class='word'>the</span> <span class='word'>RISC</span> <span class='word'>core</span> <span class='word'>to</span> <span class='word'>be</span> <span class='word'>easily</span> <span class='word'>compiled</span> <span class='word'>to</span> <span class='word'>multiple</span> <span class='word'>FPGA</span> <span class='word'>vendors</span> <span class='ignore'>(</span><span class='word'>Xilinx</span><span class='ignore'>,</span> <span class='word'>Altera</span><span class='ignore'>)</span><span class='ignore'>.</span><span class='ignore'>}</span><span class='cmd'>\\</span><br>
<span class='cmd'>\textit</span><span class='ignore'>{</span><span class='word'>Achieved</span><span class='ignore'>}</span><span class='ignore'>.</span> <span class='word'>The</span> <span class='word'>design</span> <span class='word'>has</span> <span class='word'>been</span> <span class='word'>successfully</span> <span class='word'>compiled</span> <span class='word'>on</span> <span class='word'>Quartus</span> <span class='word'>Prime</span><span class='ignore'>,</span> <span class='word'>Xilinx</span> <span class='word'>Vivado</span><span class='ignore'>,</span> <span class='word'>Xilinx</span> <span class='word'>ISE</span><span class='ignore'>,</span> <span class='word'>ModelSim</span><span class='ignore'>,</span> <span class='word'>and</span> <span class='word'>Icarus</span> <span class='word'>Verilog</span><span class='ignore'>.</span> <span class='word'>The</span> <span class='word'>design</span> <span class='word'>has</span> <span class='word'>been</span> <span class='word'>succesfully</span> <span class='word'>implemented</span> <span class='word'>on</span> <span class='word'>the</span> <span class='word'>Cyclone</span> <span class='word'>V</span> <span class='word'>and</span> <span class='word'>Spartan-6</span> <span class='word'>FPGA</span> <span class='word'>devices</span><span class='ignore'>.</span><br>
<span class='ignore'>}</span><br>
<span class='envir'>\end</span><span class='envir'>{enumerate}</span><br>
<br>
<span class='cmd'>\subsection</span><span class='ignore'>{</span><span class='hword'>Extended</span> <span class='hword'>Deliverables</span><span class='ignore'>}</span><br>
<span class='envir'>\begin</span><span class='envir'>{enumerate}</span><span class='option'>[leftmargin=2\parindent, label=\bfseries ED\arabic*]</span><br>
&nbsp;&nbsp;<span class='cmd'>\item</span><span class='ignore'>{</span><span class='cmd'>\textbf</span><span class='ignore'>{</span><span class='word'>Design</span> <span class='word'>a</span> <span class='word'>RISC</span> <span class='word'>core</span> <span class='word'>with</span> <span class='word'>an</span> <span class='word'>instructions-per-clock</span> <span class='ignore'>(</span><span class='word'>IPC</span><span class='ignore'>)</span> <span class='word'>rating</span> <span class='word'>of</span> <span class='word'>at</span> <span class='word'>least</span> <span class='word'>1.0</span> <span class='ignore'>(</span><span class='word'>a</span> <span class='word'>single-cycle</span> <span class='word'>CPU</span><span class='ignore'>)</span><span class='ignore'>.</span><span class='ignore'>}</span><span class='cmd'>\\</span><br>
&nbsp;&nbsp;<span class='cmd'>\textit</span><span class='ignore'>{</span><span class='word'>Not</span> <span class='word'>achieved</span><span class='ignore'>}</span><span class='ignore'>.</span> <span class='word'>Although</span> <span class='word'>present</span> <span class='word'>in</span> <span class='word'>the</span> <span class='word'>interim</span> <span class='word'>update</span><span class='ignore'>,</span> <span class='word'>it</span> <span class='word'>was</span> <span class='word'>decided</span> <span class='word'>to</span> <span class='word'>remove</span> <span class='word'>this</span> <span class='word'>feature</span> <span class='word'>due</span> <span class='word'>to</span> <span class='word'>it's</span> <span class='word'>complexity</span> <span class='word'>and</span> <span class='word'>possibility</span> <span class='word'>of</span> <span class='word'>it</span> <span class='word'>hindering</span> <span class='word'>multi-core</span> <span class='word'>and</span> <span class='word'>interrupt</span> <span class='word'>integration</span><span class='ignore'>.</span><br>
&nbsp; &nbsp; <span class='ignore'>}</span><br>
&nbsp; &nbsp; <span class='cmd'>\item</span><span class='ignore'>{</span><span class='cmd'>\textbf</span><span class='ignore'>{</span><span class='word'>Design</span> <span class='word'>a</span> <span class='word'>RISC</span> <span class='word'>core</span> <span class='word'>with</span> <span class='word'>a</span> <span class='word'>pipe-lined</span> <span class='word'>data</span> <span class='word'>path</span> <span class='word'>to</span> <span class='word'>increase</span> <span class='word'>the</span> <span class='word'>design's</span> <span class='word'>clock</span> <span class='word'>speed</span><span class='ignore'>.</span><span class='ignore'>}</span><span class='cmd'>\\</span><br>
&nbsp;&nbsp;<span class='cmd'>\textit</span><span class='ignore'>{</span><span class='word'>Achieved</span><span class='ignore'>}</span><span class='ignore'>.</span> <span class='word'>Data</span> <span class='word'>in</span> <span class='word'>the</span> <span class='word'>processor's</span> <span class='word'>pipeline</span> <span class='word'>is</span> <span class='word'>clocked</span> <span class='word'>through</span> <span class='word'>stages</span> <span class='word'>of</span> <span class='word'>flip-flops</span> <span class='word'>to</span> <span class='word'>reduce</span> <span class='word'>the</span> <span class='word'>critical</span> <span class='word'>path</span><span class='ignore'>.</span><br>
&nbsp; &nbsp; <span class='ignore'>}</span><br>
&nbsp; &nbsp; <span class='cmd'>\item</span><span class='ignore'>{</span><span class='cmd'>\textit</span><span class='ignore'>{</span><span class='word'>Design</span> <span class='word'>a</span> <span class='word'>scalable</span> <span class='word'>multi-core</span> <span class='word'>interconnect</span> <span class='word'>supporting</span> <span class='word'>arbitrary</span> <span class='ignore'>(</span><span class='word'>more</span> <span class='word'>than</span> <span class='word'>32</span><span class='ignore'>)</span> <span class='word'>RISC</span> <span class='word'>core</span> <span class='word'>instances</span> <span class='ignore'>(</span><span class='word'>manycore</span><span class='ignore'>)</span> <span class='word'>using</span> <span class='word'>Network-on-Chip</span> <span class='ignore'>(</span><span class='word'>NoC</span><span class='ignore'>)</span> <span class='word'>architecture</span><span class='ignore'>.</span><span class='ignore'>}</span><span class='cmd'>\\</span><br>
&nbsp;&nbsp;<span class='cmd'>\textit</span><span class='ignore'>{</span><span class='word'>Not</span> <span class='word'>achieved</span><span class='ignore'>}</span><span class='ignore'>.</span> <span class='word'>The</span> <span class='word'>implemented</span> <span class='word'>design</span> <span class='word'>uses</span> <span class='word'>traditional</span> <span class='word'>multi-core</span> <span class='word'>communication</span> <span class='word'>techniques</span> <span class='ignore'>(</span><span class='word'>shared</span> <span class='word'>memory</span> <span class='word'>communication</span><span class='ignore'>,</span> <span class='word'>mutexes</span><span class='ignore'>,</span> <span class='word'>etc</span><span class='ignore'>.</span><span class='ignore'>)</span> <span class='word'>rather</span> <span class='word'>than</span> <span class='word'>a</span> <span class='word'>NoC</span> <span class='word'>architecture</span><span class='ignore'>.</span> <span class='word'>While</span> <span class='word'>the</span> <span class='word'>NoC</span> <span class='word'>design</span> <span class='word'>would</span> <span class='word'>be</span> <span class='word'>more</span> <span class='word'>scalable</span><span class='ignore'>,</span> <span class='word'>it</span> <span class='word'>would</span> <span class='word'>be</span> <span class='word'>of</span> <span class='word'>much</span> <span class='word'>higher</span> <span class='word'>complexity</span> <span class='word'>and</span> <span class='word'>out-of-scope</span> <span class='word'>for</span> <span class='word'>this</span> <span class='word'>project's</span> <span class='word'>timeline</span><span class='ignore'>.</span><span class='ignore'>}</span><br>
&nbsp; &nbsp; <span class='cmd'>\item</span><span class='ignore'>{</span><span class='word'>Design</span> <span class='word'>a</span> <span class='word'>compiler-backend</span> <span class='word'>for</span> <span class='word'>the</span> <span class='word'>PRCO304</span> <span class='cmd'>\cite</span><span class='ignore'>{</span><span class='ignore'>prco304</span><span class='ignore'>}</span> <span class='word'>compiler</span> <span class='word'>to</span> <span class='word'>support</span> <span class='word'>the</span> <span class='word'>ISA</span> <span class='word'>from</span> <span class='cmd'>\ref</span><span class='ignore'>{</span><span class='ignore'>cd</span><span class='ignore'>:</span><span class='ignore'>isa</span><span class='ignore'>}</span><span class='ignore'>.</span> <span class='word'>This</span> <span class='word'>will</span> <span class='word'>make</span> <span class='word'>it</span> <span class='word'>easier</span> <span class='word'>to</span> <span class='word'>build</span> <span class='word'>complex</span> <span class='word'>multi-core</span> <span class='word'>software</span> <span class='word'>for</span> <span class='word'>the</span> <span class='word'>processor</span><span class='ignore'>.</span><span class='ignore'>}</span><br>
&nbsp; &nbsp; <span class='cmd'>\item</span><span class='ignore'>{</span><span class='word'>The</span> <span class='word'>RISC</span> <span class='word'>core</span> <span class='word'>can</span> <span class='word'>communicate</span> <span class='word'>to</span> <span class='word'>peripherals</span> <span class='word'>via</span> <span class='word'>a</span> <span class='word'>memory-mapped</span> <span class='word'>addresses</span> <span class='word'>using</span> <span class='word'>the</span> <span class='word'>Wishbone</span> <span class='word'>bus</span><span class='ignore'>.</span><span class='ignore'>}</span><br>
&nbsp; &nbsp; <span class='cmd'>\item</span><span class='ignore'>{</span><span class='word'>Implement</span> <span class='word'>various</span> <span class='word'>memory-mapped</span> <span class='word'>peripherals</span> <span class='word'>such</span> <span class='word'>as</span> <span class='word'>UART</span><span class='ignore'>,</span> <span class='word'>GPIO</span><span class='ignore'>,</span> <span class='word'>LCD</span><span class='ignore'>,</span> <span class='word'>to</span> <span class='word'>aid</span> <span class='word'>visual</span> <span class='word'>representation</span> <span class='word'>of</span> <span class='word'>the</span> <span class='word'>processor</span> <span class='word'>during</span> <span class='word'>the</span> <span class='word'>demonstration</span> <span class='word'>viva</span><span class='ignore'>.</span><span class='ignore'>}</span> <br>
&nbsp; &nbsp; <span class='cmd'>\item</span><span class='ignore'>{</span><span class='word'>Store</span> <span class='word'>instruction</span> <span class='word'>memory</span> <span class='word'>in</span> <span class='word'>SPI</span> <span class='word'>flash</span><span class='ignore'>.</span><span class='ignore'>}</span><br>
&nbsp; &nbsp; <span class='cmd'>\item</span><span class='ignore'>{</span><span class='word'>Reprogram</span> <span class='word'>instruction</span> <span class='word'>memory</span> <span class='word'>at</span> <span class='word'>runtime</span> <span class='word'>from</span> <span class='word'>host</span> <span class='word'>computer</span><span class='ignore'>.</span><span class='ignore'>}</span><br>
&nbsp; &nbsp; <span class='cmd'>\item</span><span class='ignore'>{</span><span class='word'>Processor</span> <span class='word'>external</span> <span class='word'>debugger</span> <span class='word'>using</span> <span class='word'>host-processor</span> <span class='word'>link</span><span class='ignore'>.</span><span class='ignore'>}</span><br>
<span class='envir'>\end</span><span class='envir'>{enumerate}</span><br>
<br>
<br>
<span class='cmd'>\section</span><span class='ignore'>{</span><span class='hword'>Future</span> <span class='hword'>Work</span><span class='ignore'>}</span><br>
<span class='word'>There</span> <span class='word'>are</span> <span class='word'>several</span> <span class='word'>aspects</span> <span class='word'>to</span> <span class='word'>this</span> <span class='word'>project</span> <span class='word'>which</span> <span class='word'>could</span> <span class='word'>be</span> <span class='word'>improved</span><span class='ignore'>.</span> <span class='word'>First</span><span class='ignore'>,</span> <br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
</p></div>
<div class='count'>
<ul class='count'>
<li class='header'>Included file: ./chapter_results.tex</li>
<li>Encoding: ascii</li>
<li>Words in text: 2031</li>
<li>Words in headers: 41</li>
<li>Words outside text (captions, etc.): 124</li>
<li>Number of headers: 20</li>
<li>Number of floats/tables/figures: 5</li>
<li>Number of math inlines: 3</li>
<li>Number of math displayed: 3</li>
<li>Subcounts:</li>
<span class='subcount'>
<li class='fielddesc'>&nbsp; text+headers+captions (#headers/#floats/#inlines/#displayed)</li>
  <li>15+2+0 (1/0/0/0) Chapter: Analysis \&amp; Results</li>
  <li>5+1+0 (1/0/0/0) Section: Introduction</li>
  <li>17+2+0 (1/0/0/0) Section: Implementation Analysis</li>
  <li>415+8+82 (4/2/0/0) Subsection: Design Size</li>
  <li>63+2+10 (1/1/0/0) Subsection: Maximum Frequency</li>
  <li>24+2+0 (1/0/0/0) Section: Scenario Performance</li>
  <li>292+2+0 (1/0/0/3) Subsection: Scenario Overview</li>
  <li>175+2+0 (1/0/0/0) Subsection: Performance Measurements</li>
  <li>316+2+15 (1/1/0/0) Subsection: Performance Results</li>
  <li>98+4+17 (1/1/0/0) Subsection: Shared Instruction Memory Impact</li>
  <li>188+2+0 (1/0/3/0) Section: Analysis Review</li>
  <li>1+1+0 (1/0/0/0) Chapter: Conclusion</li>
  <li>0+1+0 (1/0/0/0) Section: Overview</li>
  <li>0+4+0 (1/0/0/0) Section: Review Against Project Deliverables</li>
  <li>195+2+0 (1/0/0/0) Subsection: Core Deliverables</li>
  <li>215+2+0 (1/0/0/0) Subsection: Extended Deliverables</li>
  <li>12+2+0 (1/0/0/0) Section: Future Work</li>
</span>
</ul>
</div>
<div class='sumcount'>
<h2>Sum of files: ELEC5881M_Ben_Lancaster_201280376_Final.tex</h2>
<ul class='count'>
<li class='header'>File(s) total: ELEC5881M_Ben_Lancaster_201280376_Final.tex</li>
<li>Words in text: 9550</li>
<li>Words in headers: 246</li>
<li>Words outside text (captions, etc.): 690</li>
<li>Number of headers: 98</li>
<li>Number of floats/tables/figures: 32</li>
<li>Number of math inlines: 11</li>
<li>Number of math displayed: 4</li>
<li>Files: 9</li>
<li>Subcounts:</li>
<span class='subcount'>
<li class='fielddesc'>&nbsp; text+headers+captions (#headers/#floats/#inlines/#displayed)</li>
  <li>1100+19+63 (8/3/4/1) Included file: ./chapter_int_intro.tex</li>
  <li>1326+93+52 (25/4/0/0) Included file: ./chapter_proj.tex</li>
  <li>2557+46+221 (21/5/3/0) Included file: ./chapter_singlecore.tex</li>
  <li>1720+36+143 (17/11/0/0) Included file: ./chapter_design.tex</li>
  <li>816+11+87 (7/4/1/0) Included file: ./chapter_software.tex</li>
  <li>2031+41+124 (20/5/3/3) Included file: ./chapter_results.tex</li>
</span>
</ul>
</div>
</div>

</body>

</html>
